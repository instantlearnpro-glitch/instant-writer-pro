var wg=Object.defineProperty;var Sg=(r,h,u)=>h in r?wg(r,h,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[h]=u;var fu=(r,h,u)=>Sg(r,typeof h!="symbol"?h+"":h,u);(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))c(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const m of x.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function u(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function c(p){if(p.ep)return;p.ep=!0;const x=u(p);fetch(p.href,x)}})();function D0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var du={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Ng(){if(Fh)return Go;Fh=1;var r=Symbol.for("react.transitional.element"),h=Symbol.for("react.fragment");function u(c,p,x){var m=null;if(x!==void 0&&(m=""+x),p.key!==void 0&&(m=""+p.key),"key"in p){x={};for(var d in p)d!=="key"&&(x[d]=p[d])}else x=p;return p=x.ref,{$$typeof:r,type:c,key:m,ref:p!==void 0?p:null,props:x}}return Go.Fragment=h,Go.jsx=u,Go.jsxs=u,Go}var Ih;function jg(){return Ih||(Ih=1,du.exports=Ng()),du.exports}var s=jg(),hu={exports:{}},Vo={},pu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph;function Cg(){return Ph||(Ph=1,(function(r){function h(k,F){var Se=k.length;k.push(F);e:for(;0<Se;){var Ne=Se-1>>>1,Y=k[Ne];if(0<p(Y,F))k[Ne]=F,k[Se]=Y,Se=Ne;else break e}}function u(k){return k.length===0?null:k[0]}function c(k){if(k.length===0)return null;var F=k[0],Se=k.pop();if(Se!==F){k[0]=Se;e:for(var Ne=0,Y=k.length,y=Y>>>1;Ne<y;){var A=2*(Ne+1)-1,K=k[A],se=A+1,Oe=k[se];if(0>p(K,Se))se<Y&&0>p(Oe,K)?(k[Ne]=Oe,k[se]=Se,Ne=se):(k[Ne]=K,k[A]=Se,Ne=A);else if(se<Y&&0>p(Oe,Se))k[Ne]=Oe,k[se]=Se,Ne=se;else break e}}return F}function p(k,F){var Se=k.sortIndex-F.sortIndex;return Se!==0?Se:k.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var m=Date,d=m.now();r.unstable_now=function(){return m.now()-d}}var S=[],b=[],j=1,M=null,z=3,ye=!1,oe=!1,ie=!1,we=!1,fe=typeof setTimeout=="function"?setTimeout:null,Be=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;function W(k){for(var F=u(b);F!==null;){if(F.callback===null)c(b);else if(F.startTime<=k)c(b),F.sortIndex=F.expirationTime,h(S,F);else break;F=u(b)}}function Ee(k){if(ie=!1,W(k),!oe)if(u(S)!==null)oe=!0,_e||(_e=!0,le());else{var F=u(b);F!==null&&qe(Ee,F.startTime-k)}}var _e=!1,N=-1,J=5,C=-1;function w(){return we?!0:!(r.unstable_now()-C<J)}function _(){if(we=!1,_e){var k=r.unstable_now();C=k;var F=!0;try{e:{oe=!1,ie&&(ie=!1,Be(N),N=-1),ye=!0;var Se=z;try{t:{for(W(k),M=u(S);M!==null&&!(M.expirationTime>k&&w());){var Ne=M.callback;if(typeof Ne=="function"){M.callback=null,z=M.priorityLevel;var Y=Ne(M.expirationTime<=k);if(k=r.unstable_now(),typeof Y=="function"){M.callback=Y,W(k),F=!0;break t}M===u(S)&&c(S),W(k)}else c(S);M=u(S)}if(M!==null)F=!0;else{var y=u(b);y!==null&&qe(Ee,y.startTime-k),F=!1}}break e}finally{M=null,z=Se,ye=!1}F=void 0}}finally{F?le():_e=!1}}}var le;if(typeof De=="function")le=function(){De(_)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Le=be.port2;be.port1.onmessage=_,le=function(){Le.postMessage(null)}}else le=function(){fe(_,0)};function qe(k,F){N=fe(function(){k(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return z},r.unstable_next=function(k){switch(z){case 1:case 2:case 3:var F=3;break;default:F=z}var Se=z;z=F;try{return k()}finally{z=Se}},r.unstable_requestPaint=function(){we=!0},r.unstable_runWithPriority=function(k,F){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Se=z;z=k;try{return F()}finally{z=Se}},r.unstable_scheduleCallback=function(k,F,Se){var Ne=r.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ne+Se:Ne):Se=Ne,k){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Se+Y,k={id:j++,callback:F,priorityLevel:k,startTime:Se,expirationTime:Y,sortIndex:-1},Se>Ne?(k.sortIndex=Se,h(b,k),u(S)===null&&k===u(b)&&(ie?(Be(N),N=-1):ie=!0,qe(Ee,Se-Ne))):(k.sortIndex=Y,h(S,k),oe||ye||(oe=!0,_e||(_e=!0,le()))),k},r.unstable_shouldYield=w,r.unstable_wrapCallback=function(k){var F=z;return function(){var Se=z;z=F;try{return k.apply(this,arguments)}finally{z=Se}}}})(gu)),gu}var e0;function Tg(){return e0||(e0=1,pu.exports=Cg()),pu.exports}var mu={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function Eg(){if(t0)return ut;t0=1;var r=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),m=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),z=Symbol.iterator;function ye(y){return y===null||typeof y!="object"?null:(y=z&&y[z]||y["@@iterator"],typeof y=="function"?y:null)}var oe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,we={};function fe(y,A,K){this.props=y,this.context=A,this.refs=we,this.updater=K||oe}fe.prototype.isReactComponent={},fe.prototype.setState=function(y,A){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,A,"setState")},fe.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function Be(){}Be.prototype=fe.prototype;function De(y,A,K){this.props=y,this.context=A,this.refs=we,this.updater=K||oe}var W=De.prototype=new Be;W.constructor=De,ie(W,fe.prototype),W.isPureReactComponent=!0;var Ee=Array.isArray;function _e(){}var N={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function C(y,A,K){var se=K.ref;return{$$typeof:r,type:y,key:A,ref:se!==void 0?se:null,props:K}}function w(y,A){return C(y.type,A,y.props)}function _(y){return typeof y=="object"&&y!==null&&y.$$typeof===r}function le(y){var A={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(K){return A[K]})}var be=/\/+/g;function Le(y,A){return typeof y=="object"&&y!==null&&y.key!=null?le(""+y.key):A.toString(36)}function qe(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(_e,_e):(y.status="pending",y.then(function(A){y.status==="pending"&&(y.status="fulfilled",y.value=A)},function(A){y.status==="pending"&&(y.status="rejected",y.reason=A)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function k(y,A,K,se,Oe){var H=typeof y;(H==="undefined"||H==="boolean")&&(y=null);var Ve=!1;if(y===null)Ve=!0;else switch(H){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(y.$$typeof){case r:case h:Ve=!0;break;case j:return Ve=y._init,k(Ve(y._payload),A,K,se,Oe)}}if(Ve)return Oe=Oe(y),Ve=se===""?"."+Le(y,0):se,Ee(Oe)?(K="",Ve!=null&&(K=Ve.replace(be,"$&/")+"/"),k(Oe,A,K,"",function(rt){return rt})):Oe!=null&&(_(Oe)&&(Oe=w(Oe,K+(Oe.key==null||y&&y.key===Oe.key?"":(""+Oe.key).replace(be,"$&/")+"/")+Ve)),A.push(Oe)),1;Ve=0;var ot=se===""?".":se+":";if(Ee(y))for(var ze=0;ze<y.length;ze++)se=y[ze],H=ot+Le(se,ze),Ve+=k(se,A,K,H,Oe);else if(ze=ye(y),typeof ze=="function")for(y=ze.call(y),ze=0;!(se=y.next()).done;)se=se.value,H=ot+Le(se,ze++),Ve+=k(se,A,K,H,Oe);else if(H==="object"){if(typeof y.then=="function")return k(qe(y),A,K,se,Oe);throw A=String(y),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function F(y,A,K){if(y==null)return y;var se=[],Oe=0;return k(y,se,"","",function(H){return A.call(K,H,Oe++)}),se}function Se(y){if(y._status===-1){var A=y._result;A=A(),A.then(function(K){(y._status===0||y._status===-1)&&(y._status=1,y._result=K)},function(K){(y._status===0||y._status===-1)&&(y._status=2,y._result=K)}),y._status===-1&&(y._status=0,y._result=A)}if(y._status===1)return y._result.default;throw y._result}var Ne=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},Y={map:F,forEach:function(y,A,K){F(y,function(){A.apply(this,arguments)},K)},count:function(y){var A=0;return F(y,function(){A++}),A},toArray:function(y){return F(y,function(A){return A})||[]},only:function(y){if(!_(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return ut.Activity=M,ut.Children=Y,ut.Component=fe,ut.Fragment=u,ut.Profiler=p,ut.PureComponent=De,ut.StrictMode=c,ut.Suspense=S,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ut.__COMPILER_RUNTIME={__proto__:null,c:function(y){return N.H.useMemoCache(y)}},ut.cache=function(y){return function(){return y.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(y,A,K){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var se=ie({},y.props),Oe=y.key;if(A!=null)for(H in A.key!==void 0&&(Oe=""+A.key),A)!J.call(A,H)||H==="key"||H==="__self"||H==="__source"||H==="ref"&&A.ref===void 0||(se[H]=A[H]);var H=arguments.length-2;if(H===1)se.children=K;else if(1<H){for(var Ve=Array(H),ot=0;ot<H;ot++)Ve[ot]=arguments[ot+2];se.children=Ve}return C(y.type,Oe,se)},ut.createContext=function(y){return y={$$typeof:m,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:x,_context:y},y},ut.createElement=function(y,A,K){var se,Oe={},H=null;if(A!=null)for(se in A.key!==void 0&&(H=""+A.key),A)J.call(A,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Oe[se]=A[se]);var Ve=arguments.length-2;if(Ve===1)Oe.children=K;else if(1<Ve){for(var ot=Array(Ve),ze=0;ze<Ve;ze++)ot[ze]=arguments[ze+2];Oe.children=ot}if(y&&y.defaultProps)for(se in Ve=y.defaultProps,Ve)Oe[se]===void 0&&(Oe[se]=Ve[se]);return C(y,H,Oe)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(y){return{$$typeof:d,render:y}},ut.isValidElement=_,ut.lazy=function(y){return{$$typeof:j,_payload:{_status:-1,_result:y},_init:Se}},ut.memo=function(y,A){return{$$typeof:b,type:y,compare:A===void 0?null:A}},ut.startTransition=function(y){var A=N.T,K={};N.T=K;try{var se=y(),Oe=N.S;Oe!==null&&Oe(K,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(_e,Ne)}catch(H){Ne(H)}finally{A!==null&&K.types!==null&&(A.types=K.types),N.T=A}},ut.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ut.use=function(y){return N.H.use(y)},ut.useActionState=function(y,A,K){return N.H.useActionState(y,A,K)},ut.useCallback=function(y,A){return N.H.useCallback(y,A)},ut.useContext=function(y){return N.H.useContext(y)},ut.useDebugValue=function(){},ut.useDeferredValue=function(y,A){return N.H.useDeferredValue(y,A)},ut.useEffect=function(y,A){return N.H.useEffect(y,A)},ut.useEffectEvent=function(y){return N.H.useEffectEvent(y)},ut.useId=function(){return N.H.useId()},ut.useImperativeHandle=function(y,A,K){return N.H.useImperativeHandle(y,A,K)},ut.useInsertionEffect=function(y,A){return N.H.useInsertionEffect(y,A)},ut.useLayoutEffect=function(y,A){return N.H.useLayoutEffect(y,A)},ut.useMemo=function(y,A){return N.H.useMemo(y,A)},ut.useOptimistic=function(y,A){return N.H.useOptimistic(y,A)},ut.useReducer=function(y,A,K){return N.H.useReducer(y,A,K)},ut.useRef=function(y){return N.H.useRef(y)},ut.useState=function(y){return N.H.useState(y)},ut.useSyncExternalStore=function(y,A,K){return N.H.useSyncExternalStore(y,A,K)},ut.useTransition=function(){return N.H.useTransition()},ut.version="19.2.4",ut}var n0;function Eu(){return n0||(n0=1,mu.exports=Eg()),mu.exports}var xu={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function Ag(){if(l0)return Vn;l0=1;var r=Eu();function h(S){var b="https://react.dev/errors/"+S;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)b+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+S+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var c={d:{f:u,r:function(){throw Error(h(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},p=Symbol.for("react.portal");function x(S,b,j){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:M==null?null:""+M,children:S,containerInfo:b,implementation:j}}var m=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(S,b){if(S==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Vn.createPortal=function(S,b){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(h(299));return x(S,b,null,j)},Vn.flushSync=function(S){var b=m.T,j=c.p;try{if(m.T=null,c.p=2,S)return S()}finally{m.T=b,c.p=j,c.d.f()}},Vn.preconnect=function(S,b){typeof S=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,c.d.C(S,b))},Vn.prefetchDNS=function(S){typeof S=="string"&&c.d.D(S)},Vn.preinit=function(S,b){if(typeof S=="string"&&b&&typeof b.as=="string"){var j=b.as,M=d(j,b.crossOrigin),z=typeof b.integrity=="string"?b.integrity:void 0,ye=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;j==="style"?c.d.S(S,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:M,integrity:z,fetchPriority:ye}):j==="script"&&c.d.X(S,{crossOrigin:M,integrity:z,fetchPriority:ye,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Vn.preinitModule=function(S,b){if(typeof S=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var j=d(b.as,b.crossOrigin);c.d.M(S,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&c.d.M(S)},Vn.preload=function(S,b){if(typeof S=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var j=b.as,M=d(j,b.crossOrigin);c.d.L(S,j,{crossOrigin:M,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Vn.preloadModule=function(S,b){if(typeof S=="string")if(b){var j=d(b.as,b.crossOrigin);c.d.m(S,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else c.d.m(S)},Vn.requestFormReset=function(S){c.d.r(S)},Vn.unstable_batchedUpdates=function(S,b){return S(b)},Vn.useFormState=function(S,b,j){return m.H.useFormState(S,b,j)},Vn.useFormStatus=function(){return m.H.useHostTransitionStatus()},Vn.version="19.2.4",Vn}var a0;function O0(){if(a0)return xu.exports;a0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(h){console.error(h)}}return r(),xu.exports=Ag(),xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function Mg(){if(s0)return Vo;s0=1;var r=Tg(),h=Eu(),u=O0();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function S(e){if(x(e)!==e)throw Error(c(188))}function b(e){var t=e.alternate;if(!t){if(t=x(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,l=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(l=a.return,l!==null){n=l;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return S(a),e;if(o===l)return S(a),t;o=o.sibling}throw Error(c(188))}if(n.return!==l.return)n=a,l=o;else{for(var i=!1,g=a.child;g;){if(g===n){i=!0,n=a,l=o;break}if(g===l){i=!0,l=a,n=o;break}g=g.sibling}if(!i){for(g=o.child;g;){if(g===n){i=!0,n=o,l=a;break}if(g===l){i=!0,l=o,n=a;break}g=g.sibling}if(!i)throw Error(c(189))}}if(n.alternate!==l)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var M=Object.assign,z=Symbol.for("react.element"),ye=Symbol.for("react.transitional.element"),oe=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Be=Symbol.for("react.consumer"),De=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),w=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function le(e){return e===null||typeof e!="object"?null:(e=_&&e[_]||e["@@iterator"],typeof e=="function"?e:null)}var be=Symbol.for("react.client.reference");function Le(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case fe:return"Profiler";case we:return"StrictMode";case Ee:return"Suspense";case _e:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case oe:return"Portal";case De:return e.displayName||"Context";case Be:return(e._context.displayName||"Context")+".Consumer";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return t=e.displayName||null,t!==null?t:Le(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return Le(e(t))}catch{}}return null}var qe=Array.isArray,k=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ne=[],Y=-1;function y(e){return{current:e}}function A(e){0>Y||(e.current=Ne[Y],Ne[Y]=null,Y--)}function K(e,t){Y++,Ne[Y]=e.current,e.current=t}var se=y(null),Oe=y(null),H=y(null),Ve=y(null);function ot(e,t){switch(K(H,t),K(Oe,e),K(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=vh(t),e=wh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(se),K(se,e)}function ze(){A(se),A(Oe),A(H)}function rt(e){e.memoizedState!==null&&K(Ve,e);var t=se.current,n=wh(t,e.type);t!==n&&(K(Oe,e),K(se,n))}function He(e){Oe.current===e&&(A(se),A(Oe)),Ve.current===e&&(A(Ve),qo._currentValue=Se)}var Ye,Fe;function at(e){if(Ye===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Fe=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+e+Fe}var Xt=!1;function kt(e,t){if(!e||Xt)return"";Xt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ae){var te=ae}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(ae){te=ae}e.call(xe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),i=o[0],g=o[1];if(i&&g){var E=i.split(`
`),P=g.split(`
`);for(a=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;a<P.length&&!P[a].includes("DetermineComponentFrameRoot");)a++;if(l===E.length||a===P.length)for(l=E.length-1,a=P.length-1;1<=l&&0<=a&&E[l]!==P[a];)a--;for(;1<=l&&0<=a;l--,a--)if(E[l]!==P[a]){if(l!==1||a!==1)do if(l--,a--,0>a||E[l]!==P[a]){var ue=`
`+E[l].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=l&&0<=a);break}}}finally{Xt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function zt(e,t){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return e.child!==t&&t!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return kt(e.type,!1);case 11:return kt(e.type.render,!1);case 1:return kt(e.type,!0);case 31:return at("Activity");default:return""}}function Pe(e){try{var t="",n=null;do t+=zt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var sn=Object.prototype.hasOwnProperty,Rt=r.unstable_scheduleCallback,Lt=r.unstable_cancelCallback,dt=r.unstable_shouldYield,ln=r.unstable_requestPaint,Dt=r.unstable_now,Mn=r.unstable_getCurrentPriorityLevel,Zn=r.unstable_ImmediatePriority,gn=r.unstable_UserBlockingPriority,yt=r.unstable_NormalPriority,kn=r.unstable_LowPriority,In=r.unstable_IdlePriority,Sn=r.log,Nn=r.unstable_setDisableYieldValue,Pt=null,Ht=null;function bt(e){if(typeof Sn=="function"&&Nn(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Pt,e)}catch{}}var Ut=Math.clz32?Math.clz32:mn,fn=Math.log,Ot=Math.LN2;function mn(e){return e>>>=0,e===0?32:31-(fn(e)/Ot|0)|0}var jn=256,Ln=262144,On=4194304;function Cn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var g=l&134217727;return g!==0?(l=g&~o,l!==0?a=Cn(l):(i&=g,i!==0?a=Cn(i):n||(n=g&~e,n!==0&&(a=Cn(n))))):(g=l&~o,g!==0?a=Cn(g):i!==0?a=Cn(i):n||(n=l&~e,n!==0&&(a=Cn(n)))),a===0?0:t!==0&&t!==a&&(t&o)===0&&(o=a&-a,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:a}function qn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ml(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Je(){var e=On;return On<<=1,(On&62914560)===0&&(On=4194304),e}function Tn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xl(e,t,n,l,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var g=e.entanglements,E=e.expirationTimes,P=e.hiddenUpdates;for(n=i&~n;0<n;){var ue=31-Ut(n),xe=1<<ue;g[ue]=0,E[ue]=-1;var te=P[ue];if(te!==null)for(P[ue]=null,ue=0;ue<te.length;ue++){var ae=te[ue];ae!==null&&(ae.lane&=-536870913)}n&=~xe}l!==0&&yl(e,l,0),o!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function yl(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ut(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function zl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Ut(n),a=1<<l;a&t|e[l]&t&&(e[l]|=t),n&=~a}}function xn(e,t){var n=t&-t;return n=(n&42)!==0?1:Xn(n),(n&(e.suspendedLanes|t))!==0?0:n}function Xn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function on(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:Gh(e.type))}function Ul(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}var Jn=Math.random().toString(36).slice(2),Z="__reactFiber$"+Jn,Ue="__reactProps$"+Jn,Ie="__reactContainer$"+Jn,Jt="__reactEvents$"+Jn,Kl="__reactListeners$"+Jn,ql="__reactHandles$"+Jn,bl="__reactResources$"+Jn,il="__reactMarker$"+Jn;function L(e){delete e[Z],delete e[Ue],delete e[Jt],delete e[Kl],delete e[ql]}function ne(e){var t=e[Z];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Z]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ah(e);e!==null;){if(n=e[Z])return n;e=Ah(e)}return t}e=n,n=e.parentNode}return null}function re(e){if(e=e[Z]||e[Ie]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function he(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function ee(e){var t=e[bl];return t||(t=e[bl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function de(e){e[il]=!0}var me=new Set,je={};function Qe(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(je[e]=t,e=0;e<t.length;e++)me.add(t[e])}var vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wt={},St={};function gt(e){return sn.call(St,e)?!0:sn.call(wt,e)?!1:vt.test(e)?St[e]=!0:(wt[e]=!0,!1)}function it(e,t,n){if(gt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function mt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ft(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function ke(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function et(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ct(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var a=l.get,o=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tt(e){if(!e._valueTracker){var t=et(e)?"checked":"value";e._valueTracker=Ct(e,t,""+e[t])}}function Vt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=et(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function zn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vl=/[\n"\\]/g;function Yt(e){return e.replace(vl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Rn(e,t,n,l,a,o,i,g){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ke(t)):e.value!==""+ke(t)&&(e.value=""+ke(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Yl(e,i,ke(t)):n!=null?Yl(e,i,ke(n)):l!=null&&e.removeAttribute("value"),a==null&&o!=null&&(e.defaultChecked=!!o),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+ke(g):e.removeAttribute("name")}function el(e,t,n,l,a,o,i,g){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Tt(e);return}n=n!=null?""+ke(n):"",t=t!=null?""+ke(t):n,g||t===e.value||(e.value=t),e.defaultValue=t}l=l??a,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=g?e.checked:!!l,e.defaultChecked=!!l,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i),Tt(e)}function Yl(e,t,n){t==="number"&&zn(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Xl(e,t,n,l){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&l&&(e[n].defaultSelected=!0)}else{for(n=""+ke(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,l&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ua(e,t,n){if(t!=null&&(t=""+ke(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ke(n):""}function eo(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(c(92));if(qe(l)){if(1<l.length)throw Error(c(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=ke(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Tt(e)}function En(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var di=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||di.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Io(e,t,n){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var a in t)l=t[a],t.hasOwnProperty(a)&&n[a]!==l&&Fo(e,a,l)}else for(var o in t)t.hasOwnProperty(o)&&Fo(e,o,t[o])}function cs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Po=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function us(e){return hi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wl(){}var to=null;function no(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rl=null,ha=null;function er(e){var t=re(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(Rn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var a=l[Ue]||null;if(!a)throw Error(c(90));Rn(l,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Vt(l)}break e;case"textarea":Ua(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Xl(e,!!n.multiple,t,!1)}}}var fs=!1;function tr(e,t,n){if(fs)return e(t,n);fs=!0;try{var l=e(t);return l}finally{if(fs=!1,(Rl!==null||ha!==null)&&(qr(),Rl&&(t=Rl,e=ha,ha=Rl=null,er(t),e)))for(t=0;t<e.length;t++)er(e[t])}}function qa(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Ue]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(Dl)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{lo=!1}var Ol=null,ao=null,ds=null;function nr(){if(ds)return ds;var e,t=ao,n=t.length,l,a="value"in Ol?Ol.value:Ol.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(l=1;l<=i&&t[n-l]===a[o-l];l++);return ds=a.slice(e,1<l?1-l:void 0)}function hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ps(){return!0}function lr(){return!1}function $n(e){function t(n,l,a,o,i){this._reactName=n,this._targetInst=a,this.type=l,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ps:lr,this.isPropagationStopped=lr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),t}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=$n(Jl),Xa=M({},Jl,{view:0,detail:0}),pi=$n(Xa),so,oo,$a,ms=M({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$a&&($a&&e.type==="mousemove"?(so=e.screenX-$a.screenX,oo=e.screenY-$a.screenY):oo=so=0,$a=e),so)},movementY:function(e){return"movementY"in e?e.movementY:oo}}),ar=$n(ms),gi=M({},ms,{dataTransfer:0}),mi=$n(gi),f=M({},Xa,{relatedTarget:0}),v=$n(f),T=M({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),B=$n(T),U=M({},Jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),V=$n(U),O=M({},Jl,{data:0}),X=$n(O),D={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ce(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$[e])?!!t[e]:!1}function Ae(){return Ce}var ce=M({},Xa,{key:function(e){if(e.key){var t=D[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(e){return e.type==="keypress"?hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xe=$n(ce),Ge=M({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ze=$n(Ge),ve=M({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),Te=$n(ve),ge=M({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Me=$n(ge),Re=M({},ms,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=$n(Re),lt=M({},Jl,{newState:0,oldState:0}),ft=$n(lt),xt=[9,13,27,32],rn=Dl&&"CompositionEvent"in window,dn=null;Dl&&"documentMode"in document&&(dn=document.documentMode);var an=Dl&&"TextEvent"in window&&!dn,tl=Dl&&(!rn||dn&&8<dn&&11>=dn),Gn=" ",nl=!1;function Wn(e,t){switch(e){case"keyup":return xt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $l=!1;function xi(e,t){switch(e){case"compositionend":return xs(t);case"keypress":return t.which!==32?null:(nl=!0,Gn);case"textInput":return e=t.data,e===Gn&&nl?null:e;default:return null}}function ro(e,t){if($l)return e==="compositionend"||!rn&&Wn(e,t)?(e=nr(),ds=ao=Ol=null,$l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tl&&t.locale!=="ko"?null:t.data;default:return null}}var io={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ys(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!io[e.type]:t==="textarea"}function bs(e,t,n,l){Rl?ha?ha.push(l):ha=[l]:Rl=l,t=Zr(t,"onChange"),0<t.length&&(n=new gs("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Wl=null,Fl=null;function K0(e){ph(e,0)}function sr(e){var t=he(e);if(Vt(t))return e}function zu(e,t){if(e==="change")return t}var Ru=!1;if(Dl){var yi;if(Dl){var bi="oninput"in document;if(!bi){var Du=document.createElement("div");Du.setAttribute("oninput","return;"),bi=typeof Du.oninput=="function"}yi=bi}else yi=!1;Ru=yi&&(!document.documentMode||9<document.documentMode)}function Ou(){Wl&&(Wl.detachEvent("onpropertychange",_u),Fl=Wl=null)}function _u(e){if(e.propertyName==="value"&&sr(Fl)){var t=[];bs(t,Fl,e,no(e)),tr(K0,t)}}function J0(e,t,n){e==="focusin"?(Ou(),Wl=t,Fl=n,Wl.attachEvent("onpropertychange",_u)):e==="focusout"&&Ou()}function W0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sr(Fl)}function F0(e,t){if(e==="click")return sr(t)}function I0(e,t){if(e==="input"||e==="change")return sr(t)}function P0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cl=typeof Object.is=="function"?Object.is:P0;function co(e,t){if(cl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var a=n[l];if(!sn.call(t,a)||!cl(e[a],t[a]))return!1}return!0}function Bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hu(e,t){var n=Bu(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bu(n)}}function Uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=zn(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zn(e.document)}return t}function vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ep=Dl&&"documentMode"in document&&11>=document.documentMode,vs=null,wi=null,uo=null,Si=!1;function Yu(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Si||vs==null||vs!==zn(l)||(l=vs,"selectionStart"in l&&vi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),uo&&co(uo,l)||(uo=l,l=Zr(wi,"onSelect"),0<l.length&&(t=new gs("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=vs)))}function Ga(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ws={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Ni={},Xu={};Dl&&(Xu=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function Va(e){if(Ni[e])return Ni[e];if(!ws[e])return e;var t=ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Xu)return Ni[e]=t[n];return e}var $u=Va("animationend"),Gu=Va("animationiteration"),Vu=Va("animationstart"),tp=Va("transitionrun"),np=Va("transitionstart"),lp=Va("transitioncancel"),Qu=Va("transitionend"),Zu=new Map,ji="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ji.push("scrollEnd");function _l(e,t){Zu.set(e,t),Qe(t,[e])}var or=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Sl=[],Ss=0,Ci=0;function rr(){for(var e=Ss,t=Ci=Ss=0;t<e;){var n=Sl[t];Sl[t++]=null;var l=Sl[t];Sl[t++]=null;var a=Sl[t];Sl[t++]=null;var o=Sl[t];if(Sl[t++]=null,l!==null&&a!==null){var i=l.pending;i===null?a.next=a:(a.next=i.next,i.next=a),l.pending=a}o!==0&&Ku(n,a,o)}}function ir(e,t,n,l){Sl[Ss++]=e,Sl[Ss++]=t,Sl[Ss++]=n,Sl[Ss++]=l,Ci|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ti(e,t,n,l){return ir(e,t,n,l),cr(e)}function Qa(e,t){return ir(e,null,null,t),cr(e)}function Ku(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var a=!1,o=e.return;o!==null;)o.childLanes|=n,l=o.alternate,l!==null&&(l.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(a=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,a&&t!==null&&(a=31-Ut(n),e=o.hiddenUpdates,l=e[a],l===null?e[a]=[t]:l.push(t),t.lane=n|536870912),o):null}function cr(e){if(50<Ro)throw Ro=0,Oc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ns={};function ap(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ul(e,t,n,l){return new ap(e,t,n,l)}function Ei(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Il(e,t){var n=e.alternate;return n===null?(n=ul(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ju(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ur(e,t,n,l,a,o){var i=0;if(l=e,typeof e=="function")Ei(e)&&(i=1);else if(typeof e=="string")i=cg(e,n,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=ul(31,n,t,a),e.elementType=C,e.lanes=o,e;case ie:return Za(n.children,a,o,t);case we:i=8,a|=24;break;case fe:return e=ul(12,n,t,a|2),e.elementType=fe,e.lanes=o,e;case Ee:return e=ul(13,n,t,a),e.elementType=Ee,e.lanes=o,e;case _e:return e=ul(19,n,t,a),e.elementType=_e,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case De:i=10;break e;case Be:i=9;break e;case W:i=11;break e;case N:i=14;break e;case J:i=16,l=null;break e}i=29,n=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=ul(i,n,t,a),t.elementType=e,t.type=l,t.lanes=o,t}function Za(e,t,n,l){return e=ul(7,e,l,t),e.lanes=n,e}function Ai(e,t,n){return e=ul(6,e,null,t),e.lanes=n,e}function Wu(e){var t=ul(18,null,null,0);return t.stateNode=e,t}function Mi(e,t,n){return t=ul(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fu=new WeakMap;function Nl(e,t){if(typeof e=="object"&&e!==null){var n=Fu.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Pe(t)},Fu.set(e,t),t)}return{value:e,source:t,stack:Pe(t)}}var js=[],Cs=0,fr=null,fo=0,jl=[],Cl=0,pa=null,Gl=1,Vl="";function Pl(e,t){js[Cs++]=fo,js[Cs++]=fr,fr=e,fo=t}function Iu(e,t,n){jl[Cl++]=Gl,jl[Cl++]=Vl,jl[Cl++]=pa,pa=e;var l=Gl;e=Vl;var a=32-Ut(l)-1;l&=~(1<<a),n+=1;var o=32-Ut(t)+a;if(30<o){var i=a-a%5;o=(l&(1<<i)-1).toString(32),l>>=i,a-=i,Gl=1<<32-Ut(t)+a|n<<a|l,Vl=o+e}else Gl=1<<o|n<<a|l,Vl=e}function ki(e){e.return!==null&&(Pl(e,1),Iu(e,1,0))}function Li(e){for(;e===fr;)fr=js[--Cs],js[Cs]=null,fo=js[--Cs],js[Cs]=null;for(;e===pa;)pa=jl[--Cl],jl[Cl]=null,Vl=jl[--Cl],jl[Cl]=null,Gl=jl[--Cl],jl[Cl]=null}function Pu(e,t){jl[Cl++]=Gl,jl[Cl++]=Vl,jl[Cl++]=pa,Gl=t.id,Vl=t.overflow,pa=e}var _n=null,en=null,Mt=!1,ga=null,Tl=!1,zi=Error(c(519));function ma(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ho(Nl(t,e)),zi}function ef(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Z]=e,t[Ue]=l,n){case"dialog":jt("cancel",t),jt("close",t);break;case"iframe":case"object":case"embed":jt("load",t);break;case"video":case"audio":for(n=0;n<Oo.length;n++)jt(Oo[n],t);break;case"source":jt("error",t);break;case"img":case"image":case"link":jt("error",t),jt("load",t);break;case"details":jt("toggle",t);break;case"input":jt("invalid",t),el(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":jt("invalid",t);break;case"textarea":jt("invalid",t),eo(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||yh(t.textContent,n)?(l.popover!=null&&(jt("beforetoggle",t),jt("toggle",t)),l.onScroll!=null&&jt("scroll",t),l.onScrollEnd!=null&&jt("scrollend",t),l.onClick!=null&&(t.onclick=wl),t=!0):t=!1,t||ma(e,!0)}function tf(e){for(_n=e.return;_n;)switch(_n.tag){case 5:case 31:case 13:Tl=!1;return;case 27:case 3:Tl=!0;return;default:_n=_n.return}}function Ts(e){if(e!==_n)return!1;if(!Mt)return tf(e),Mt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Wc(e.type,e.memoizedProps)),n=!n),n&&en&&ma(e),tf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));en=Eh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));en=Eh(e)}else t===27?(t=en,ka(e.type)?(e=tu,tu=null,en=e):en=t):en=_n?Al(e.stateNode.nextSibling):null;return!0}function Ka(){en=_n=null,Mt=!1}function Ri(){var e=ga;return e!==null&&(ol===null?ol=e:ol.push.apply(ol,e),ga=null),e}function ho(e){ga===null?ga=[e]:ga.push(e)}var Di=y(null),Ja=null,ea=null;function xa(e,t,n){K(Di,t._currentValue),t._currentValue=n}function ta(e){e._currentValue=Di.current,A(Di)}function Oi(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function _i(e,t,n,l){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var i=a.child;o=o.firstContext;e:for(;o!==null;){var g=o;o=a;for(var E=0;E<t.length;E++)if(g.context===t[E]){o.lanes|=n,g=o.alternate,g!==null&&(g.lanes|=n),Oi(o.return,n,e),l||(i=null);break e}o=g.next}}else if(a.tag===18){if(i=a.return,i===null)throw Error(c(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Oi(i,n,e),i=null}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}}function Es(e,t,n,l){e=null;for(var a=t,o=!1;a!==null;){if(!o){if((a.flags&524288)!==0)o=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var i=a.alternate;if(i===null)throw Error(c(387));if(i=i.memoizedProps,i!==null){var g=a.type;cl(a.pendingProps.value,i.value)||(e!==null?e.push(g):e=[g])}}else if(a===Ve.current){if(i=a.alternate,i===null)throw Error(c(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(qo):e=[qo])}a=a.return}e!==null&&_i(t,e,n,l),t.flags|=262144}function dr(e){for(e=e.firstContext;e!==null;){if(!cl(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Wa(e){Ja=e,ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bn(e){return nf(Ja,e)}function hr(e,t){return Ja===null&&Wa(e),nf(e,t)}function nf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ea===null){if(e===null)throw Error(c(308));ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ea=ea.next=t;return n}var sp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},op=r.unstable_scheduleCallback,rp=r.unstable_NormalPriority,yn={$$typeof:De,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bi(){return{controller:new sp,data:new Map,refCount:0}}function po(e){e.refCount--,e.refCount===0&&op(rp,function(){e.controller.abort()})}var go=null,Hi=0,As=0,Ms=null;function ip(e,t){if(go===null){var n=go=[];Hi=0,As=Yc(),Ms={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Hi++,t.then(lf,lf),t}function lf(){if(--Hi===0&&go!==null){Ms!==null&&(Ms.status="fulfilled");var e=go;go=null,As=0,Ms=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function cp(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(l.status="rejected",l.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),l}var af=k.S;k.S=function(e,t){Xd=Dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ip(e,t),af!==null&&af(e,t)};var Fa=y(null);function Ui(){var e=Fa.current;return e!==null?e:Wt.pooledCache}function pr(e,t){t===null?K(Fa,Fa.current):K(Fa,t.pool)}function sf(){var e=Ui();return e===null?null:{parent:yn._currentValue,pool:e}}var ks=Error(c(460)),qi=Error(c(474)),gr=Error(c(542)),mr={then:function(){}};function of(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(wl,wl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uf(e),e;default:if(typeof t.status=="string")t.then(wl,wl);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=l}},function(l){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uf(e),e}throw Pa=t,ks}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Pa=n,ks):n}}var Pa=null;function cf(){if(Pa===null)throw Error(c(459));var e=Pa;return Pa=null,e}function uf(e){if(e===ks||e===gr)throw Error(c(483))}var Ls=null,mo=0;function xr(e){var t=mo;return mo+=1,Ls===null&&(Ls=[]),rf(Ls,e,t)}function xo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yr(e,t){throw t.$$typeof===z?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ff(e){function t(G,R){if(e){var I=G.deletions;I===null?(G.deletions=[R],G.flags|=16):I.push(R)}}function n(G,R){if(!e)return null;for(;R!==null;)t(G,R),R=R.sibling;return null}function l(G){for(var R=new Map;G!==null;)G.key!==null?R.set(G.key,G):R.set(G.index,G),G=G.sibling;return R}function a(G,R){return G=Il(G,R),G.index=0,G.sibling=null,G}function o(G,R,I){return G.index=I,e?(I=G.alternate,I!==null?(I=I.index,I<R?(G.flags|=67108866,R):I):(G.flags|=67108866,R)):(G.flags|=1048576,R)}function i(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function g(G,R,I,pe){return R===null||R.tag!==6?(R=Ai(I,G.mode,pe),R.return=G,R):(R=a(R,I),R.return=G,R)}function E(G,R,I,pe){var We=I.type;return We===ie?ue(G,R,I.props.children,pe,I.key):R!==null&&(R.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===J&&Ia(We)===R.type)?(R=a(R,I.props),xo(R,I),R.return=G,R):(R=ur(I.type,I.key,I.props,null,G.mode,pe),xo(R,I),R.return=G,R)}function P(G,R,I,pe){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Mi(I,G.mode,pe),R.return=G,R):(R=a(R,I.children||[]),R.return=G,R)}function ue(G,R,I,pe,We){return R===null||R.tag!==7?(R=Za(I,G.mode,pe,We),R.return=G,R):(R=a(R,I),R.return=G,R)}function xe(G,R,I){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Ai(""+R,G.mode,I),R.return=G,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ye:return I=ur(R.type,R.key,R.props,null,G.mode,I),xo(I,R),I.return=G,I;case oe:return R=Mi(R,G.mode,I),R.return=G,R;case J:return R=Ia(R),xe(G,R,I)}if(qe(R)||le(R))return R=Za(R,G.mode,I,null),R.return=G,R;if(typeof R.then=="function")return xe(G,xr(R),I);if(R.$$typeof===De)return xe(G,hr(G,R),I);yr(G,R)}return null}function te(G,R,I,pe){var We=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return We!==null?null:g(G,R,""+I,pe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ye:return I.key===We?E(G,R,I,pe):null;case oe:return I.key===We?P(G,R,I,pe):null;case J:return I=Ia(I),te(G,R,I,pe)}if(qe(I)||le(I))return We!==null?null:ue(G,R,I,pe,null);if(typeof I.then=="function")return te(G,R,xr(I),pe);if(I.$$typeof===De)return te(G,R,hr(G,I),pe);yr(G,I)}return null}function ae(G,R,I,pe,We){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return G=G.get(I)||null,g(R,G,""+pe,We);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ye:return G=G.get(pe.key===null?I:pe.key)||null,E(R,G,pe,We);case oe:return G=G.get(pe.key===null?I:pe.key)||null,P(R,G,pe,We);case J:return pe=Ia(pe),ae(G,R,I,pe,We)}if(qe(pe)||le(pe))return G=G.get(I)||null,ue(R,G,pe,We,null);if(typeof pe.then=="function")return ae(G,R,I,xr(pe),We);if(pe.$$typeof===De)return ae(G,R,I,hr(R,pe),We);yr(R,pe)}return null}function $e(G,R,I,pe){for(var We=null,_t=null,Ke=R,pt=R=0,At=null;Ke!==null&&pt<I.length;pt++){Ke.index>pt?(At=Ke,Ke=null):At=Ke.sibling;var Bt=te(G,Ke,I[pt],pe);if(Bt===null){Ke===null&&(Ke=At);break}e&&Ke&&Bt.alternate===null&&t(G,Ke),R=o(Bt,R,pt),_t===null?We=Bt:_t.sibling=Bt,_t=Bt,Ke=At}if(pt===I.length)return n(G,Ke),Mt&&Pl(G,pt),We;if(Ke===null){for(;pt<I.length;pt++)Ke=xe(G,I[pt],pe),Ke!==null&&(R=o(Ke,R,pt),_t===null?We=Ke:_t.sibling=Ke,_t=Ke);return Mt&&Pl(G,pt),We}for(Ke=l(Ke);pt<I.length;pt++)At=ae(Ke,G,pt,I[pt],pe),At!==null&&(e&&At.alternate!==null&&Ke.delete(At.key===null?pt:At.key),R=o(At,R,pt),_t===null?We=At:_t.sibling=At,_t=At);return e&&Ke.forEach(function(Oa){return t(G,Oa)}),Mt&&Pl(G,pt),We}function tt(G,R,I,pe){if(I==null)throw Error(c(151));for(var We=null,_t=null,Ke=R,pt=R=0,At=null,Bt=I.next();Ke!==null&&!Bt.done;pt++,Bt=I.next()){Ke.index>pt?(At=Ke,Ke=null):At=Ke.sibling;var Oa=te(G,Ke,Bt.value,pe);if(Oa===null){Ke===null&&(Ke=At);break}e&&Ke&&Oa.alternate===null&&t(G,Ke),R=o(Oa,R,pt),_t===null?We=Oa:_t.sibling=Oa,_t=Oa,Ke=At}if(Bt.done)return n(G,Ke),Mt&&Pl(G,pt),We;if(Ke===null){for(;!Bt.done;pt++,Bt=I.next())Bt=xe(G,Bt.value,pe),Bt!==null&&(R=o(Bt,R,pt),_t===null?We=Bt:_t.sibling=Bt,_t=Bt);return Mt&&Pl(G,pt),We}for(Ke=l(Ke);!Bt.done;pt++,Bt=I.next())Bt=ae(Ke,G,pt,Bt.value,pe),Bt!==null&&(e&&Bt.alternate!==null&&Ke.delete(Bt.key===null?pt:Bt.key),R=o(Bt,R,pt),_t===null?We=Bt:_t.sibling=Bt,_t=Bt);return e&&Ke.forEach(function(vg){return t(G,vg)}),Mt&&Pl(G,pt),We}function Kt(G,R,I,pe){if(typeof I=="object"&&I!==null&&I.type===ie&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ye:e:{for(var We=I.key;R!==null;){if(R.key===We){if(We=I.type,We===ie){if(R.tag===7){n(G,R.sibling),pe=a(R,I.props.children),pe.return=G,G=pe;break e}}else if(R.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===J&&Ia(We)===R.type){n(G,R.sibling),pe=a(R,I.props),xo(pe,I),pe.return=G,G=pe;break e}n(G,R);break}else t(G,R);R=R.sibling}I.type===ie?(pe=Za(I.props.children,G.mode,pe,I.key),pe.return=G,G=pe):(pe=ur(I.type,I.key,I.props,null,G.mode,pe),xo(pe,I),pe.return=G,G=pe)}return i(G);case oe:e:{for(We=I.key;R!==null;){if(R.key===We)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){n(G,R.sibling),pe=a(R,I.children||[]),pe.return=G,G=pe;break e}else{n(G,R);break}else t(G,R);R=R.sibling}pe=Mi(I,G.mode,pe),pe.return=G,G=pe}return i(G);case J:return I=Ia(I),Kt(G,R,I,pe)}if(qe(I))return $e(G,R,I,pe);if(le(I)){if(We=le(I),typeof We!="function")throw Error(c(150));return I=We.call(I),tt(G,R,I,pe)}if(typeof I.then=="function")return Kt(G,R,xr(I),pe);if(I.$$typeof===De)return Kt(G,R,hr(G,I),pe);yr(G,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,R!==null&&R.tag===6?(n(G,R.sibling),pe=a(R,I),pe.return=G,G=pe):(n(G,R),pe=Ai(I,G.mode,pe),pe.return=G,G=pe),i(G)):n(G,R)}return function(G,R,I,pe){try{mo=0;var We=Kt(G,R,I,pe);return Ls=null,We}catch(Ke){if(Ke===ks||Ke===gr)throw Ke;var _t=ul(29,Ke,null,G.mode);return _t.lanes=pe,_t.return=G,_t}finally{}}}var es=ff(!0),df=ff(!1),ya=!1;function Yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function va(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(qt&2)!==0){var a=l.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),l.pending=t,t=cr(e),Ku(e,null,n),t}return ir(e,l,t,n),cr(e)}function yo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,zl(e,n)}}function $i(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:l.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Gi=!1;function bo(){if(Gi){var e=Ms;if(e!==null)throw e}}function vo(e,t,n,l){Gi=!1;var a=e.updateQueue;ya=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var E=g,P=E.next;E.next=null,i===null?o=P:i.next=P,i=E;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,g=ue.lastBaseUpdate,g!==i&&(g===null?ue.firstBaseUpdate=P:g.next=P,ue.lastBaseUpdate=E))}if(o!==null){var xe=a.baseState;i=0,ue=P=E=null,g=o;do{var te=g.lane&-536870913,ae=te!==g.lane;if(ae?(Et&te)===te:(l&te)===te){te!==0&&te===As&&(Gi=!0),ue!==null&&(ue=ue.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var $e=e,tt=g;te=t;var Kt=n;switch(tt.tag){case 1:if($e=tt.payload,typeof $e=="function"){xe=$e.call(Kt,xe,te);break e}xe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=tt.payload,te=typeof $e=="function"?$e.call(Kt,xe,te):$e,te==null)break e;xe=M({},xe,te);break e;case 2:ya=!0}}te=g.callback,te!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=a.callbacks,ae===null?a.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:g.tag,payload:g.payload,callback:g.callback,next:null},ue===null?(P=ue=ae,E=xe):ue=ue.next=ae,i|=te;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;ae=g,g=ae.next,ae.next=null,a.lastBaseUpdate=ae,a.shared.pending=null}}while(!0);ue===null&&(E=xe),a.baseState=E,a.firstBaseUpdate=P,a.lastBaseUpdate=ue,o===null&&(a.shared.lanes=0),Ca|=i,e.lanes=i,e.memoizedState=xe}}function hf(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function pf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hf(n[e],t)}var zs=y(null),br=y(0);function gf(e,t){e=ua,K(br,e),K(zs,t),ua=e|t.baseLanes}function Vi(){K(br,ua),K(zs,zs.current)}function Qi(){ua=br.current,A(zs),A(br)}var fl=y(null),El=null;function wa(e){var t=e.alternate;K(hn,hn.current&1),K(fl,e),El===null&&(t===null||zs.current!==null||t.memoizedState!==null)&&(El=e)}function Zi(e){K(hn,hn.current),K(fl,e),El===null&&(El=e)}function mf(e){e.tag===22?(K(hn,hn.current),K(fl,e),El===null&&(El=e)):Sa()}function Sa(){K(hn,hn.current),K(fl,fl.current)}function dl(e){A(fl),El===e&&(El=null),A(hn)}var hn=y(0);function vr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Pc(n)||eu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=0,ht=null,Qt=null,bn=null,wr=!1,Rs=!1,ts=!1,Sr=0,wo=0,Ds=null,up=0;function cn(){throw Error(c(321))}function Ki(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cl(e[n],t[n]))return!1;return!0}function Ji(e,t,n,l,a,o){return na=o,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?Pf:uc,ts=!1,o=n(l,a),ts=!1,Rs&&(o=yf(t,n,l,a)),xf(e),o}function xf(e){k.H=jo;var t=Qt!==null&&Qt.next!==null;if(na=0,bn=Qt=ht=null,wr=!1,wo=0,Ds=null,t)throw Error(c(300));e===null||vn||(e=e.dependencies,e!==null&&dr(e)&&(vn=!0))}function yf(e,t,n,l){ht=e;var a=0;do{if(Rs&&(Ds=null),wo=0,Rs=!1,25<=a)throw Error(c(301));if(a+=1,bn=Qt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}k.H=ed,o=t(n,l)}while(Rs);return o}function fp(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?So(t):t,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(ht.flags|=1024),t}function Wi(){var e=Sr!==0;return Sr=0,e}function Fi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ii(e){if(wr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wr=!1}na=0,bn=Qt=ht=null,Rs=!1,wo=Sr=0,Ds=null}function Fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?ht.memoizedState=bn=e:bn=bn.next=e,bn}function pn(){if(Qt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var t=bn===null?ht.memoizedState:bn.next;if(t!==null)bn=t,Qt=e;else{if(e===null)throw ht.alternate===null?Error(c(467)):Error(c(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},bn===null?ht.memoizedState=bn=e:bn=bn.next=e}return bn}function Nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(e){var t=wo;return wo+=1,Ds===null&&(Ds=[]),e=rf(Ds,e,t),t=ht,(bn===null?t.memoizedState:bn.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?Pf:uc),e}function jr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return So(e);if(e.$$typeof===De)return Bn(e)}throw Error(c(438,String(e)))}function Pi(e){var t=null,n=ht.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=ht.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Nr(),ht.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=w;return t.index++,n}function la(e,t){return typeof t=="function"?t(e):t}function Cr(e){var t=pn();return ec(t,Qt,e)}function ec(e,t,n){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=n;var a=e.baseQueue,o=l.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}t.baseQueue=a=o,l.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var g=i=null,E=null,P=t,ue=!1;do{var xe=P.lane&-536870913;if(xe!==P.lane?(Et&xe)===xe:(na&xe)===xe){var te=P.revertLane;if(te===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),xe===As&&(ue=!0);else if((na&te)===te){P=P.next,te===As&&(ue=!0);continue}else xe={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},E===null?(g=E=xe,i=o):E=E.next=xe,ht.lanes|=te,Ca|=te;xe=P.action,ts&&n(o,xe),o=P.hasEagerState?P.eagerState:n(o,xe)}else te={lane:xe,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},E===null?(g=E=te,i=o):E=E.next=te,ht.lanes|=xe,Ca|=xe;P=P.next}while(P!==null&&P!==t);if(E===null?i=o:E.next=g,!cl(o,e.memoizedState)&&(vn=!0,ue&&(n=Ms,n!==null)))throw n;e.memoizedState=o,e.baseState=i,e.baseQueue=E,l.lastRenderedState=o}return a===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function tc(e){var t=pn(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var l=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);cl(o,t.memoizedState)||(vn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,l]}function bf(e,t,n){var l=ht,a=pn(),o=Mt;if(o){if(n===void 0)throw Error(c(407));n=n()}else n=t();var i=!cl((Qt||a).memoizedState,n);if(i&&(a.memoizedState=n,vn=!0),a=a.queue,ac(Sf.bind(null,l,a,e),[e]),a.getSnapshot!==t||i||bn!==null&&bn.memoizedState.tag&1){if(l.flags|=2048,Os(9,{destroy:void 0},wf.bind(null,l,a,n,t),null),Wt===null)throw Error(c(349));o||(na&127)!==0||vf(l,t,n)}return n}function vf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t=Nr(),ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wf(e,t,n,l){t.value=n,t.getSnapshot=l,Nf(t)&&jf(e)}function Sf(e,t,n){return n(function(){Nf(t)&&jf(e)})}function Nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cl(e,n)}catch{return!0}}function jf(e){var t=Qa(e,2);t!==null&&rl(t,e,2)}function nc(e){var t=Fn();if(typeof e=="function"){var n=e;if(e=n(),ts){bt(!0);try{n()}finally{bt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t}function Cf(e,t,n,l){return e.baseState=n,ec(e,Qt,typeof l=="function"?l:la)}function dp(e,t,n,l,a){if(Ar(e))throw Error(c(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};k.T!==null?n(!0):o.isTransition=!1,l(o),n=t.pending,n===null?(o.next=t.pending=o,Tf(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Tf(e,t){var n=t.action,l=t.payload,a=e.state;if(t.isTransition){var o=k.T,i={};k.T=i;try{var g=n(a,l),E=k.S;E!==null&&E(i,g),Ef(e,t,g)}catch(P){lc(e,t,P)}finally{o!==null&&i.types!==null&&(o.types=i.types),k.T=o}}else try{o=n(a,l),Ef(e,t,o)}catch(P){lc(e,t,P)}}function Ef(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Af(e,t,l)},function(l){return lc(e,t,l)}):Af(e,t,n)}function Af(e,t,n){t.status="fulfilled",t.value=n,Mf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tf(e,n)))}function lc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Mf(t),t=t.next;while(t!==l)}e.action=null}function Mf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function kf(e,t){return t}function Lf(e,t){if(Mt){var n=Wt.formState;if(n!==null){e:{var l=ht;if(Mt){if(en){t:{for(var a=en,o=Tl;a.nodeType!==8;){if(!o){a=null;break t}if(a=Al(a.nextSibling),a===null){a=null;break t}}o=a.data,a=o==="F!"||o==="F"?a:null}if(a){en=Al(a.nextSibling),l=a.data==="F!";break e}}ma(l)}l=!1}l&&(t=n[0])}}return n=Fn(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kf,lastRenderedState:t},n.queue=l,n=Wf.bind(null,ht,l),l.dispatch=n,l=nc(!1),o=cc.bind(null,ht,!1,l.queue),l=Fn(),a={state:t,dispatch:null,action:e,pending:null},l.queue=a,n=dp.bind(null,ht,a,o,n),a.dispatch=n,l.memoizedState=e,[t,n,!1]}function zf(e){var t=pn();return Rf(t,Qt,e)}function Rf(e,t,n){if(t=ec(e,t,kf)[0],e=Cr(la)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=So(t)}catch(i){throw i===ks?gr:i}else l=t;t=pn();var a=t.queue,o=a.dispatch;return n!==t.memoizedState&&(ht.flags|=2048,Os(9,{destroy:void 0},hp.bind(null,a,n),null)),[l,o,e]}function hp(e,t){e.action=t}function Df(e){var t=pn(),n=Qt;if(n!==null)return Rf(t,n,e);pn(),t=t.memoizedState,n=pn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function Os(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=ht.updateQueue,t===null&&(t=Nr(),ht.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Of(){return pn().memoizedState}function Tr(e,t,n,l){var a=Fn();ht.flags|=e,a.memoizedState=Os(1|t,{destroy:void 0},n,l===void 0?null:l)}function Er(e,t,n,l){var a=pn();l=l===void 0?null:l;var o=a.memoizedState.inst;Qt!==null&&l!==null&&Ki(l,Qt.memoizedState.deps)?a.memoizedState=Os(t,o,n,l):(ht.flags|=e,a.memoizedState=Os(1|t,o,n,l))}function _f(e,t){Tr(8390656,8,e,t)}function ac(e,t){Er(2048,8,e,t)}function pp(e){ht.flags|=4;var t=ht.updateQueue;if(t===null)t=Nr(),ht.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Bf(e){var t=pn().memoizedState;return pp({ref:t,nextImpl:e}),function(){if((qt&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function Hf(e,t){return Er(4,2,e,t)}function Uf(e,t){return Er(4,4,e,t)}function qf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yf(e,t,n){n=n!=null?n.concat([e]):null,Er(4,4,qf.bind(null,t,e),n)}function sc(){}function Xf(e,t){var n=pn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Ki(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function $f(e,t){var n=pn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Ki(t,l[1]))return l[0];if(l=e(),ts){bt(!0);try{e()}finally{bt(!1)}}return n.memoizedState=[l,t],l}function oc(e,t,n){return n===void 0||(na&1073741824)!==0&&(Et&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Gd(),ht.lanes|=e,Ca|=e,n)}function Gf(e,t,n,l){return cl(n,t)?n:zs.current!==null?(e=oc(e,n,l),cl(e,t)||(vn=!0),e):(na&42)===0||(na&1073741824)!==0&&(Et&261930)===0?(vn=!0,e.memoizedState=n):(e=Gd(),ht.lanes|=e,Ca|=e,t)}function Vf(e,t,n,l,a){var o=F.p;F.p=o!==0&&8>o?o:8;var i=k.T,g={};k.T=g,cc(e,!1,t,n);try{var E=a(),P=k.S;if(P!==null&&P(g,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var ue=cp(E,l);No(e,t,ue,gl(e))}else No(e,t,l,gl(e))}catch(xe){No(e,t,{then:function(){},status:"rejected",reason:xe},gl())}finally{F.p=o,i!==null&&g.types!==null&&(i.types=g.types),k.T=i}}function gp(){}function rc(e,t,n,l){if(e.tag!==5)throw Error(c(476));var a=Qf(e).queue;Vf(e,a,t,Se,n===null?gp:function(){return Zf(e),n(l)})}function Qf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:Se},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Zf(e){var t=Qf(e);t.next===null&&(t=e.alternate.memoizedState),No(e,t.next.queue,{},gl())}function ic(){return Bn(qo)}function Kf(){return pn().memoizedState}function Jf(){return pn().memoizedState}function mp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gl();e=ba(n);var l=va(t,e,n);l!==null&&(rl(l,t,n),yo(l,t,n)),t={cache:Bi()},e.payload=t;return}t=t.return}}function xp(e,t,n){var l=gl();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ar(e)?Ff(t,n):(n=Ti(e,t,n,l),n!==null&&(rl(n,e,l),If(n,t,l)))}function Wf(e,t,n){var l=gl();No(e,t,n,l)}function No(e,t,n,l){var a={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ar(e))Ff(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,g=o(i,n);if(a.hasEagerState=!0,a.eagerState=g,cl(g,i))return ir(e,t,a,0),Wt===null&&rr(),!1}catch{}finally{}if(n=Ti(e,t,a,l),n!==null)return rl(n,e,l),If(n,t,l),!0}return!1}function cc(e,t,n,l){if(l={lane:2,revertLane:Yc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ar(e)){if(t)throw Error(c(479))}else t=Ti(e,n,l,2),t!==null&&rl(t,e,2)}function Ar(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function Ff(e,t){Rs=wr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function If(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,zl(e,n)}}var jo={readContext:Bn,use:jr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};jo.useEffectEvent=cn;var Pf={readContext:Bn,use:jr,useCallback:function(e,t){return Fn().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:_f,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Tr(4194308,4,qf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tr(4194308,4,e,t)},useInsertionEffect:function(e,t){Tr(4,2,e,t)},useMemo:function(e,t){var n=Fn();t=t===void 0?null:t;var l=e();if(ts){bt(!0);try{e()}finally{bt(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Fn();if(n!==void 0){var a=n(t);if(ts){bt(!0);try{n(t)}finally{bt(!1)}}}else a=t;return l.memoizedState=l.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},l.queue=e,e=e.dispatch=xp.bind(null,ht,e),[l.memoizedState,e]},useRef:function(e){var t=Fn();return e={current:e},t.memoizedState=e},useState:function(e){e=nc(e);var t=e.queue,n=Wf.bind(null,ht,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:sc,useDeferredValue:function(e,t){var n=Fn();return oc(n,e,t)},useTransition:function(){var e=nc(!1);return e=Vf.bind(null,ht,e.queue,!0,!1),Fn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=ht,a=Fn();if(Mt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Wt===null)throw Error(c(349));(Et&127)!==0||vf(l,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,_f(Sf.bind(null,l,o,e),[e]),l.flags|=2048,Os(9,{destroy:void 0},wf.bind(null,l,o,n,t),null),n},useId:function(){var e=Fn(),t=Wt.identifierPrefix;if(Mt){var n=Vl,l=Gl;n=(l&~(1<<32-Ut(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Sr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=up++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ic,useFormState:Lf,useActionState:Lf,useOptimistic:function(e){var t=Fn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=cc.bind(null,ht,!0,n),n.dispatch=t,[e,t]},useMemoCache:Pi,useCacheRefresh:function(){return Fn().memoizedState=mp.bind(null,ht)},useEffectEvent:function(e){var t=Fn(),n={impl:e};return t.memoizedState=n,function(){if((qt&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}},uc={readContext:Bn,use:jr,useCallback:Xf,useContext:Bn,useEffect:ac,useImperativeHandle:Yf,useInsertionEffect:Hf,useLayoutEffect:Uf,useMemo:$f,useReducer:Cr,useRef:Of,useState:function(){return Cr(la)},useDebugValue:sc,useDeferredValue:function(e,t){var n=pn();return Gf(n,Qt.memoizedState,e,t)},useTransition:function(){var e=Cr(la)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:So(e),t]},useSyncExternalStore:bf,useId:Kf,useHostTransitionStatus:ic,useFormState:zf,useActionState:zf,useOptimistic:function(e,t){var n=pn();return Cf(n,Qt,e,t)},useMemoCache:Pi,useCacheRefresh:Jf};uc.useEffectEvent=Bf;var ed={readContext:Bn,use:jr,useCallback:Xf,useContext:Bn,useEffect:ac,useImperativeHandle:Yf,useInsertionEffect:Hf,useLayoutEffect:Uf,useMemo:$f,useReducer:tc,useRef:Of,useState:function(){return tc(la)},useDebugValue:sc,useDeferredValue:function(e,t){var n=pn();return Qt===null?oc(n,e,t):Gf(n,Qt.memoizedState,e,t)},useTransition:function(){var e=tc(la)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:So(e),t]},useSyncExternalStore:bf,useId:Kf,useHostTransitionStatus:ic,useFormState:Df,useActionState:Df,useOptimistic:function(e,t){var n=pn();return Qt!==null?Cf(n,Qt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Pi,useCacheRefresh:Jf};ed.useEffectEvent=Bf;function fc(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:M({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=gl(),a=ba(l);a.payload=t,n!=null&&(a.callback=n),t=va(e,a,l),t!==null&&(rl(t,e,l),yo(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=gl(),a=ba(l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=va(e,a,l),t!==null&&(rl(t,e,l),yo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gl(),l=ba(n);l.tag=2,t!=null&&(l.callback=t),t=va(e,l,n),t!==null&&(rl(t,e,n),yo(t,e,n))}};function td(e,t,n,l,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,i):t.prototype&&t.prototype.isPureReactComponent?!co(n,l)||!co(a,o):!0}function nd(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&dc.enqueueReplaceState(t,t.state,null)}function ns(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=M({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function ld(e){or(e)}function ad(e){console.error(e)}function sd(e){or(e)}function Mr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function od(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function hc(e,t,n){return n=ba(n),n.tag=3,n.payload={element:null},n.callback=function(){Mr(e,t)},n}function rd(e){return e=ba(e),e.tag=3,e}function id(e,t,n,l){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var o=l.value;e.payload=function(){return a(o)},e.callback=function(){od(t,n,l)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){od(t,n,l),typeof a!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var g=l.stack;this.componentDidCatch(l.value,{componentStack:g!==null?g:""})})}function yp(e,t,n,l,a){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Es(t,n,a,!0),n=fl.current,n!==null){switch(n.tag){case 31:case 13:return El===null?Yr():n.alternate===null&&un===0&&(un=3),n.flags&=-257,n.flags|=65536,n.lanes=a,l===mr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Hc(e,l,a)),!1;case 22:return n.flags|=65536,l===mr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Hc(e,l,a)),!1}throw Error(c(435,n.tag))}return Hc(e,l,a),Yr(),!1}if(Mt)return t=fl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=a,l!==zi&&(e=Error(c(422),{cause:l}),ho(Nl(e,n)))):(l!==zi&&(t=Error(c(423),{cause:l}),ho(Nl(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,l=Nl(l,n),a=hc(e.stateNode,l,a),$i(e,a),un!==4&&(un=2)),!1;var o=Error(c(520),{cause:l});if(o=Nl(o,n),zo===null?zo=[o]:zo.push(o),un!==4&&(un=2),t===null)return!0;l=Nl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=hc(n.stateNode,l,e),$i(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ta===null||!Ta.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=rd(a),id(a,e,n,l),$i(n,a),!1}n=n.return}while(n!==null);return!1}var pc=Error(c(461)),vn=!1;function Hn(e,t,n,l){t.child=e===null?df(t,null,n,l):es(t,e.child,n,l)}function cd(e,t,n,l,a){n=n.render;var o=t.ref;if("ref"in l){var i={};for(var g in l)g!=="ref"&&(i[g]=l[g])}else i=l;return Wa(t),l=Ji(e,t,n,i,o,a),g=Wi(),e!==null&&!vn?(Fi(e,t,a),aa(e,t,a)):(Mt&&g&&ki(t),t.flags|=1,Hn(e,t,l,a),t.child)}function ud(e,t,n,l,a){if(e===null){var o=n.type;return typeof o=="function"&&!Ei(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,fd(e,t,o,l,a)):(e=ur(n.type,null,l,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Sc(e,a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:co,n(i,l)&&e.ref===t.ref)return aa(e,t,a)}return t.flags|=1,e=Il(o,l),e.ref=t.ref,e.return=t,t.child=e}function fd(e,t,n,l,a){if(e!==null){var o=e.memoizedProps;if(co(o,l)&&e.ref===t.ref)if(vn=!1,t.pendingProps=l=o,Sc(e,a))(e.flags&131072)!==0&&(vn=!0);else return t.lanes=e.lanes,aa(e,t,a)}return gc(e,t,n,l,a)}function dd(e,t,n,l){var a=l.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(l=t.child=e.child,a=0;l!==null;)a=a|l.lanes|l.childLanes,l=l.sibling;l=a&~o}else l=0,t.child=null;return hd(e,t,o,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&pr(t,o!==null?o.cachePool:null),o!==null?gf(t,o):Vi(),mf(t);else return l=t.lanes=536870912,hd(e,t,o!==null?o.baseLanes|n:n,n,l)}else o!==null?(pr(t,o.cachePool),gf(t,o),Sa(),t.memoizedState=null):(e!==null&&pr(t,null),Vi(),Sa());return Hn(e,t,a,n),t.child}function Co(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function hd(e,t,n,l,a){var o=Ui();return o=o===null?null:{parent:yn._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&pr(t,null),Vi(),mf(t),e!==null&&Es(e,t,l,!0),t.childLanes=a,null}function kr(e,t){return t=zr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pd(e,t,n){return es(t,e.child,null,n),e=kr(t,t.pendingProps),e.flags|=2,dl(t),t.memoizedState=null,e}function bp(e,t,n){var l=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Mt){if(l.mode==="hidden")return e=kr(t,l),t.lanes=536870912,Co(null,e);if(Zi(t),(e=en)?(e=Th(e,Tl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pa!==null?{id:Gl,overflow:Vl}:null,retryLane:536870912,hydrationErrors:null},n=Wu(e),n.return=t,t.child=n,_n=t,en=null)):e=null,e===null)throw ma(t);return t.lanes=536870912,null}return kr(t,l)}var o=e.memoizedState;if(o!==null){var i=o.dehydrated;if(Zi(t),a)if(t.flags&256)t.flags&=-257,t=pd(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(vn||Es(e,t,n,!1),a=(n&e.childLanes)!==0,vn||a){if(l=Wt,l!==null&&(i=xn(l,n),i!==0&&i!==o.retryLane))throw o.retryLane=i,Qa(e,i),rl(l,e,i),pc;Yr(),t=pd(e,t,n)}else e=o.treeContext,en=Al(i.nextSibling),_n=t,Mt=!0,ga=null,Tl=!1,e!==null&&Pu(t,e),t=kr(t,l),t.flags|=4096;return t}return e=Il(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Lr(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gc(e,t,n,l,a){return Wa(t),n=Ji(e,t,n,l,void 0,a),l=Wi(),e!==null&&!vn?(Fi(e,t,a),aa(e,t,a)):(Mt&&l&&ki(t),t.flags|=1,Hn(e,t,n,a),t.child)}function gd(e,t,n,l,a,o){return Wa(t),t.updateQueue=null,n=yf(t,l,n,a),xf(e),l=Wi(),e!==null&&!vn?(Fi(e,t,o),aa(e,t,o)):(Mt&&l&&ki(t),t.flags|=1,Hn(e,t,n,o),t.child)}function md(e,t,n,l,a){if(Wa(t),t.stateNode===null){var o=Ns,i=n.contextType;typeof i=="object"&&i!==null&&(o=Bn(i)),o=new n(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=dc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Yi(t),i=n.contextType,o.context=typeof i=="object"&&i!==null?Bn(i):Ns,o.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(fc(t,n,i,l),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&dc.enqueueReplaceState(o,o.state,null),vo(t,l,o,a),bo(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){o=t.stateNode;var g=t.memoizedProps,E=ns(n,g);o.props=E;var P=o.context,ue=n.contextType;i=Ns,typeof ue=="object"&&ue!==null&&(i=Bn(ue));var xe=n.getDerivedStateFromProps;ue=typeof xe=="function"||typeof o.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,ue||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g||P!==i)&&nd(t,o,l,i),ya=!1;var te=t.memoizedState;o.state=te,vo(t,l,o,a),bo(),P=t.memoizedState,g||te!==P||ya?(typeof xe=="function"&&(fc(t,n,xe,l),P=t.memoizedState),(E=ya||td(t,n,E,l,te,P,i))?(ue||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=P),o.props=l,o.state=P,o.context=i,l=E):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,Xi(e,t),i=t.memoizedProps,ue=ns(n,i),o.props=ue,xe=t.pendingProps,te=o.context,P=n.contextType,E=Ns,typeof P=="object"&&P!==null&&(E=Bn(P)),g=n.getDerivedStateFromProps,(P=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==xe||te!==E)&&nd(t,o,l,E),ya=!1,te=t.memoizedState,o.state=te,vo(t,l,o,a),bo();var ae=t.memoizedState;i!==xe||te!==ae||ya||e!==null&&e.dependencies!==null&&dr(e.dependencies)?(typeof g=="function"&&(fc(t,n,g,l),ae=t.memoizedState),(ue=ya||td(t,n,ue,l,te,ae,E)||e!==null&&e.dependencies!==null&&dr(e.dependencies))?(P||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,ae,E),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,ae,E)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ae),o.props=l,o.state=ae,o.context=E,l=ue):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),l=!1)}return o=l,Lr(e,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&l?(t.child=es(t,e.child,null,a),t.child=es(t,null,n,a)):Hn(e,t,n,a),t.memoizedState=o.state,e=t.child):e=aa(e,t,a),e}function xd(e,t,n,l){return Ka(),t.flags|=256,Hn(e,t,n,l),t.child}var mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xc(e){return{baseLanes:e,cachePool:sf()}}function yc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=pl),e}function yd(e,t,n){var l=t.pendingProps,a=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(hn.current&2)!==0),i&&(a=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Mt){if(a?wa(t):Sa(),(e=en)?(e=Th(e,Tl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pa!==null?{id:Gl,overflow:Vl}:null,retryLane:536870912,hydrationErrors:null},n=Wu(e),n.return=t,t.child=n,_n=t,en=null)):e=null,e===null)throw ma(t);return eu(e)?t.lanes=32:t.lanes=536870912,null}var g=l.children;return l=l.fallback,a?(Sa(),a=t.mode,g=zr({mode:"hidden",children:g},a),l=Za(l,a,n,null),g.return=t,l.return=t,g.sibling=l,t.child=g,l=t.child,l.memoizedState=xc(n),l.childLanes=yc(e,i,n),t.memoizedState=mc,Co(null,l)):(wa(t),bc(t,g))}var E=e.memoizedState;if(E!==null&&(g=E.dehydrated,g!==null)){if(o)t.flags&256?(wa(t),t.flags&=-257,t=vc(e,t,n)):t.memoizedState!==null?(Sa(),t.child=e.child,t.flags|=128,t=null):(Sa(),g=l.fallback,a=t.mode,l=zr({mode:"visible",children:l.children},a),g=Za(g,a,n,null),g.flags|=2,l.return=t,g.return=t,l.sibling=g,t.child=l,es(t,e.child,null,n),l=t.child,l.memoizedState=xc(n),l.childLanes=yc(e,i,n),t.memoizedState=mc,t=Co(null,l));else if(wa(t),eu(g)){if(i=g.nextSibling&&g.nextSibling.dataset,i)var P=i.dgst;i=P,l=Error(c(419)),l.stack="",l.digest=i,ho({value:l,source:null,stack:null}),t=vc(e,t,n)}else if(vn||Es(e,t,n,!1),i=(n&e.childLanes)!==0,vn||i){if(i=Wt,i!==null&&(l=xn(i,n),l!==0&&l!==E.retryLane))throw E.retryLane=l,Qa(e,l),rl(i,e,l),pc;Pc(g)||Yr(),t=vc(e,t,n)}else Pc(g)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,en=Al(g.nextSibling),_n=t,Mt=!0,ga=null,Tl=!1,e!==null&&Pu(t,e),t=bc(t,l.children),t.flags|=4096);return t}return a?(Sa(),g=l.fallback,a=t.mode,E=e.child,P=E.sibling,l=Il(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,P!==null?g=Il(P,g):(g=Za(g,a,n,null),g.flags|=2),g.return=t,l.return=t,l.sibling=g,t.child=l,Co(null,l),l=t.child,g=e.child.memoizedState,g===null?g=xc(n):(a=g.cachePool,a!==null?(E=yn._currentValue,a=a.parent!==E?{parent:E,pool:E}:a):a=sf(),g={baseLanes:g.baseLanes|n,cachePool:a}),l.memoizedState=g,l.childLanes=yc(e,i,n),t.memoizedState=mc,Co(e.child,l)):(wa(t),n=e.child,e=n.sibling,n=Il(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function bc(e,t){return t=zr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zr(e,t){return e=ul(22,e,null,t),e.lanes=0,e}function vc(e,t,n){return es(t,e.child,null,n),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bd(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Oi(e.return,t,n)}function wc(e,t,n,l,a,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:a,treeForkCount:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=l,i.tail=n,i.tailMode=a,i.treeForkCount=o)}function vd(e,t,n){var l=t.pendingProps,a=l.revealOrder,o=l.tail;l=l.children;var i=hn.current,g=(i&2)!==0;if(g?(i=i&1|2,t.flags|=128):i&=1,K(hn,i),Hn(e,t,l,n),l=Mt?fo:0,!g&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bd(e,n,t);else if(e.tag===19)bd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&vr(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),wc(t,!1,a,n,o,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&vr(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}wc(t,!0,n,null,o,l);break;case"together":wc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function aa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ca|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Es(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=Il(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Il(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&dr(e)))}function vp(e,t,n){switch(t.tag){case 3:ot(t,t.stateNode.containerInfo),xa(t,yn,e.memoizedState.cache),Ka();break;case 27:case 5:rt(t);break;case 4:ot(t,t.stateNode.containerInfo);break;case 10:xa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Zi(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(wa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?yd(e,t,n):(wa(t),e=aa(e,t,n),e!==null?e.sibling:null);wa(t);break;case 19:var a=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Es(e,t,n,!1),l=(n&t.childLanes)!==0),a){if(l)return vd(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),K(hn,hn.current),l)break;return null;case 22:return t.lanes=0,dd(e,t,n,t.pendingProps);case 24:xa(t,yn,e.memoizedState.cache)}return aa(e,t,n)}function wd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)vn=!0;else{if(!Sc(e,n)&&(t.flags&128)===0)return vn=!1,vp(e,t,n);vn=(e.flags&131072)!==0}else vn=!1,Mt&&(t.flags&1048576)!==0&&Iu(t,fo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e=="function")Ei(e)?(l=ns(e,l),t.tag=1,t=md(null,t,e,l,n)):(t.tag=0,t=gc(null,t,e,l,n));else{if(e!=null){var a=e.$$typeof;if(a===W){t.tag=11,t=cd(null,t,e,l,n);break e}else if(a===N){t.tag=14,t=ud(null,t,e,l,n);break e}}throw t=Le(e)||e,Error(c(306,t,""))}}return t;case 0:return gc(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,a=ns(l,t.pendingProps),md(e,t,l,a,n);case 3:e:{if(ot(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var o=t.memoizedState;a=o.element,Xi(e,t),vo(t,l,null,n);var i=t.memoizedState;if(l=i.cache,xa(t,yn,l),l!==o.cache&&_i(t,[yn],n,!0),bo(),l=i.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=xd(e,t,l,n);break e}else if(l!==a){a=Nl(Error(c(424)),t),ho(a),t=xd(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(en=Al(e.firstChild),_n=t,Mt=!0,ga=null,Tl=!0,n=df(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ka(),l===a){t=aa(e,t,n);break e}Hn(e,t,l,n)}t=t.child}return t;case 26:return Lr(e,t),e===null?(n=zh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Mt||(n=t.type,e=t.pendingProps,l=Kr(H.current).createElement(n),l[Z]=t,l[Ue]=e,Un(l,n,e),de(l),t.stateNode=l):t.memoizedState=zh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return rt(t),e===null&&Mt&&(l=t.stateNode=Mh(t.type,t.pendingProps,H.current),_n=t,Tl=!0,a=en,ka(t.type)?(tu=a,en=Al(l.firstChild)):en=a),Hn(e,t,t.pendingProps.children,n),Lr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Mt&&((a=l=en)&&(l=Wp(l,t.type,t.pendingProps,Tl),l!==null?(t.stateNode=l,_n=t,en=Al(l.firstChild),Tl=!1,a=!0):a=!1),a||ma(t)),rt(t),a=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,l=o.children,Wc(a,o)?l=null:i!==null&&Wc(a,i)&&(t.flags|=32),t.memoizedState!==null&&(a=Ji(e,t,fp,null,null,n),qo._currentValue=a),Lr(e,t),Hn(e,t,l,n),t.child;case 6:return e===null&&Mt&&((e=n=en)&&(n=Fp(n,t.pendingProps,Tl),n!==null?(t.stateNode=n,_n=t,en=null,e=!0):e=!1),e||ma(t)),null;case 13:return yd(e,t,n);case 4:return ot(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=es(t,null,l,n):Hn(e,t,l,n),t.child;case 11:return cd(e,t,t.type,t.pendingProps,n);case 7:return Hn(e,t,t.pendingProps,n),t.child;case 8:return Hn(e,t,t.pendingProps.children,n),t.child;case 12:return Hn(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,xa(t,t.type,l.value),Hn(e,t,l.children,n),t.child;case 9:return a=t.type._context,l=t.pendingProps.children,Wa(t),a=Bn(a),l=l(a),t.flags|=1,Hn(e,t,l,n),t.child;case 14:return ud(e,t,t.type,t.pendingProps,n);case 15:return fd(e,t,t.type,t.pendingProps,n);case 19:return vd(e,t,n);case 31:return bp(e,t,n);case 22:return dd(e,t,n,t.pendingProps);case 24:return Wa(t),l=Bn(yn),e===null?(a=Ui(),a===null&&(a=Wt,o=Bi(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:l,cache:a},Yi(t),xa(t,yn,a)):((e.lanes&n)!==0&&(Xi(e,t),vo(t,null,null,n),bo()),a=e.memoizedState,o=t.memoizedState,a.parent!==l?(a={parent:l,cache:l},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),xa(t,yn,l)):(l=o.cache,xa(t,yn,l),l!==a.cache&&_i(t,[yn],n,!0))),Hn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function sa(e){e.flags|=4}function Nc(e,t,n,l,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(Kd())e.flags|=8192;else throw Pa=mr,qi}else e.flags&=-16777217}function Sd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bh(t))if(Kd())e.flags|=8192;else throw Pa=mr,qi}function Rr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Je():536870912,e.lanes|=t,Us|=t)}function To(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags&65011712,l|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags,l|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function wp(e,t,n){var l=t.pendingProps;switch(Li(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return tn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ta(yn),ze(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ts(t)?sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ri())),tn(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(sa(t),o!==null?(tn(t),Sd(t,o)):(tn(t),Nc(t,a,null,l,n))):o?o!==e.memoizedState?(sa(t),tn(t),Sd(t,o)):(tn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&sa(t),tn(t),Nc(t,a,e,l,n)),null;case 27:if(He(t),n=H.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sa(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return tn(t),null}e=se.current,Ts(t)?ef(t):(e=Mh(a,l,n),t.stateNode=e,sa(t))}return tn(t),null;case 5:if(He(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sa(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return tn(t),null}if(o=se.current,Ts(t))ef(t);else{var i=Kr(H.current);switch(o){case 1:o=i.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:o=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":o=i.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":o=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":o=i.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?i.createElement("select",{is:l.is}):i.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?i.createElement(a,{is:l.is}):i.createElement(a)}}o[Z]=t,o[Ue]=l;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)o.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=o;e:switch(Un(o,a,l),a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&sa(t)}}return tn(t),Nc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&sa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=H.current,Ts(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,a=_n,a!==null)switch(a.tag){case 27:case 5:l=a.memoizedProps}e[Z]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||yh(e.nodeValue,n)),e||ma(t,!0)}else e=Kr(e).createTextNode(l),e[Z]=t,t.stateNode=e}return tn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ts(t),n!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[Z]=t}else Ka(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tn(t),e=!1}else n=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(dl(t),t):(dl(t),null);if((t.flags&128)!==0)throw Error(c(558))}return tn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ts(t),l!==null&&l.dehydrated!==null){if(e===null){if(!a)throw Error(c(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(c(317));a[Z]=t}else Ka(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tn(t),a=!1}else a=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(dl(t),t):(dl(t),null)}return dl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,a=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(a=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==a&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Rr(t,t.updateQueue),tn(t),null);case 4:return ze(),e===null&&Vc(t.stateNode.containerInfo),tn(t),null;case 10:return ta(t.type),tn(t),null;case 19:if(A(hn),l=t.memoizedState,l===null)return tn(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)To(l,!1);else{if(un!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=vr(e),o!==null){for(t.flags|=128,To(l,!1),e=o.updateQueue,t.updateQueue=e,Rr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ju(n,e),n=n.sibling;return K(hn,hn.current&1|2),Mt&&Pl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Dt()>Hr&&(t.flags|=128,a=!0,To(l,!1),t.lanes=4194304)}else{if(!a)if(e=vr(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Rr(t,e),To(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Mt)return tn(t),null}else 2*Dt()-l.renderingStartTime>Hr&&n!==536870912&&(t.flags|=128,a=!0,To(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Dt(),e.sibling=null,n=hn.current,K(hn,a?n&1|2:n&1),Mt&&Pl(t,l.treeForkCount),e):(tn(t),null);case 22:case 23:return dl(t),Qi(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),n=t.updateQueue,n!==null&&Rr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&A(Fa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ta(yn),tn(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sp(e,t){switch(Li(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ta(yn),ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return He(t),null;case 31:if(t.memoizedState!==null){if(dl(t),t.alternate===null)throw Error(c(340));Ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(dl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(hn),null;case 4:return ze(),null;case 10:return ta(t.type),null;case 22:case 23:return dl(t),Qi(),e!==null&&A(Fa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ta(yn),null;case 25:return null;default:return null}}function Nd(e,t){switch(Li(t),t.tag){case 3:ta(yn),ze();break;case 26:case 27:case 5:He(t);break;case 4:ze();break;case 31:t.memoizedState!==null&&dl(t);break;case 13:dl(t);break;case 19:A(hn);break;case 10:ta(t.type);break;case 22:case 23:dl(t),Qi(),e!==null&&A(Fa);break;case 24:ta(yn)}}function Eo(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var a=l.next;n=a;do{if((n.tag&e)===e){l=void 0;var o=n.create,i=n.inst;l=o(),i.destroy=l}n=n.next}while(n!==a)}}catch(g){Gt(t,t.return,g)}}function Na(e,t,n){try{var l=t.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var o=a.next;l=o;do{if((l.tag&e)===e){var i=l.inst,g=i.destroy;if(g!==void 0){i.destroy=void 0,a=t;var E=n,P=g;try{P()}catch(ue){Gt(a,E,ue)}}}l=l.next}while(l!==o)}}catch(ue){Gt(t,t.return,ue)}}function jd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{pf(t,n)}catch(l){Gt(e,e.return,l)}}}function Cd(e,t,n){n.props=ns(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Gt(e,t,l)}}function Ao(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(a){Gt(e,t,a)}}function Ql(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(a){Gt(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Gt(e,t,a)}else n.current=null}function Td(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(a){Gt(e,e.return,a)}}function jc(e,t,n){try{var l=e.stateNode;Gp(l,e.type,n,t),l[Ue]=t}catch(a){Gt(e,e.return,a)}}function Ed(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ka(e.type)||e.tag===4}function Cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wl));else if(l!==4&&(l===27&&ka(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Tc(e,t,n),e=e.sibling;e!==null;)Tc(e,t,n),e=e.sibling}function Dr(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ka(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Dr(e,t,n),e=e.sibling;e!==null;)Dr(e,t,n),e=e.sibling}function Ad(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Un(t,l,n),t[Z]=e,t[Ue]=n}catch(o){Gt(e,e.return,o)}}var oa=!1,wn=!1,Ec=!1,Md=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function Np(e,t){if(e=e.containerInfo,Kc=ti,e=qu(e),vi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var a=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,g=-1,E=-1,P=0,ue=0,xe=e,te=null;t:for(;;){for(var ae;xe!==n||a!==0&&xe.nodeType!==3||(g=i+a),xe!==o||l!==0&&xe.nodeType!==3||(E=i+l),xe.nodeType===3&&(i+=xe.nodeValue.length),(ae=xe.firstChild)!==null;)te=xe,xe=ae;for(;;){if(xe===e)break t;if(te===n&&++P===a&&(g=i),te===o&&++ue===l&&(E=i),(ae=xe.nextSibling)!==null)break;xe=te,te=xe.parentNode}xe=ae}n=g===-1||E===-1?null:{start:g,end:E}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jc={focusedElem:e,selectionRange:n},ti=!1,Dn=t;Dn!==null;)if(t=Dn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Dn=e;else for(;Dn!==null;){switch(t=Dn,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,l=n.stateNode;try{var $e=ns(n.type,a);e=l.getSnapshotBeforeUpdate($e,o),l.__reactInternalSnapshotBeforeUpdate=e}catch(tt){Gt(n,n.return,tt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ic(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Dn=e;break}Dn=t.return}}function kd(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:ia(e,n),l&4&&Eo(5,n);break;case 1:if(ia(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(i){Gt(n,n.return,i)}else{var a=ns(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Gt(n,n.return,i)}}l&64&&jd(n),l&512&&Ao(n,n.return);break;case 3:if(ia(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{pf(e,t)}catch(i){Gt(n,n.return,i)}}break;case 27:t===null&&l&4&&Ad(n);case 26:case 5:ia(e,n),t===null&&l&4&&Td(n),l&512&&Ao(n,n.return);break;case 12:ia(e,n);break;case 31:ia(e,n),l&4&&Rd(e,n);break;case 13:ia(e,n),l&4&&Dd(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=zp.bind(null,n),Ip(e,n))));break;case 22:if(l=n.memoizedState!==null||oa,!l){t=t!==null&&t.memoizedState!==null||wn,a=oa;var o=wn;oa=l,(wn=t)&&!o?ca(e,n,(n.subtreeFlags&8772)!==0):ia(e,n),oa=a,wn=o}break;case 30:break;default:ia(e,n)}}function Ld(e){var t=e.alternate;t!==null&&(e.alternate=null,Ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&L(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nn=null,ll=!1;function ra(e,t,n){for(n=n.child;n!==null;)zd(e,t,n),n=n.sibling}function zd(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Pt,n)}catch{}switch(n.tag){case 26:wn||Ql(n,t),ra(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:wn||Ql(n,t);var l=nn,a=ll;ka(n.type)&&(nn=n.stateNode,ll=!1),ra(e,t,n),Bo(n.stateNode),nn=l,ll=a;break;case 5:wn||Ql(n,t);case 6:if(l=nn,a=ll,nn=null,ra(e,t,n),nn=l,ll=a,nn!==null)if(ll)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(n.stateNode)}catch(o){Gt(n,t,o)}else try{nn.removeChild(n.stateNode)}catch(o){Gt(n,t,o)}break;case 18:nn!==null&&(ll?(e=nn,jh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Zs(e)):jh(nn,n.stateNode));break;case 4:l=nn,a=ll,nn=n.stateNode.containerInfo,ll=!0,ra(e,t,n),nn=l,ll=a;break;case 0:case 11:case 14:case 15:Na(2,n,t),wn||Na(4,n,t),ra(e,t,n);break;case 1:wn||(Ql(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Cd(n,t,l)),ra(e,t,n);break;case 21:ra(e,t,n);break;case 22:wn=(l=wn)||n.memoizedState!==null,ra(e,t,n),wn=l;break;default:ra(e,t,n)}}function Rd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Zs(e)}catch(n){Gt(t,t.return,n)}}}function Dd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Zs(e)}catch(n){Gt(t,t.return,n)}}function jp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Md),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Md),t;default:throw Error(c(435,e.tag))}}function Or(e,t){var n=jp(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var a=Rp.bind(null,e,l);l.then(a,a)}})}function al(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var a=n[l],o=e,i=t,g=i;e:for(;g!==null;){switch(g.tag){case 27:if(ka(g.type)){nn=g.stateNode,ll=!1;break e}break;case 5:nn=g.stateNode,ll=!1;break e;case 3:case 4:nn=g.stateNode.containerInfo,ll=!0;break e}g=g.return}if(nn===null)throw Error(c(160));zd(o,i,a),nn=null,ll=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Od(t,e),t=t.sibling}var Bl=null;function Od(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:al(t,e),sl(e),l&4&&(Na(3,e,e.return),Eo(3,e),Na(5,e,e.return));break;case 1:al(t,e),sl(e),l&512&&(wn||n===null||Ql(n,n.return)),l&64&&oa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var a=Bl;if(al(t,e),sl(e),l&512&&(wn||n===null||Ql(n,n.return)),l&4){var o=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(l){case"title":o=a.getElementsByTagName("title")[0],(!o||o[il]||o[Z]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=a.createElement(l),a.head.insertBefore(o,a.querySelector("head > title"))),Un(o,l,n),o[Z]=e,de(o),l=o;break e;case"link":var i=Oh("link","href",a).get(l+(n.href||""));if(i){for(var g=0;g<i.length;g++)if(o=i[g],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(g,1);break t}}o=a.createElement(l),Un(o,l,n),a.head.appendChild(o);break;case"meta":if(i=Oh("meta","content",a).get(l+(n.content||""))){for(g=0;g<i.length;g++)if(o=i[g],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(g,1);break t}}o=a.createElement(l),Un(o,l,n),a.head.appendChild(o);break;default:throw Error(c(468,l))}o[Z]=e,de(o),l=o}e.stateNode=l}else _h(a,e.type,e.stateNode);else e.stateNode=Dh(a,l,e.memoizedProps);else o!==l?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,l===null?_h(a,e.type,e.stateNode):Dh(a,l,e.memoizedProps)):l===null&&e.stateNode!==null&&jc(e,e.memoizedProps,n.memoizedProps)}break;case 27:al(t,e),sl(e),l&512&&(wn||n===null||Ql(n,n.return)),n!==null&&l&4&&jc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(al(t,e),sl(e),l&512&&(wn||n===null||Ql(n,n.return)),e.flags&32){a=e.stateNode;try{En(a,"")}catch($e){Gt(e,e.return,$e)}}l&4&&e.stateNode!=null&&(a=e.memoizedProps,jc(e,a,n!==null?n.memoizedProps:a)),l&1024&&(Ec=!0);break;case 6:if(al(t,e),sl(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch($e){Gt(e,e.return,$e)}}break;case 3:if(Fr=null,a=Bl,Bl=Jr(t.containerInfo),al(t,e),Bl=a,sl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Zs(t.containerInfo)}catch($e){Gt(e,e.return,$e)}Ec&&(Ec=!1,_d(e));break;case 4:l=Bl,Bl=Jr(e.stateNode.containerInfo),al(t,e),sl(e),Bl=l;break;case 12:al(t,e),sl(e);break;case 31:al(t,e),sl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 13:al(t,e),sl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Br=Dt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 22:a=e.memoizedState!==null;var E=n!==null&&n.memoizedState!==null,P=oa,ue=wn;if(oa=P||a,wn=ue||E,al(t,e),wn=ue,oa=P,sl(e),l&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||E||oa||wn||ls(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){E=n=t;try{if(o=E.stateNode,a)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{g=E.stateNode;var xe=E.memoizedProps.style,te=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;g.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch($e){Gt(E,E.return,$e)}}}else if(t.tag===6){if(n===null){E=t;try{E.stateNode.nodeValue=a?"":E.memoizedProps}catch($e){Gt(E,E.return,$e)}}}else if(t.tag===18){if(n===null){E=t;try{var ae=E.stateNode;a?Ch(ae,!0):Ch(E.stateNode,!1)}catch($e){Gt(E,E.return,$e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Or(e,n))));break;case 19:al(t,e),sl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Or(e,l)));break;case 30:break;case 21:break;default:al(t,e),sl(e)}}function sl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Ed(l)){n=l;break}l=l.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var a=n.stateNode,o=Cc(e);Dr(e,o,a);break;case 5:var i=n.stateNode;n.flags&32&&(En(i,""),n.flags&=-33);var g=Cc(e);Dr(e,g,i);break;case 3:case 4:var E=n.stateNode.containerInfo,P=Cc(e);Tc(e,P,E);break;default:throw Error(c(161))}}catch(ue){Gt(e,e.return,ue)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _d(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_d(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ia(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kd(e,t.alternate,t),t=t.sibling}function ls(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Na(4,t,t.return),ls(t);break;case 1:Ql(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Cd(t,t.return,n),ls(t);break;case 27:Bo(t.stateNode);case 26:case 5:Ql(t,t.return),ls(t);break;case 22:t.memoizedState===null&&ls(t);break;case 30:ls(t);break;default:ls(t)}e=e.sibling}}function ca(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:ca(a,o,n),Eo(4,o);break;case 1:if(ca(a,o,n),l=o,a=l.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(P){Gt(l,l.return,P)}if(l=o,a=l.updateQueue,a!==null){var g=l.stateNode;try{var E=a.shared.hiddenCallbacks;if(E!==null)for(a.shared.hiddenCallbacks=null,a=0;a<E.length;a++)hf(E[a],g)}catch(P){Gt(l,l.return,P)}}n&&i&64&&jd(o),Ao(o,o.return);break;case 27:Ad(o);case 26:case 5:ca(a,o,n),n&&l===null&&i&4&&Td(o),Ao(o,o.return);break;case 12:ca(a,o,n);break;case 31:ca(a,o,n),n&&i&4&&Rd(a,o);break;case 13:ca(a,o,n),n&&i&4&&Dd(a,o);break;case 22:o.memoizedState===null&&ca(a,o,n),Ao(o,o.return);break;case 30:break;default:ca(a,o,n)}t=t.sibling}}function Ac(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&po(n))}function Mc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&po(e))}function Hl(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bd(e,t,n,l),t=t.sibling}function Bd(e,t,n,l){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,l),a&2048&&Eo(9,t);break;case 1:Hl(e,t,n,l);break;case 3:Hl(e,t,n,l),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&po(e)));break;case 12:if(a&2048){Hl(e,t,n,l),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,g=o.onPostCommit;typeof g=="function"&&g(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Gt(t,t.return,E)}}else Hl(e,t,n,l);break;case 31:Hl(e,t,n,l);break;case 13:Hl(e,t,n,l);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?Hl(e,t,n,l):Mo(e,t):o._visibility&2?Hl(e,t,n,l):(o._visibility|=2,_s(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Ac(i,t);break;case 24:Hl(e,t,n,l),a&2048&&Mc(t.alternate,t);break;default:Hl(e,t,n,l)}}function _s(e,t,n,l,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,i=t,g=n,E=l,P=i.flags;switch(i.tag){case 0:case 11:case 15:_s(o,i,g,E,a),Eo(8,i);break;case 23:break;case 22:var ue=i.stateNode;i.memoizedState!==null?ue._visibility&2?_s(o,i,g,E,a):Mo(o,i):(ue._visibility|=2,_s(o,i,g,E,a)),a&&P&2048&&Ac(i.alternate,i);break;case 24:_s(o,i,g,E,a),a&&P&2048&&Mc(i.alternate,i);break;default:_s(o,i,g,E,a)}t=t.sibling}}function Mo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,a=l.flags;switch(l.tag){case 22:Mo(n,l),a&2048&&Ac(l.alternate,l);break;case 24:Mo(n,l),a&2048&&Mc(l.alternate,l);break;default:Mo(n,l)}t=t.sibling}}var ko=8192;function Bs(e,t,n){if(e.subtreeFlags&ko)for(e=e.child;e!==null;)Hd(e,t,n),e=e.sibling}function Hd(e,t,n){switch(e.tag){case 26:Bs(e,t,n),e.flags&ko&&e.memoizedState!==null&&ug(n,Bl,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,t,n);break;case 3:case 4:var l=Bl;Bl=Jr(e.stateNode.containerInfo),Bs(e,t,n),Bl=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ko,ko=16777216,Bs(e,t,n),ko=l):Bs(e,t,n));break;default:Bs(e,t,n)}}function Ud(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Lo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Dn=l,Yd(l,e)}Ud(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qd(e),e=e.sibling}function qd(e){switch(e.tag){case 0:case 11:case 15:Lo(e),e.flags&2048&&Na(9,e,e.return);break;case 3:Lo(e);break;case 12:Lo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,_r(e)):Lo(e);break;default:Lo(e)}}function _r(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Dn=l,Yd(l,e)}Ud(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Na(8,t,t.return),_r(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,_r(t));break;default:_r(t)}e=e.sibling}}function Yd(e,t){for(;Dn!==null;){var n=Dn;switch(n.tag){case 0:case 11:case 15:Na(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:po(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Dn=l;else e:for(n=e;Dn!==null;){l=Dn;var a=l.sibling,o=l.return;if(Ld(l),l===n){Dn=null;break e}if(a!==null){a.return=o,Dn=a;break e}Dn=o}}}var Cp={getCacheForType:function(e){var t=Bn(yn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Bn(yn).controller.signal}},Tp=typeof WeakMap=="function"?WeakMap:Map,qt=0,Wt=null,Nt=null,Et=0,$t=0,hl=null,ja=!1,Hs=!1,kc=!1,ua=0,un=0,Ca=0,as=0,Lc=0,pl=0,Us=0,zo=null,ol=null,zc=!1,Br=0,Xd=0,Hr=1/0,Ur=null,Ta=null,An=0,Ea=null,qs=null,fa=0,Rc=0,Dc=null,$d=null,Ro=0,Oc=null;function gl(){return(qt&2)!==0&&Et!==0?Et&-Et:k.T!==null?Yc():on()}function Gd(){if(pl===0)if((Et&536870912)===0||Mt){var e=Ln;Ln<<=1,(Ln&3932160)===0&&(Ln=262144),pl=e}else pl=536870912;return e=fl.current,e!==null&&(e.flags|=32),pl}function rl(e,t,n){(e===Wt&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),Aa(e,Et,pl,!1)),Yn(e,n),((qt&2)===0||e!==Wt)&&(e===Wt&&((qt&2)===0&&(as|=n),un===4&&Aa(e,Et,pl,!1)),Zl(e))}function Vd(e,t,n){if((qt&6)!==0)throw Error(c(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||qn(e,t),a=l?Mp(e,t):Bc(e,t,!0),o=l;do{if(a===0){Hs&&!l&&Aa(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Ep(n)){a=Bc(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var g=e;a=zo;var E=g.current.memoizedState.isDehydrated;if(E&&(Ys(g,i).flags|=256),i=Bc(g,i,!1),i!==2){if(kc&&!E){g.errorRecoveryDisabledLanes|=o,as|=o,a=4;break e}o=ol,ol=a,o!==null&&(ol===null?ol=o:ol.push.apply(ol,o))}a=i}if(o=!1,a!==2)continue}}if(a===1){Ys(e,0),Aa(e,t,0,!0);break}e:{switch(l=e,o=a,o){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Aa(l,t,pl,!ja);break e;case 2:ol=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(a=Br+300-Dt(),10<a)){if(Aa(l,t,pl,!ja),Kn(l,0,!0)!==0)break e;fa=t,l.timeoutHandle=Sh(Qd.bind(null,l,n,ol,Ur,zc,t,pl,as,Us,ja,o,"Throttled",-0,0),a);break e}Qd(l,n,ol,Ur,zc,t,pl,as,Us,ja,o,null,-0,0)}}break}while(!0);Zl(e)}function Qd(e,t,n,l,a,o,i,g,E,P,ue,xe,te,ae){if(e.timeoutHandle=-1,xe=t.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wl},Hd(t,o,xe);var $e=(o&62914560)===o?Br-Dt():(o&4194048)===o?Xd-Dt():0;if($e=fg(xe,$e),$e!==null){fa=o,e.cancelPendingCommit=$e(eh.bind(null,e,t,o,n,l,a,i,g,E,ue,xe,null,te,ae)),Aa(e,o,i,!P);return}}eh(e,t,o,n,l,a,i,g,E)}function Ep(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var a=n[l],o=a.getSnapshot;a=a.value;try{if(!cl(o(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Aa(e,t,n,l){t&=~Lc,t&=~as,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var a=t;0<a;){var o=31-Ut(a),i=1<<o;l[o]=-1,a&=~i}n!==0&&yl(e,n,t)}function qr(){return(qt&6)===0?(Do(0),!1):!0}function _c(){if(Nt!==null){if($t===0)var e=Nt.return;else e=Nt,ea=Ja=null,Ii(e),Ls=null,mo=0,e=Nt;for(;e!==null;)Nd(e.alternate,e),e=e.return;Nt=null}}function Ys(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zp(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),fa=0,_c(),Wt=e,Nt=n=Il(e.current,null),Et=t,$t=0,hl=null,ja=!1,Hs=qn(e,t),kc=!1,Us=pl=Lc=as=Ca=un=0,ol=zo=null,zc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var a=31-Ut(l),o=1<<a;t|=e[a],l&=~o}return ua=t,rr(),n}function Zd(e,t){ht=null,k.H=jo,t===ks||t===gr?(t=cf(),$t=3):t===qi?(t=cf(),$t=4):$t=t===pc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,hl=t,Nt===null&&(un=1,Mr(e,Nl(t,e.current)))}function Kd(){var e=fl.current;return e===null?!0:(Et&4194048)===Et?El===null:(Et&62914560)===Et||(Et&536870912)!==0?e===El:!1}function Jd(){var e=k.H;return k.H=jo,e===null?jo:e}function Wd(){var e=k.A;return k.A=Cp,e}function Yr(){un=4,ja||(Et&4194048)!==Et&&fl.current!==null||(Hs=!0),(Ca&134217727)===0&&(as&134217727)===0||Wt===null||Aa(Wt,Et,pl,!1)}function Bc(e,t,n){var l=qt;qt|=2;var a=Jd(),o=Wd();(Wt!==e||Et!==t)&&(Ur=null,Ys(e,t)),t=!1;var i=un;e:do try{if($t!==0&&Nt!==null){var g=Nt,E=hl;switch($t){case 8:_c(),i=6;break e;case 3:case 2:case 9:case 6:fl.current===null&&(t=!0);var P=$t;if($t=0,hl=null,Xs(e,g,E,P),n&&Hs){i=0;break e}break;default:P=$t,$t=0,hl=null,Xs(e,g,E,P)}}Ap(),i=un;break}catch(ue){Zd(e,ue)}while(!0);return t&&e.shellSuspendCounter++,ea=Ja=null,qt=l,k.H=a,k.A=o,Nt===null&&(Wt=null,Et=0,rr()),i}function Ap(){for(;Nt!==null;)Fd(Nt)}function Mp(e,t){var n=qt;qt|=2;var l=Jd(),a=Wd();Wt!==e||Et!==t?(Ur=null,Hr=Dt()+500,Ys(e,t)):Hs=qn(e,t);e:do try{if($t!==0&&Nt!==null){t=Nt;var o=hl;t:switch($t){case 1:$t=0,hl=null,Xs(e,t,o,1);break;case 2:case 9:if(of(o)){$t=0,hl=null,Id(t);break}t=function(){$t!==2&&$t!==9||Wt!==e||($t=7),Zl(e)},o.then(t,t);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:of(o)?($t=0,hl=null,Id(t)):($t=0,hl=null,Xs(e,t,o,7));break;case 5:var i=null;switch(Nt.tag){case 26:i=Nt.memoizedState;case 5:case 27:var g=Nt;if(i?Bh(i):g.stateNode.complete){$t=0,hl=null;var E=g.sibling;if(E!==null)Nt=E;else{var P=g.return;P!==null?(Nt=P,Xr(P)):Nt=null}break t}}$t=0,hl=null,Xs(e,t,o,5);break;case 6:$t=0,hl=null,Xs(e,t,o,6);break;case 8:_c(),un=6;break e;default:throw Error(c(462))}}kp();break}catch(ue){Zd(e,ue)}while(!0);return ea=Ja=null,k.H=l,k.A=a,qt=n,Nt!==null?0:(Wt=null,Et=0,rr(),un)}function kp(){for(;Nt!==null&&!dt();)Fd(Nt)}function Fd(e){var t=wd(e.alternate,e,ua);e.memoizedProps=e.pendingProps,t===null?Xr(e):Nt=t}function Id(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=gd(n,t,t.pendingProps,t.type,void 0,Et);break;case 11:t=gd(n,t,t.pendingProps,t.type.render,t.ref,Et);break;case 5:Ii(t);default:Nd(n,t),t=Nt=Ju(t,ua),t=wd(n,t,ua)}e.memoizedProps=e.pendingProps,t===null?Xr(e):Nt=t}function Xs(e,t,n,l){ea=Ja=null,Ii(t),Ls=null,mo=0;var a=t.return;try{if(yp(e,a,t,n,Et)){un=1,Mr(e,Nl(n,e.current)),Nt=null;return}}catch(o){if(a!==null)throw Nt=a,o;un=1,Mr(e,Nl(n,e.current)),Nt=null;return}t.flags&32768?(Mt||l===1?e=!0:Hs||(Et&536870912)!==0?e=!1:(ja=e=!0,(l===2||l===9||l===3||l===6)&&(l=fl.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pd(t,e)):Xr(t)}function Xr(e){var t=e;do{if((t.flags&32768)!==0){Pd(t,ja);return}e=t.return;var n=wp(t.alternate,t,ua);if(n!==null){Nt=n;return}if(t=t.sibling,t!==null){Nt=t;return}Nt=t=e}while(t!==null);un===0&&(un=5)}function Pd(e,t){do{var n=Sp(e.alternate,e);if(n!==null){n.flags&=32767,Nt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=n}while(e!==null);un=6,Nt=null}function eh(e,t,n,l,a,o,i,g,E){e.cancelPendingCommit=null;do $r();while(An!==0);if((qt&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(o=t.lanes|t.childLanes,o|=Ci,xl(e,n,o,i,g,E),e===Wt&&(Nt=Wt=null,Et=0),qs=t,Ea=e,fa=n,Rc=o,Dc=a,$d=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Dp(yt,function(){return sh(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,a=F.p,F.p=2,i=qt,qt|=4;try{Np(e,t,n)}finally{qt=i,F.p=a,k.T=l}}An=1,th(),nh(),lh()}}function th(){if(An===1){An=0;var e=Ea,t=qs,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=k.T,k.T=null;var l=F.p;F.p=2;var a=qt;qt|=4;try{Od(t,e);var o=Jc,i=qu(e.containerInfo),g=o.focusedElem,E=o.selectionRange;if(i!==g&&g&&g.ownerDocument&&Uu(g.ownerDocument.documentElement,g)){if(E!==null&&vi(g)){var P=E.start,ue=E.end;if(ue===void 0&&(ue=P),"selectionStart"in g)g.selectionStart=P,g.selectionEnd=Math.min(ue,g.value.length);else{var xe=g.ownerDocument||document,te=xe&&xe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),$e=g.textContent.length,tt=Math.min(E.start,$e),Kt=E.end===void 0?tt:Math.min(E.end,$e);!ae.extend&&tt>Kt&&(i=Kt,Kt=tt,tt=i);var G=Hu(g,tt),R=Hu(g,Kt);if(G&&R&&(ae.rangeCount!==1||ae.anchorNode!==G.node||ae.anchorOffset!==G.offset||ae.focusNode!==R.node||ae.focusOffset!==R.offset)){var I=xe.createRange();I.setStart(G.node,G.offset),ae.removeAllRanges(),tt>Kt?(ae.addRange(I),ae.extend(R.node,R.offset)):(I.setEnd(R.node,R.offset),ae.addRange(I))}}}}for(xe=[],ae=g;ae=ae.parentNode;)ae.nodeType===1&&xe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<xe.length;g++){var pe=xe[g];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}ti=!!Kc,Jc=Kc=null}finally{qt=a,F.p=l,k.T=n}}e.current=t,An=2}}function nh(){if(An===2){An=0;var e=Ea,t=qs,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=k.T,k.T=null;var l=F.p;F.p=2;var a=qt;qt|=4;try{kd(e,t.alternate,t)}finally{qt=a,F.p=l,k.T=n}}An=3}}function lh(){if(An===4||An===3){An=0,ln();var e=Ea,t=qs,n=fa,l=$d;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?An=5:(An=0,qs=Ea=null,ah(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Ta=null),Pn(n),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Pt,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=k.T,a=F.p,F.p=2,k.T=null;try{for(var o=e.onRecoverableError,i=0;i<l.length;i++){var g=l[i];o(g.value,{componentStack:g.stack})}}finally{k.T=t,F.p=a}}(fa&3)!==0&&$r(),Zl(e),a=e.pendingLanes,(n&261930)!==0&&(a&42)!==0?e===Oc?Ro++:(Ro=0,Oc=e):Ro=0,Do(0)}}function ah(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,po(t)))}function $r(){return th(),nh(),lh(),sh()}function sh(){if(An!==5)return!1;var e=Ea,t=Rc;Rc=0;var n=Pn(fa),l=k.T,a=F.p;try{F.p=32>n?32:n,k.T=null,n=Dc,Dc=null;var o=Ea,i=fa;if(An=0,qs=Ea=null,fa=0,(qt&6)!==0)throw Error(c(331));var g=qt;if(qt|=4,qd(o.current),Bd(o,o.current,i,n),qt=g,Do(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Pt,o)}catch{}return!0}finally{F.p=a,k.T=l,ah(e,t)}}function oh(e,t,n){t=Nl(n,t),t=hc(e.stateNode,t,2),e=va(e,t,2),e!==null&&(Yn(e,2),Zl(e))}function Gt(e,t,n){if(e.tag===3)oh(e,e,n);else for(;t!==null;){if(t.tag===3){oh(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ta===null||!Ta.has(l))){e=Nl(n,e),n=rd(2),l=va(t,n,2),l!==null&&(id(n,l,t,e),Yn(l,2),Zl(l));break}}t=t.return}}function Hc(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Tp;var a=new Set;l.set(t,a)}else a=l.get(t),a===void 0&&(a=new Set,l.set(t,a));a.has(n)||(kc=!0,a.add(n),e=Lp.bind(null,e,t,n),t.then(e,e))}function Lp(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Wt===e&&(Et&n)===n&&(un===4||un===3&&(Et&62914560)===Et&&300>Dt()-Br?(qt&2)===0&&Ys(e,0):Lc|=n,Us===Et&&(Us=0)),Zl(e)}function rh(e,t){t===0&&(t=Je()),e=Qa(e,t),e!==null&&(Yn(e,t),Zl(e))}function zp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rh(e,n)}function Rp(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),rh(e,n)}function Dp(e,t){return Rt(e,t)}var Gr=null,$s=null,Uc=!1,Vr=!1,qc=!1,Ma=0;function Zl(e){e!==$s&&e.next===null&&($s===null?Gr=$s=e:$s=$s.next=e),Vr=!0,Uc||(Uc=!0,_p())}function Do(e,t){if(!qc&&Vr){qc=!0;do for(var n=!1,l=Gr;l!==null;){if(e!==0){var a=l.pendingLanes;if(a===0)var o=0;else{var i=l.suspendedLanes,g=l.pingedLanes;o=(1<<31-Ut(42|e)+1)-1,o&=a&~(i&~g),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,fh(l,o))}else o=Et,o=Kn(l,l===Wt?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||qn(l,o)||(n=!0,fh(l,o));l=l.next}while(n);qc=!1}}function Op(){ih()}function ih(){Vr=Uc=!1;var e=0;Ma!==0&&Qp()&&(e=Ma);for(var t=Dt(),n=null,l=Gr;l!==null;){var a=l.next,o=ch(l,t);o===0?(l.next=null,n===null?Gr=a:n.next=a,a===null&&($s=n)):(n=l,(e!==0||(o&3)!==0)&&(Vr=!0)),l=a}An!==0&&An!==5||Do(e),Ma!==0&&(Ma=0)}function ch(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-Ut(o),g=1<<i,E=a[i];E===-1?((g&n)===0||(g&l)!==0)&&(a[i]=ml(g,t)):E<=t&&(e.expiredLanes|=g),o&=~g}if(t=Wt,n=Et,n=Kn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&($t===2||$t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Lt(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||qn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Lt(l),Pn(n)){case 2:case 8:n=gn;break;case 32:n=yt;break;case 268435456:n=In;break;default:n=yt}return l=uh.bind(null,e),n=Rt(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Lt(l),e.callbackPriority=2,e.callbackNode=null,2}function uh(e,t){if(An!==0&&An!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if($r()&&e.callbackNode!==n)return null;var l=Et;return l=Kn(e,e===Wt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Vd(e,l,t),ch(e,Dt()),e.callbackNode!=null&&e.callbackNode===n?uh.bind(null,e):null)}function fh(e,t){if($r())return null;Vd(e,t,!0)}function _p(){Kp(function(){(qt&6)!==0?Rt(Zn,Op):ih()})}function Yc(){if(Ma===0){var e=As;e===0&&(e=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ma=e}return Ma}function dh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:us(""+e)}function hh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Bp(e,t,n,l,a){if(t==="submit"&&n&&n.stateNode===a){var o=dh((a[Ue]||null).action),i=l.submitter;i&&(t=(t=i[Ue]||null)?dh(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var g=new gs("action","action",null,l,a);e.push({event:g,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ma!==0){var E=i?hh(a,i):new FormData(a);rc(n,{pending:!0,data:E,method:a.method,action:o},null,E)}}else typeof o=="function"&&(g.preventDefault(),E=i?hh(a,i):new FormData(a),rc(n,{pending:!0,data:E,method:a.method,action:o},o,E))},currentTarget:a}]})}}for(var Xc=0;Xc<ji.length;Xc++){var $c=ji[Xc],Hp=$c.toLowerCase(),Up=$c[0].toUpperCase()+$c.slice(1);_l(Hp,"on"+Up)}_l($u,"onAnimationEnd"),_l(Gu,"onAnimationIteration"),_l(Vu,"onAnimationStart"),_l("dblclick","onDoubleClick"),_l("focusin","onFocus"),_l("focusout","onBlur"),_l(tp,"onTransitionRun"),_l(np,"onTransitionStart"),_l(lp,"onTransitionCancel"),_l(Qu,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oo));function ph(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],a=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var i=l.length-1;0<=i;i--){var g=l[i],E=g.instance,P=g.currentTarget;if(g=g.listener,E!==o&&a.isPropagationStopped())break e;o=g,a.currentTarget=P;try{o(a)}catch(ue){or(ue)}a.currentTarget=null,o=E}else for(i=0;i<l.length;i++){if(g=l[i],E=g.instance,P=g.currentTarget,g=g.listener,E!==o&&a.isPropagationStopped())break e;o=g,a.currentTarget=P;try{o(a)}catch(ue){or(ue)}a.currentTarget=null,o=E}}}}function jt(e,t){var n=t[Jt];n===void 0&&(n=t[Jt]=new Set);var l=e+"__bubble";n.has(l)||(gh(t,e,2,!1),n.add(l))}function Gc(e,t,n){var l=0;t&&(l|=4),gh(n,e,l,t)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function Vc(e){if(!e[Qr]){e[Qr]=!0,me.forEach(function(n){n!=="selectionchange"&&(qp.has(n)||Gc(n,!1,e),Gc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qr]||(t[Qr]=!0,Gc("selectionchange",!1,t))}}function gh(e,t,n,l){switch(Gh(t)){case 2:var a=pg;break;case 8:a=gg;break;default:a=ou}n=a.bind(null,t,n,e),a=void 0,!lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),l?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Qc(e,t,n,l,a){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var i=l.tag;if(i===3||i===4){var g=l.stateNode.containerInfo;if(g===a)break;if(i===4)for(i=l.return;i!==null;){var E=i.tag;if((E===3||E===4)&&i.stateNode.containerInfo===a)return;i=i.return}for(;g!==null;){if(i=ne(g),i===null)return;if(E=i.tag,E===5||E===6||E===26||E===27){l=o=i;continue e}g=g.parentNode}}l=l.return}tr(function(){var P=o,ue=no(n),xe=[];e:{var te=Zu.get(e);if(te!==void 0){var ae=gs,$e=e;switch(e){case"keypress":if(hs(n)===0)break e;case"keydown":case"keyup":ae=Xe;break;case"focusin":$e="focus",ae=v;break;case"focusout":$e="blur",ae=v;break;case"beforeblur":case"afterblur":ae=v;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=mi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Te;break;case $u:case Gu:case Vu:ae=B;break;case Qu:ae=Me;break;case"scroll":case"scrollend":ae=pi;break;case"wheel":ae=ct;break;case"copy":case"cut":case"paste":ae=V;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ze;break;case"toggle":case"beforetoggle":ae=ft}var tt=(t&4)!==0,Kt=!tt&&(e==="scroll"||e==="scrollend"),G=tt?te!==null?te+"Capture":null:te;tt=[];for(var R=P,I;R!==null;){var pe=R;if(I=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||I===null||G===null||(pe=qa(R,G),pe!=null&&tt.push(_o(R,pe,I))),Kt)break;R=R.return}0<tt.length&&(te=new ae(te,$e,null,n,ue),xe.push({event:te,listeners:tt}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",te&&n!==to&&($e=n.relatedTarget||n.fromElement)&&(ne($e)||$e[Ie]))break e;if((ae||te)&&(te=ue.window===ue?ue:(te=ue.ownerDocument)?te.defaultView||te.parentWindow:window,ae?($e=n.relatedTarget||n.toElement,ae=P,$e=$e?ne($e):null,$e!==null&&(Kt=x($e),tt=$e.tag,$e!==Kt||tt!==5&&tt!==27&&tt!==6)&&($e=null)):(ae=null,$e=P),ae!==$e)){if(tt=ar,pe="onMouseLeave",G="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(tt=Ze,pe="onPointerLeave",G="onPointerEnter",R="pointer"),Kt=ae==null?te:he(ae),I=$e==null?te:he($e),te=new tt(pe,R+"leave",ae,n,ue),te.target=Kt,te.relatedTarget=I,pe=null,ne(ue)===P&&(tt=new tt(G,R+"enter",$e,n,ue),tt.target=I,tt.relatedTarget=Kt,pe=tt),Kt=pe,ae&&$e)t:{for(tt=Yp,G=ae,R=$e,I=0,pe=G;pe;pe=tt(pe))I++;pe=0;for(var We=R;We;We=tt(We))pe++;for(;0<I-pe;)G=tt(G),I--;for(;0<pe-I;)R=tt(R),pe--;for(;I--;){if(G===R||R!==null&&G===R.alternate){tt=G;break t}G=tt(G),R=tt(R)}tt=null}else tt=null;ae!==null&&mh(xe,te,ae,tt,!1),$e!==null&&Kt!==null&&mh(xe,Kt,$e,tt,!0)}}e:{if(te=P?he(P):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var _t=zu;else if(ys(te))if(Ru)_t=I0;else{_t=W0;var Ke=J0}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?P&&cs(P.elementType)&&(_t=zu):_t=F0;if(_t&&(_t=_t(e,P))){bs(xe,_t,n,ue);break e}Ke&&Ke(e,te,P),e==="focusout"&&P&&te.type==="number"&&P.memoizedProps.value!=null&&Yl(te,"number",te.value)}switch(Ke=P?he(P):window,e){case"focusin":(ys(Ke)||Ke.contentEditable==="true")&&(vs=Ke,wi=P,uo=null);break;case"focusout":uo=wi=vs=null;break;case"mousedown":Si=!0;break;case"contextmenu":case"mouseup":case"dragend":Si=!1,Yu(xe,n,ue);break;case"selectionchange":if(ep)break;case"keydown":case"keyup":Yu(xe,n,ue)}var pt;if(rn)e:{switch(e){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else $l?Wn(e,n)&&(At="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(At="onCompositionStart");At&&(tl&&n.locale!=="ko"&&($l||At!=="onCompositionStart"?At==="onCompositionEnd"&&$l&&(pt=nr()):(Ol=ue,ao="value"in Ol?Ol.value:Ol.textContent,$l=!0)),Ke=Zr(P,At),0<Ke.length&&(At=new X(At,e,null,n,ue),xe.push({event:At,listeners:Ke}),pt?At.data=pt:(pt=xs(n),pt!==null&&(At.data=pt)))),(pt=an?xi(e,n):ro(e,n))&&(At=Zr(P,"onBeforeInput"),0<At.length&&(Ke=new X("onBeforeInput","beforeinput",null,n,ue),xe.push({event:Ke,listeners:At}),Ke.data=pt)),Bp(xe,e,P,n,ue)}ph(xe,t)})}function _o(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zr(e,t){for(var n=t+"Capture",l=[];e!==null;){var a=e,o=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||o===null||(a=qa(e,n),a!=null&&l.unshift(_o(e,a,o)),a=qa(e,t),a!=null&&l.push(_o(e,a,o))),e.tag===3)return l;e=e.return}return[]}function Yp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mh(e,t,n,l,a){for(var o=t._reactName,i=[];n!==null&&n!==l;){var g=n,E=g.alternate,P=g.stateNode;if(g=g.tag,E!==null&&E===l)break;g!==5&&g!==26&&g!==27||P===null||(E=P,a?(P=qa(n,o),P!=null&&i.unshift(_o(n,P,E))):a||(P=qa(n,o),P!=null&&i.push(_o(n,P,E)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Xp=/\r\n?/g,$p=/\u0000|\uFFFD/g;function xh(e){return(typeof e=="string"?e:""+e).replace(Xp,`
`).replace($p,"")}function yh(e,t){return t=xh(t),xh(e)===t}function Zt(e,t,n,l,a,o){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||En(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&En(e,""+l);break;case"className":mt(e,"class",l);break;case"tabIndex":mt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":mt(e,n,l);break;case"style":Io(e,l,o);break;case"data":if(t!=="object"){mt(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=us(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Zt(e,t,"name",a.name,a,null),Zt(e,t,"formEncType",a.formEncType,a,null),Zt(e,t,"formMethod",a.formMethod,a,null),Zt(e,t,"formTarget",a.formTarget,a,null)):(Zt(e,t,"encType",a.encType,a,null),Zt(e,t,"method",a.method,a,null),Zt(e,t,"target",a.target,a,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=us(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=wl);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=us(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":jt("beforetoggle",e),jt("toggle",e),it(e,"popover",l);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":it(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Po.get(n)||n,it(e,n,l))}}function Zc(e,t,n,l,a,o){switch(n){case"style":Io(e,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof l=="string"?En(e,l):(typeof l=="number"||typeof l=="bigint")&&En(e,""+l);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=wl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!je.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),o=e[Ue]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,a),typeof l=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,a);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):it(e,n,l)}}}function Un(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var l=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var i=n[o];if(i!=null)switch(o){case"src":l=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Zt(e,t,o,i,n,null)}}a&&Zt(e,t,"srcSet",n.srcSet,n,null),l&&Zt(e,t,"src",n.src,n,null);return;case"input":jt("invalid",e);var g=o=i=a=null,E=null,P=null;for(l in n)if(n.hasOwnProperty(l)){var ue=n[l];if(ue!=null)switch(l){case"name":a=ue;break;case"type":i=ue;break;case"checked":E=ue;break;case"defaultChecked":P=ue;break;case"value":o=ue;break;case"defaultValue":g=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(c(137,t));break;default:Zt(e,t,l,ue,n,null)}}el(e,o,g,E,P,i,a,!1);return;case"select":jt("invalid",e),l=i=o=null;for(a in n)if(n.hasOwnProperty(a)&&(g=n[a],g!=null))switch(a){case"value":o=g;break;case"defaultValue":i=g;break;case"multiple":l=g;default:Zt(e,t,a,g,n,null)}t=o,n=i,e.multiple=!!l,t!=null?Xl(e,!!l,t,!1):n!=null&&Xl(e,!!l,n,!0);return;case"textarea":jt("invalid",e),o=a=l=null;for(i in n)if(n.hasOwnProperty(i)&&(g=n[i],g!=null))switch(i){case"value":l=g;break;case"defaultValue":a=g;break;case"children":o=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(c(91));break;default:Zt(e,t,i,g,n,null)}eo(e,l,a,o);return;case"option":for(E in n)if(n.hasOwnProperty(E)&&(l=n[E],l!=null))switch(E){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(e,t,E,l,n,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(l=0;l<Oo.length;l++)jt(Oo[l],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(l=n[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Zt(e,t,P,l,n,null)}return;default:if(cs(t)){for(ue in n)n.hasOwnProperty(ue)&&(l=n[ue],l!==void 0&&Zc(e,t,ue,l,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(l=n[g],l!=null&&Zt(e,t,g,l,n,null))}function Gp(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,i=null,g=null,E=null,P=null,ue=null;for(ae in n){var xe=n[ae];if(n.hasOwnProperty(ae)&&xe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":E=xe;default:l.hasOwnProperty(ae)||Zt(e,t,ae,null,l,xe)}}for(var te in l){var ae=l[te];if(xe=n[te],l.hasOwnProperty(te)&&(ae!=null||xe!=null))switch(te){case"type":o=ae;break;case"name":a=ae;break;case"checked":P=ae;break;case"defaultChecked":ue=ae;break;case"value":i=ae;break;case"defaultValue":g=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(c(137,t));break;default:ae!==xe&&Zt(e,t,te,ae,l,xe)}}Rn(e,i,g,E,P,ue,o,a);return;case"select":ae=i=g=te=null;for(o in n)if(E=n[o],n.hasOwnProperty(o)&&E!=null)switch(o){case"value":break;case"multiple":ae=E;default:l.hasOwnProperty(o)||Zt(e,t,o,null,l,E)}for(a in l)if(o=l[a],E=n[a],l.hasOwnProperty(a)&&(o!=null||E!=null))switch(a){case"value":te=o;break;case"defaultValue":g=o;break;case"multiple":i=o;default:o!==E&&Zt(e,t,a,o,l,E)}t=g,n=i,l=ae,te!=null?Xl(e,!!n,te,!1):!!l!=!!n&&(t!=null?Xl(e,!!n,t,!0):Xl(e,!!n,n?[]:"",!1));return;case"textarea":ae=te=null;for(g in n)if(a=n[g],n.hasOwnProperty(g)&&a!=null&&!l.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Zt(e,t,g,null,l,a)}for(i in l)if(a=l[i],o=n[i],l.hasOwnProperty(i)&&(a!=null||o!=null))switch(i){case"value":te=a;break;case"defaultValue":ae=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(c(91));break;default:a!==o&&Zt(e,t,i,a,l,o)}Ua(e,te,ae);return;case"option":for(var $e in n)if(te=n[$e],n.hasOwnProperty($e)&&te!=null&&!l.hasOwnProperty($e))switch($e){case"selected":e.selected=!1;break;default:Zt(e,t,$e,null,l,te)}for(E in l)if(te=l[E],ae=n[E],l.hasOwnProperty(E)&&te!==ae&&(te!=null||ae!=null))switch(E){case"selected":e.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Zt(e,t,E,te,l,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in n)te=n[tt],n.hasOwnProperty(tt)&&te!=null&&!l.hasOwnProperty(tt)&&Zt(e,t,tt,null,l,te);for(P in l)if(te=l[P],ae=n[P],l.hasOwnProperty(P)&&te!==ae&&(te!=null||ae!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(c(137,t));break;default:Zt(e,t,P,te,l,ae)}return;default:if(cs(t)){for(var Kt in n)te=n[Kt],n.hasOwnProperty(Kt)&&te!==void 0&&!l.hasOwnProperty(Kt)&&Zc(e,t,Kt,void 0,l,te);for(ue in l)te=l[ue],ae=n[ue],!l.hasOwnProperty(ue)||te===ae||te===void 0&&ae===void 0||Zc(e,t,ue,te,l,ae);return}}for(var G in n)te=n[G],n.hasOwnProperty(G)&&te!=null&&!l.hasOwnProperty(G)&&Zt(e,t,G,null,l,te);for(xe in l)te=l[xe],ae=n[xe],!l.hasOwnProperty(xe)||te===ae||te==null&&ae==null||Zt(e,t,xe,te,l,ae)}function bh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var a=n[l],o=a.transferSize,i=a.initiatorType,g=a.duration;if(o&&g&&bh(i)){for(i=0,g=a.responseEnd,l+=1;l<n.length;l++){var E=n[l],P=E.startTime;if(P>g)break;var ue=E.transferSize,xe=E.initiatorType;ue&&bh(xe)&&(E=E.responseEnd,i+=ue*(E<g?1:(g-P)/(E-P)))}if(--l,t+=8*(o+i)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Kc=null,Jc=null;function Kr(e){return e.nodeType===9?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fc=null;function Qp(){var e=window.event;return e&&e.type==="popstate"?e===Fc?!1:(Fc=e,!0):(Fc=null,!1)}var Sh=typeof setTimeout=="function"?setTimeout:void 0,Zp=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,Kp=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(Jp)}:Sh;function Jp(e){setTimeout(function(){throw e})}function ka(e){return e==="head"}function jh(e,t){var n=t,l=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(a),Zs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Bo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Bo(n);for(var o=n.firstChild;o;){var i=o.nextSibling,g=o.nodeName;o[il]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=i}}else n==="body"&&Bo(e.ownerDocument.body);n=a}while(n);Zs(t)}function Ch(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Ic(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ic(n),L(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Wp(e,t,n,l){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[il])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Al(e.nextSibling),e===null)break}return null}function Fp(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Al(e.nextSibling),e===null))return null;return e}function Th(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Al(e.nextSibling),e===null))return null;return e}function Pc(e){return e.data==="$?"||e.data==="$~"}function eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ip(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Al(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var tu=null;function Eh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Al(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Ah(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Mh(e,t,n){switch(t=Kr(n),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Bo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);L(e)}var Ml=new Map,kh=new Set;function Jr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=F.d;F.d={f:Pp,r:eg,D:tg,C:ng,L:lg,m:ag,X:og,S:sg,M:rg};function Pp(){var e=da.f(),t=qr();return e||t}function eg(e){var t=re(e);t!==null&&t.tag===5&&t.type==="form"?Zf(t):da.r(e)}var Gs=typeof document>"u"?null:document;function Lh(e,t,n){var l=Gs;if(l&&typeof t=="string"&&t){var a=Yt(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),kh.has(a)||(kh.add(a),e={rel:e,crossOrigin:n,href:t},l.querySelector(a)===null&&(t=l.createElement("link"),Un(t,"link",e),de(t),l.head.appendChild(t)))}}function tg(e){da.D(e),Lh("dns-prefetch",e,null)}function ng(e,t){da.C(e,t),Lh("preconnect",e,t)}function lg(e,t,n){da.L(e,t,n);var l=Gs;if(l&&e&&t){var a='link[rel="preload"][as="'+Yt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Yt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Yt(n.imageSizes)+'"]')):a+='[href="'+Yt(e)+'"]';var o=a;switch(t){case"style":o=Vs(e);break;case"script":o=Qs(e)}Ml.has(o)||(e=M({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ml.set(o,e),l.querySelector(a)!==null||t==="style"&&l.querySelector(Ho(o))||t==="script"&&l.querySelector(Uo(o))||(t=l.createElement("link"),Un(t,"link",e),de(t),l.head.appendChild(t)))}}function ag(e,t){da.m(e,t);var n=Gs;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Yt(l)+'"][href="'+Yt(e)+'"]',o=a;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Qs(e)}if(!Ml.has(o)&&(e=M({rel:"modulepreload",href:e},t),Ml.set(o,e),n.querySelector(a)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Uo(o)))return}l=n.createElement("link"),Un(l,"link",e),de(l),n.head.appendChild(l)}}}function sg(e,t,n){da.S(e,t,n);var l=Gs;if(l&&e){var a=ee(l).hoistableStyles,o=Vs(e);t=t||"default";var i=a.get(o);if(!i){var g={loading:0,preload:null};if(i=l.querySelector(Ho(o)))g.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ml.get(o))&&nu(e,n);var E=i=l.createElement("link");de(E),Un(E,"link",e),E._p=new Promise(function(P,ue){E.onload=P,E.onerror=ue}),E.addEventListener("load",function(){g.loading|=1}),E.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Wr(i,t,l)}i={type:"stylesheet",instance:i,count:1,state:g},a.set(o,i)}}}function og(e,t){da.X(e,t);var n=Gs;if(n&&e){var l=ee(n).hoistableScripts,a=Qs(e),o=l.get(a);o||(o=n.querySelector(Uo(a)),o||(e=M({src:e,async:!0},t),(t=Ml.get(a))&&lu(e,t),o=n.createElement("script"),de(o),Un(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(a,o))}}function rg(e,t){da.M(e,t);var n=Gs;if(n&&e){var l=ee(n).hoistableScripts,a=Qs(e),o=l.get(a);o||(o=n.querySelector(Uo(a)),o||(e=M({src:e,async:!0,type:"module"},t),(t=Ml.get(a))&&lu(e,t),o=n.createElement("script"),de(o),Un(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(a,o))}}function zh(e,t,n,l){var a=(a=H.current)?Jr(a):null;if(!a)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Vs(n.href),n=ee(a).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Vs(n.href);var o=ee(a).hoistableStyles,i=o.get(e);if(i||(a=a.ownerDocument||a,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=a.querySelector(Ho(e)))&&!o._p&&(i.instance=o,i.state.loading=5),Ml.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ml.set(e,n),o||ig(a,e,n,i.state))),t&&l===null)throw Error(c(528,""));return i}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qs(n),n=ee(a).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Vs(e){return'href="'+Yt(e)+'"'}function Ho(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function ig(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Un(t,"link",n),de(t),e.head.appendChild(t))}function Qs(e){return'[src="'+Yt(e)+'"]'}function Uo(e){return"script[async]"+e}function Dh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Yt(n.href)+'"]');if(l)return t.instance=l,de(l),l;var a=M({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),de(l),Un(l,"style",a),Wr(l,n.precedence,e),t.instance=l;case"stylesheet":a=Vs(n.href);var o=e.querySelector(Ho(a));if(o)return t.state.loading|=4,t.instance=o,de(o),o;l=Rh(n),(a=Ml.get(a))&&nu(l,a),o=(e.ownerDocument||e).createElement("link"),de(o);var i=o;return i._p=new Promise(function(g,E){i.onload=g,i.onerror=E}),Un(o,"link",l),t.state.loading|=4,Wr(o,n.precedence,e),t.instance=o;case"script":return o=Qs(n.src),(a=e.querySelector(Uo(o)))?(t.instance=a,de(a),a):(l=n,(a=Ml.get(o))&&(l=M({},n),lu(l,a)),e=e.ownerDocument||e,a=e.createElement("script"),de(a),Un(a,"link",l),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Wr(l,n.precedence,e));return t.instance}function Wr(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=l.length?l[l.length-1]:null,o=a,i=0;i<l.length;i++){var g=l[i];if(g.dataset.precedence===t)o=g;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function nu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fr=null;function Oh(e,t,n){if(Fr===null){var l=new Map,a=Fr=new Map;a.set(n,l)}else a=Fr,l=a.get(n),l||(l=new Map,a.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[il]||o[Z]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var g=l.get(i);g?g.push(o):l.set(i,[o])}}return l}function _h(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function cg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Bh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ug(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var a=Vs(l.href),o=t.querySelector(Ho(a));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ir.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,de(o);return}o=t.ownerDocument||t,l=Rh(l),(a=Ml.get(a))&&nu(l,a),o=o.createElement("link"),de(o);var i=o;i._p=new Promise(function(g,E){i.onload=g,i.onerror=E}),Un(o,"link",l),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ir.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var au=0;function fg(e,t){return e.stylesheets&&e.count===0&&ei(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&ei(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&au===0&&(au=62500*Vp());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ei(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>au?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(a)}}:null}function Ir(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ei(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pr=null;function ei(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pr=new Map,t.forEach(dg,e),Pr=null,Ir.call(e))}function dg(e,t){if(!(t.state.loading&4)){var n=Pr.get(e);if(n)var l=n.get(null);else{n=new Map,Pr.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),l=i)}l&&n.set(null,l)}a=t.instance,i=a.getAttribute("data-precedence"),o=n.get(i)||l,o===l&&n.set(null,a),n.set(i,a),this.count++,l=Ir.bind(this),a.addEventListener("load",l),a.addEventListener("error",l),o?o.parentNode.insertBefore(a,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var qo={$$typeof:De,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function hg(e,t,n,l,a,o,i,g,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tn(0),this.hiddenUpdates=Tn(null),this.identifierPrefix=l,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Hh(e,t,n,l,a,o,i,g,E,P,ue,xe){return e=new hg(e,t,n,i,E,P,ue,xe,g),t=1,o===!0&&(t|=24),o=ul(3,null,null,t),e.current=o,o.stateNode=e,t=Bi(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:n,cache:t},Yi(o),e}function Uh(e){return e?(e=Ns,e):Ns}function qh(e,t,n,l,a,o){a=Uh(a),l.context===null?l.context=a:l.pendingContext=a,l=ba(t),l.payload={element:n},o=o===void 0?null:o,o!==null&&(l.callback=o),n=va(e,l,t),n!==null&&(rl(n,e,t),yo(n,e,t))}function Yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function su(e,t){Yh(e,t),(e=e.alternate)&&Yh(e,t)}function Xh(e){if(e.tag===13||e.tag===31){var t=Qa(e,67108864);t!==null&&rl(t,e,67108864),su(e,67108864)}}function $h(e){if(e.tag===13||e.tag===31){var t=gl();t=Xn(t);var n=Qa(e,t);n!==null&&rl(n,e,t),su(e,t)}}var ti=!0;function pg(e,t,n,l){var a=k.T;k.T=null;var o=F.p;try{F.p=2,ou(e,t,n,l)}finally{F.p=o,k.T=a}}function gg(e,t,n,l){var a=k.T;k.T=null;var o=F.p;try{F.p=8,ou(e,t,n,l)}finally{F.p=o,k.T=a}}function ou(e,t,n,l){if(ti){var a=ru(l);if(a===null)Qc(e,t,l,ni,n),Vh(e,l);else if(xg(a,e,t,n,l))l.stopPropagation();else if(Vh(e,l),t&4&&-1<mg.indexOf(e)){for(;a!==null;){var o=re(a);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Cn(o.pendingLanes);if(i!==0){var g=o;for(g.pendingLanes|=2,g.entangledLanes|=2;i;){var E=1<<31-Ut(i);g.entanglements[1]|=E,i&=~E}Zl(o),(qt&6)===0&&(Hr=Dt()+500,Do(0))}}break;case 31:case 13:g=Qa(o,2),g!==null&&rl(g,o,2),qr(),su(o,2)}if(o=ru(l),o===null&&Qc(e,t,l,ni,n),o===a)break;a=o}a!==null&&l.stopPropagation()}else Qc(e,t,l,null,n)}}function ru(e){return e=no(e),iu(e)}var ni=null;function iu(e){if(ni=null,e=ne(e),e!==null){var t=x(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===31){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ni=e,null}function Gh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mn()){case Zn:return 2;case gn:return 8;case yt:case kn:return 32;case In:return 268435456;default:return 32}default:return 32}}var cu=!1,La=null,za=null,Ra=null,Yo=new Map,Xo=new Map,Da=[],mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vh(e,t){switch(e){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(t.pointerId)}}function $o(e,t,n,l,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:o,targetContainers:[a]},t!==null&&(t=re(t),t!==null&&Xh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xg(e,t,n,l,a){switch(t){case"focusin":return La=$o(La,e,t,n,l,a),!0;case"dragenter":return za=$o(za,e,t,n,l,a),!0;case"mouseover":return Ra=$o(Ra,e,t,n,l,a),!0;case"pointerover":var o=a.pointerId;return Yo.set(o,$o(Yo.get(o)||null,e,t,n,l,a)),!0;case"gotpointercapture":return o=a.pointerId,Xo.set(o,$o(Xo.get(o)||null,e,t,n,l,a)),!0}return!1}function Qh(e){var t=ne(e.target);if(t!==null){var n=x(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,Ul(e.priority,function(){$h(n)});return}}else if(t===31){if(t=d(n),t!==null){e.blockedOn=t,Ul(e.priority,function(){$h(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function li(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ru(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);to=l,n.target.dispatchEvent(l),to=null}else return t=re(n),t!==null&&Xh(t),e.blockedOn=n,!1;t.shift()}return!0}function Zh(e,t,n){li(e)&&n.delete(t)}function yg(){cu=!1,La!==null&&li(La)&&(La=null),za!==null&&li(za)&&(za=null),Ra!==null&&li(Ra)&&(Ra=null),Yo.forEach(Zh),Xo.forEach(Zh)}function ai(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yg)))}var si=null;function Kh(e){si!==e&&(si=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){si===e&&(si=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],a=e[t+2];if(typeof l!="function"){if(iu(l||n)===null)continue;break}var o=re(n);o!==null&&(e.splice(t,3),t-=3,rc(o,{pending:!0,data:a,method:n.method,action:l},l,a))}}))}function Zs(e){function t(E){return ai(E,e)}La!==null&&ai(La,e),za!==null&&ai(za,e),Ra!==null&&ai(Ra,e),Yo.forEach(t),Xo.forEach(t);for(var n=0;n<Da.length;n++){var l=Da[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Da.length&&(n=Da[0],n.blockedOn===null);)Qh(n),n.blockedOn===null&&Da.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var a=n[l],o=n[l+1],i=a[Ue]||null;if(typeof o=="function")i||Kh(n);else if(i){var g=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Ue]||null)g=i.formAction;else if(iu(a)!==null)continue}else g=i.action;typeof g=="function"?n[l+1]=g:(n.splice(l,3),l-=3),Kh(n)}}}function Jh(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(i){return a=i})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function uu(e){this._internalRoot=e}oi.prototype.render=uu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var n=t.current,l=gl();qh(n,l,e,t,null,null)},oi.prototype.unmount=uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qh(e.current,2,null,e,null,null),qr(),t[Ie]=null}};function oi(e){this._internalRoot=e}oi.prototype.unstable_scheduleHydration=function(e){if(e){var t=on();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Da.length&&t!==0&&t<Da[n].priority;n++);Da.splice(n,0,e),n===0&&Qh(e)}};var Wh=h.version;if(Wh!=="19.2.4")throw Error(c(527,Wh,"19.2.4"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=b(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var bg={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ri.isDisabled&&ri.supportsFiber)try{Pt=ri.inject(bg),Ht=ri}catch{}}return Vo.createRoot=function(e,t){if(!p(e))throw Error(c(299));var n=!1,l="",a=ld,o=ad,i=sd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Hh(e,1,!1,null,null,n,l,null,a,o,i,Jh),e[Ie]=t.current,Vc(e),new uu(t)},Vo.hydrateRoot=function(e,t,n){if(!p(e))throw Error(c(299));var l=!1,a="",o=ld,i=ad,g=sd,E=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.formState!==void 0&&(E=n.formState)),t=Hh(e,1,!0,t,n??null,l,a,E,o,i,g,Jh),t.context=Uh(null),n=t.current,l=gl(),l=Xn(l),a=ba(l),a.callback=null,va(n,a,l),n=l,t.current.lanes=n,Yn(t,n),Zl(t),e[Ie]=t.current,Vc(e),new oi(t)},Vo.version="19.2.4",Vo}var o0;function kg(){if(o0)return hu.exports;o0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(h){console.error(h)}}return r(),hu.exports=Mg(),hu.exports}var Lg=kg();const zg=D0(Lg);var q=Eu();const yu=D0(q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=(...r)=>r.filter((h,u,c)=>!!h&&h.trim()!==""&&c.indexOf(h)===u).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(h,u,c)=>c?c.toUpperCase():u.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=r=>{const h=Dg(r);return h.charAt(0).toUpperCase()+h.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Og={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=r=>{for(const h in r)if(h.startsWith("aria-")||h==="role"||h==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=q.forwardRef(({color:r="currentColor",size:h=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:p="",children:x,iconNode:m,...d},S)=>q.createElement("svg",{ref:S,...Og,width:h,height:h,stroke:r,strokeWidth:c?Number(u)*24/Number(h):u,className:_0("lucide",p),...!x&&!_g(d)&&{"aria-hidden":"true"},...d},[...m.map(([b,j])=>q.createElement(b,j)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(r,h)=>{const u=q.forwardRef(({className:c,...p},x)=>q.createElement(Bg,{ref:x,iconNode:h,className:_0(`lucide-${Rg(r0(r))}`,`lucide-${r}`,c),...p}));return u.displayName=r0(r),u};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=[["path",{d:"M19 3H5",key:"1236rx"}],["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m6 15 6 6 6-6",key:"h15q88"}]],Ug=st("arrow-down-from-line",Hg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],i0=st("arrow-up-down",qg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]],Xg=st("arrow-up-from-line",Yg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],c0=st("bold",$g);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],u0=st("chevron-down",Gg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]],Qg=st("contrast",Vg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],f0=st("crop",Zg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jg=st("download",Kg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Fg=st("file-plus",Wg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],B0=st("file-text",Ig);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],em=st("file-up",Pg);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],d0=st("hash",tm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],lm=st("image-plus",nm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sm=st("image",am);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],h0=st("italic",om);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],im=st("layers",rm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],um=st("layout-template",cm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],p0=st("list-ordered",fm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=[["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"M3 10a2 2 0 0 0 2 2h3",key:"1npucw"}],["path",{d:"M3 5v12a2 2 0 0 0 2 2h3",key:"x1gjn2"}]],hm=st("list-tree",dm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],g0=st("list",pm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],mm=st("minimize",gm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M5 12h14",key:"1ays0h"}]],m0=st("minus",xm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],bm=st("mouse-pointer",ym);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],wm=st("move-horizontal",vm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]],Nm=st("move-vertical",Sm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],Cm=st("paint-bucket",jm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],x0=st("panel-left",Tm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],y0=st("panel-right",Em);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],H0=st("plus",Am);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ci=st("refresh-cw",Mm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Lm=st("rotate-ccw",km);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Rm=st("rotate-cw",zm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Om=st("ruler",Dm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bm=st("settings",_m);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],Um=st("shapes",Hm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ym=st("sparkles",qm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],b0=st("square",Xm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Gm=st("sun",$m);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M21 5h.01",key:"wa75ra"}],["path",{d:"M21 12h.01",key:"msek7k"}],["path",{d:"M21 19h.01",key:"qvbq2j"}]],Qm=st("table-of-contents",Vm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Ws=st("text-align-center",Zm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],Fs=st("text-align-end",Km);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],bu=st("text-align-justify",Jm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Is=st("text-align-start",Wm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],v0=st("trash-2",Fm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],w0=st("type",Im);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],S0=st("underline",Pm);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ui=st("x",ex);var tx=O0();const ii=`
@page {
    size: 8.5in 11in;
    margin: 0.5in 0.5in 0.5in 0.375in;
}

* {
    box-sizing: border-box;
}

.page {
    width: 8.5in;
    height: 11in;
    min-height: 11in;
    max-height: 11in;
    padding: calc(0.5in + var(--header-reserve, 0in)) 0.5in calc(0.5in + var(--footer-reserve, 0in)) 0.375in;
    margin: 0 auto 0.5in auto;
    position: relative;
    background: #fff;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    overflow: hidden;
}

/* Ensure images fit within the page */
img {
    max-width: 100%;
    height: auto;
    transition: filter 0.2s ease;
}

/* Style for broken images - visible to user so they can click to fix */
img:not([src]), img[src=""], img.broken-image {
    display: inline-block;
    min-width: 100px;
    min-height: 100px;
    background-color: #f3f4f6;
    border: 2px dashed #9ca3af;
    position: relative;
    content: "Image Not Found (Click to Fix)";
    text-align: center;
    line-height: 100px;
    color: #6b7280;
    font-size: 12px;
    font-family: sans-serif;
}

h1, .book-title {
    font-family: 'Black Ops One', cursive;
    font-size: 28pt;
    text-transform: uppercase;
    text-align: center;
    letter-spacing: 3px;
    margin-bottom: 15px;
    line-height: 1.2;
    margin-top: 0;
}

h2 {
    font-family: 'Roboto', sans-serif;
    font-size: 18pt;
    font-weight: 700;
    margin-top: 20px;
    margin-bottom: 10px;
}

h3, .book-subtitle {
    font-family: 'Roboto', sans-serif;
    font-size: 14pt;
    font-weight: 700;
    font-style: italic;
    margin-bottom: 15px;
    color: #444;
}

p {
    font-family: 'Roboto', sans-serif;
    font-size: 12pt;
    line-height: 1.5;
    margin-bottom: 10px;
}

/* Horizontal rules - make them interactive */
hr {
    border: none;
    border-top: 1px solid #000;
    margin: 15px 0;
    cursor: pointer;
    min-height: 10px;
    padding: 5px 0;
    background: transparent;
}

hr:hover {
    background-color: rgba(141, 85, 241, 0.12);
}

hr:focus, hr[data-selected="true"] {
    outline: 2px dashed #8d55f1;
    outline-offset: 2px;
}

/* --- Shapes --- */
.shape-circle {
    border-radius: 50%;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1 / 1;
    width: fit-content;
    margin: 10px auto;
    min-width: 100px;
    min-height: 100px;
    background-color: var(--shape-bg, #fff);
    border: 2px solid var(--shape-border, #000);
    overflow-wrap: break-word; /* Ensure text wraps */
    cursor: pointer;
}

.shape-pill {
    border-radius: 9999px;
    width: fit-content;
    padding-left: 20px;
    padding-right: 20px;
    margin: 10px auto;
    text-align: center;
    background-color: var(--shape-bg, #fff);
    border: 2px solid var(--shape-border, #000);
    overflow-wrap: break-word;
    cursor: pointer;
}

.shape-speech {
    border-radius: 15px;
    width: fit-content;
    margin: 10px 10px 10px 20px;
    position: relative;
    background-color: var(--shape-bg, #fff);
    border: 2px solid var(--shape-border, #000);
    overflow-wrap: break-word;
    cursor: pointer;
}
/* Speech bubble tail effect using pseudo-element */
.shape-speech::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid var(--shape-border, #000); /* Matches border color */
    z-index: 1;
}
/* Inner triangle to hide border and make it look like outline */
.shape-speech::before {
    content: '';
    position: absolute;
    bottom: -7px; /* Adjusted for better overlap */
    left: 22px;
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 8px solid var(--shape-bg, #fff); /* Matches background */
    z-index: 2;
}

.shape-cloud {
    clip-path: url(#cloud-shape);
    background-color: #efe5ff; /* Light lilac for cloud shape */
    border: none;
    position: relative;
    width: fit-content;
    text-align: center;
    margin: 20px auto;
    padding: 50px 60px; /* Adjust padding for the new shape */
    box-sizing: border-box; /* Ensure padding is included in the element's total width and height */
    overflow-wrap: break-word;
    cursor: pointer;
}
/* Making it bumpy is hard with just CSS on the element itself without breaking text flow. 
   We stick to a rounded box with a "cartoon" thick border and shadow for reliability. */

.mission-box {
    border: 2px solid #000;
    padding: 15px 20px;
    margin: 20px 0;
    background: #fafafa;
    /* font-family removed to preserve user selection */
    overflow-wrap: break-word;
    cursor: pointer;
    box-sizing: border-box;
}

.shape-rectangle {
    /* Identical to mission-box, ensures specific targeting works */
    border: 2px solid #000;
    padding: 15px 20px;
    margin: 20px 0;
    background: #fafafa;
    overflow-wrap: break-word;
    cursor: pointer;
    box-sizing: border-box;
}

/* Allow shapes to be inline-block when applied to spans (text selection) */
span.mission-box, span.shape-circle, span.shape-pill, span.shape-speech, span.shape-cloud, span.shape-rectangle {
    display: inline-block;
    margin: 5px; /* Smaller margin for inline flow */
    vertical-align: middle;
    width: auto; /* Allow auto width */
}

.tracing-line {
    font-family: 'Courier Prime', monospace;
    font-size: 20pt;
    color: #b9a7e6;
    letter-spacing: 6px;
    min-height: 50px;
    line-height: 50px;
    background-image: linear-gradient(#8d55f1 1px, transparent 1px);
    background-size: 100% 50px;
    background-position: 0 48px;
    background-repeat: repeat-y;
    margin-bottom: 10px;
    cursor: text;
    user-select: text;
    -webkit-user-select: text;
}

.tracing-line:empty::before {
    content: '\\00a0';
    color: transparent;
}

/* Writing lines (textarea for handwriting practice) */
.writing-lines, textarea.writing-lines {
    width: 100%;
    min-height: 50px;
    font-family: 'Courier Prime', monospace;
    font-size: 20pt;
    color: #333;
    border: none;
    outline: none;
    resize: vertical;
    background-image: linear-gradient(#8d55f1 1px, transparent 1px), linear-gradient(#dbc9ff 1px, transparent 1px);
    background-size: 100% 50px;
    background-position: 0 48px, 0 24px;
    line-height: 50px;
    padding: 0;
    cursor: text;
}

.writing-lines:focus, textarea.writing-lines:focus {
    outline: 2px solid #8d55f1;
    outline-offset: 2px;
}

.writing-lines:hover, textarea.writing-lines:hover {
    background-color: rgba(141, 85, 241, 0.03);
}

/* Floating text layer (free position) */
.floating-text {
    position: absolute;
    z-index: 5;
    min-width: 120px;
    min-height: 24px;
    padding: 2px 4px;
    background: transparent;
    outline: none;
}

.floating-text:focus {
    outline: 1px dashed #8d55f1;
    outline-offset: 2px;
}

/* --- Page Footer (Numbering) --- */
.page-footer {
    position: absolute;
    bottom: 0.4in; /* Inside the bottom margin */
    left: 0;
    width: 100%;
    text-align: center;
    pointer-events: auto; /* Allow interaction */
    color: #000;
}
.page-footer:hover {
    outline: 2px dashed #f97316;
    cursor: pointer;
}

/* List Styles - Override Tailwind Reset */
ul {
    list-style: disc outside none !important;
    margin-left: 0 !important;
    padding-left: 40px !important;
}
ol {
    list-style: decimal outside none !important;
    margin-left: 0 !important;
    padding-left: 40px !important;
}
li {
    display: list-item !important;
    margin-bottom: 5px;
    padding-left: 5px;
}
`,N0=`
<div class="page">
    <h1 class="book-title">TOP SECRET MISSION</h1>
    <h3 class="book-subtitle">Operation: Creative Writing</h3>
    <hr style="width: 50%; margin: 20px auto; border-top: 2px solid #000;">
    <p>Welcome, Agent. Your mission, should you choose to accept it, is to write a compelling story using the tools provided.</p>
    <div class="mission-box">
        <strong>OBJECTIVE 1:</strong> Replace this text with your opening paragraph.
    </div>
    <p>Good luck.</p>
</div>
`,is={LETTER:{id:"letter",name:'US Letter (8.5" x 11")',width:"8.5in",height:"11in",margins:{top:.5,bottom:.5,left:.375,right:.5}},LETTER_THICK:{id:"letter-thick",name:'US Letter 151-200pp (8.5" x 11")',width:"8.5in",height:"11in",margins:{top:.5,bottom:.5,left:.5,right:.5}},TRADE:{id:"6x9",name:'Trade 110-150pp (6" x 9")',width:"6in",height:"9in",margins:{top:.5,bottom:.5,left:.375,right:.25}},TRADE_THICK:{id:"6x9-thick",name:'Trade 151-200pp (6" x 9")',width:"6in",height:"9in",margins:{top:.5,bottom:.5,left:.5,right:.25}},CUSTOM:{id:"custom",name:"Custom Size",width:"8.5in",height:"11in",margins:{top:.5,bottom:.5,left:.5,right:.5}}},Nu=[{name:"Default",value:"inherit"},{name:"Courier Prime",value:"'Courier Prime', monospace"},{name:"Black Ops One",value:"'Black Ops One', cursive"},{name:"Lobster",value:"'Lobster', cursive"},{name:"Arial",value:"Arial, Helvetica, sans-serif"},{name:"Arial Black",value:"'Arial Black', Gadget, sans-serif"},{name:"Verdana",value:"Verdana, Geneva, sans-serif"},{name:"Tahoma",value:"Tahoma, Geneva, sans-serif"},{name:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif"},{name:"Impact",value:"Impact, Charcoal, sans-serif"},{name:"Helvetica",value:"Helvetica, Arial, sans-serif"},{name:"Optima",value:"Optima, Segoe, 'Segoe UI', Candara, Calibri, Arial, sans-serif"},{name:"Segoe UI",value:"'Segoe UI', Frutiger, 'Frutiger Linotype', 'Dejavu Sans', 'Helvetica Neue', Arial, sans-serif"},{name:"Times New Roman",value:"'Times New Roman', Times, serif"},{name:"Didot",value:"Didot, 'Didot LT STD', 'Hoefler Text', Garamond, 'Times New Roman', serif"},{name:"Georgia",value:"Georgia, serif"},{name:"American Typewriter",value:"'American Typewriter', serif"},{name:"Andale Mono",value:"'Andale Mono', monospace"},{name:"Courier",value:"Courier, monospace"},{name:"Lucida Console",value:"'Lucida Console', Monaco, monospace"},{name:"Monaco",value:"Monaco, Consolas, 'Lucida Console', monospace"},{name:"Bradley Hand",value:"'Bradley Hand', cursive"},{name:"Brush Script MT",value:"'Brush Script MT', cursive"},{name:"Luminari",value:"Luminari, fantasy"},{name:"Comic Sans MS",value:"'Comic Sans MS', cursive, sans-serif"},{name:"Roboto",value:"'Roboto', sans-serif"},{name:"Open Sans",value:"'Open Sans', sans-serif"},{name:"Lato",value:"'Lato', sans-serif"},{name:"Montserrat",value:"'Montserrat', sans-serif"},{name:"Oswald",value:"'Oswald', sans-serif"},{name:"Source Sans Pro",value:"'Source Sans Pro', sans-serif"},{name:"Slabo 27px",value:"'Slabo 27px', serif"},{name:"Raleway",value:"'Raleway', sans-serif"},{name:"PT Sans",value:"'PT Sans', sans-serif"},{name:"Merriweather",value:"'Merriweather', serif"},{name:"Noto Sans",value:"'Noto Sans', sans-serif"},{name:"Nunito",value:"'Nunito', sans-serif"},{name:"Concert One",value:"'Concert One', cursive"},{name:"Prompt",value:"'Prompt', sans-serif"},{name:"Work Sans",value:"'Work Sans', sans-serif"}],nx=({isSidebarOpen:r,onToggleSidebar:h,onFormat:u,onFileUpload:c,onInsertImage:p,onExport:x,onPageSizeChange:m,pageFormatId:d,customPageSize:S,onCustomPageSizeChange:b,onUpdateStyle:j,onOpenTOCModal:M,onOpenPageNumberModal:z,onInsertHorizontalRule:ye,onInsertTextLayer:oe,onToggleCrop:ie,onPageBreak:we,onBlockStyleUpdate:fe,showFrameTools:Be,onToggleFrameTools:De,selectionState:W,isTextLayerMode:Ee,fileName:_e,selectedImage:N,selectedHR:J,selectedFooter:C,imageProperties:w,hrProperties:_,onImagePropertyChange:le,onHRPropertyChange:be,onUndo:Le,onRedo:qe,canUndo:k,canRedo:F,availableFonts:Se,showMarginGuides:Ne,onToggleMarginGuides:Y,showSmartGuides:y,onToggleSmartGuides:A,onOpenSettings:K,onReloadFonts:se,onAddFont:Oe,onCaptureSelection:H,onOpenLogs:Ve,onAutoMerge:ot})=>{var Jn;const[ze,rt]=q.useState(!1),[He,Ye]=q.useState(!1),[Fe,at]=q.useState(!1),[Xt,kt]=q.useState(!1),[zt,Pe]=q.useState(!1),[sn,Rt]=q.useState(!1),[Lt,dt]=q.useState(""),[ln,Dt]=q.useState(""),[Mn,Zn]=q.useState(!1),[gn,yt]=q.useState("0"),[kn,In]=q.useState("1"),Sn=q.useRef(null),Nn=q.useRef(null),Pt=q.useRef(null),Ht=q.useRef(null),bt=q.useRef(null),Ut=q.useRef(null),fn=q.useRef(null),Ot=q.useRef(null),mn=q.useRef(null),jn=q.useRef(null),Ln=q.useRef(null),On=q.useRef(null),Cn=q.useRef(null),Kn=q.useRef(null),qn=q.useRef(null),ml=q.useRef(null),Je=(Z,Ue)=>`p-2.5 rounded transition-colors cursor-pointer ${Ue?"text-gray-300 cursor-not-allowed":"hover:bg-[#efe5ff] hover:text-[#7539d3] "+(Z?"bg-[#efe5ff] text-[#7539d3]":"text-gray-700")}`;q.useEffect(()=>{const Z=Ue=>{const Ie=Ue.target;Sn.current&&!Sn.current.contains(Ie)&&rt(!1),Nn.current&&!Nn.current.contains(Ie)&&Ye(!1),Pt.current&&!Pt.current.contains(Ie)&&at(!1),Ht.current&&!Ht.current.contains(Ie)&&kt(!1),bt.current&&!bt.current.contains(Ie)&&(Pe(!1),Rt(!1)),Cn.current&&!Cn.current.contains(Ie)&&!(Kn.current&&Kn.current.contains(Ie))&&Zn(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),q.useEffect(()=>{const Z=W.letterSpacing||"0",Ue=parseFloat(Z);isNaN(Ue)?Z==="normal"&&yt("0"):yt(String(Ue))},[W.letterSpacing]),q.useEffect(()=>{const Z=parseFloat(W.fontSize||"16"),Ue=W.lineHeight||"normal";let Ie=1;if(Ue==="normal")Ie=1;else if(Ue.includes("calc")){const Jt=Ue.match(/calc\(\s*1em\s*\+\s*([\-\d.]+)px\s*\)/);Jt&&!isNaN(Z)&&(Ie=1+parseFloat(Jt[1])/Z)}else{const Jt=parseFloat(Ue);isNaN(Jt)||(Ie=Ue.includes("px")&&!isNaN(Z)?Jt/Z:Jt)}if(!isNaN(Ie)){const Jt=Math.round(Ie*100)/100;In(String(Jt))}},[W.lineHeight,W.fontSize]);const Tn=(Z,Ue=6)=>{var Jt;const Ie=(Jt=Z.current)==null?void 0:Jt.getBoundingClientRect();return Ie?{position:"fixed",top:Ie.bottom+Ue,left:Ie.left,zIndex:200}:{position:"fixed",top:-9999,left:-9999}},Yn=(Z,Ue=6)=>{var Jt;const Ie=(Jt=Z.current)==null?void 0:Jt.getBoundingClientRect();return Ie?{position:"fixed",top:Ie.top-Ue,left:Ie.left,transform:"translateY(-100%)",zIndex:200}:{position:"fixed",top:-9999,left:-9999}},xl=(Z,Ue,Ie,Jt,Kl=6,ql)=>!Z||!Ue.current||typeof document>"u"?null:tx.createPortal(s.jsx("div",{ref:ql,className:Ie,style:Tn(Ue,Kl),onMouseDown:bl=>bl.stopPropagation(),children:Jt}),document.body),yl=[{label:"Normal",tag:"p"},{label:"Heading 1",tag:"h1"},{label:"Heading 2",tag:"h2"},{label:"Heading 3",tag:"h3"},{label:"Quote",tag:"blockquote"},{label:"Code",tag:"pre"}],zl=((Jn=yl.find(Z=>Z.tag===W.blockType))==null?void 0:Jn.label)||"Normal",xn=(Z,Ue)=>{let Ie={};Z==="borderWidth"&&parseInt(Ue)>0&&(!W.borderStyle||W.borderStyle==="none")&&(Ie.borderStyle="solid"),fe({[Z]:Ue,...Ie})},Xn=W.fontName?W.fontName.replace(/['"]/g,""):"inherit";let Pn=[...Se];!Pn.some(Z=>Z.name.toLowerCase()===Xn.toLowerCase()||Z.value.toLowerCase().includes(Xn.toLowerCase()))&&Xn!=="inherit"&&Pn.unshift({name:Xn,value:Xn,available:!1});const Ul=Lt.trim()?Pn.filter(Z=>Z.name.toLowerCase().includes(Lt.toLowerCase())):Pn;return q.useEffect(()=>{Dt(Xn)},[Xn]),q.useEffect(()=>{if(!sn)return;const Z=Ue=>{if(!(Ue.metaKey||Ue.ctrlKey||Ue.altKey)){if(Ue.key==="Escape"){Rt(!1),Pe(!1);return}if(Ue.key==="Enter"){Ue.preventDefault();const Ie=ln.trim();Ie&&u("fontName",Ie),Rt(!1),Pe(!1);return}if(Ue.key==="Backspace"){Ue.preventDefault();const Ie=ln.slice(0,-1);Dt(Ie),dt(Ie),Pe(!0);return}if(Ue.key.length===1){Ue.preventDefault();const Ie=`${ln}${Ue.key}`;Dt(Ie),dt(Ie),Pe(!0)}}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[sn,ln,u]),s.jsxs("div",{className:"app-toolbar flex flex-col border-b border-gray-200 shadow-sm z-10 sticky top-0 bg-white",children:[s.jsx("div",{className:"h-[68px] bg-white z-20 relative overflow-x-auto overflow-y-hidden",children:s.jsx("div",{className:"flex items-center px-4 h-full justify-between min-w-max",onMouseDown:H,children:s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsxs("div",{className:"mr-2 flex items-center space-x-1.5 border-r border-gray-200 pr-2",children:[s.jsx("h1",{className:"font-bold text-lg text-gray-800 tracking-tight flex items-center gap-2 h-full leading-none",children:s.jsx("div",{className:"h-14 w-14 overflow-hidden rounded flex items-center justify-center",children:s.jsx("img",{src:"/loghetto.png",alt:"Laghetto",className:"h-full w-full block object-cover object-[50%_55%] translate-y-1"})})}),s.jsx("button",{onClick:h,className:Je(!1),title:"Toggle Sidebar",children:r?s.jsx(x0,{size:18}):s.jsx(y0,{size:18})})]}),s.jsxs("div",{className:"flex items-center space-x-0.5 border-r border-gray-200 pr-1.5",children:[s.jsx("button",{onClick:Le,disabled:!k,className:Je(!1,!k),title:"Undo (Ctrl+Z)",children:s.jsx(Lm,{size:18})}),s.jsx("button",{onClick:qe,disabled:!F,className:Je(!1,!F),title:"Redo (Ctrl+Y)",children:s.jsx(Rm,{size:18})})]}),s.jsxs("div",{className:"flex items-center space-x-0.5 border-r border-gray-200 pr-1.5 mr-1.5",children:[s.jsx("button",{onClick:()=>{var Z;return(Z=Ut.current)==null?void 0:Z.click()},className:Je(!1),title:"Open File",children:s.jsx(em,{size:18})}),s.jsx("input",{ref:Ut,type:"file",multiple:!0,accept:".html,.htm,.docx,image/*",onChange:c,className:"hidden"}),s.jsx("button",{onClick:()=>{var Z;return(Z=fn.current)==null?void 0:Z.click()},className:Je(!1),title:"Insert Image",children:s.jsx(lm,{size:18})}),s.jsx("input",{ref:fn,type:"file",accept:"image/*",onChange:p,className:"hidden"})]}),s.jsxs("div",{className:"flex items-center space-x-0.5 border-r border-gray-200 pr-1.5 mr-1.5 pl-1.5",children:[s.jsx("button",{onClick:we,className:Je(!1),title:"Insert Page Break (Cmd+Enter)",children:s.jsx(Fg,{size:18})}),s.jsx("button",{onClick:M,className:Je(!1),title:"Insert Table of Contents",children:s.jsx(Qm,{size:18})}),s.jsx("button",{onClick:z,className:Je(!1),title:"Insert Page Numbers",children:s.jsx(d0,{size:18})}),s.jsx("button",{onClick:ye,className:Je(!1),title:"Insert Horizontal Line",children:s.jsx(m0,{size:18})}),s.jsx("button",{onClick:oe,className:Je(Ee),title:"Insert Text Layer",children:s.jsx(B0,{size:18})}),s.jsx("button",{onClick:De,className:Je(Be),title:"Frame / Borders (Toggle Controls)",children:s.jsx(b0,{size:18})})]}),s.jsxs("div",{className:"flex flex-col justify-center items-start border-r border-gray-200 pr-1 mr-1 pl-1 gap-0.5",children:[s.jsxs("div",{className:"flex items-center justify-between text-gray-500 w-full pl-0.5",children:[s.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Format"}),s.jsxs("div",{className:"flex items-center gap-0.5",children:[s.jsx("button",{onClick:A,className:`${Je(y)} !p-1`,title:"Smart Guides (Alignment)",children:s.jsx(um,{size:12})}),s.jsx("button",{onClick:Y,className:`${Je(Ne)} !p-1`,title:"Show margins and ruler",children:s.jsx(Om,{size:12})})]})]}),s.jsxs("select",{className:"h-6 border border-gray-300 rounded px-1 text-[10px] text-gray-700 focus:outline-none focus:border-brand-500 bg-white w-20",onChange:Z=>m(Z.target.value),value:d,children:[s.jsx("option",{value:is.LETTER.id,children:"8.5x11 (110150)"}),s.jsx("option",{value:is.LETTER_THICK.id,children:"8.5x11 (151200)"}),s.jsx("option",{value:is.TRADE.id,children:"6x9 (110150)"}),s.jsx("option",{value:is.TRADE_THICK.id,children:"6x9 (151200)"}),s.jsx("option",{value:is.CUSTOM.id,children:"Custom"})]}),d==="custom"&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",value:S.width,onChange:Z=>b(Z.target.value,S.height),className:"w-9 h-5 border border-gray-300 rounded px-1 text-[9px] text-center",placeholder:"W"}),s.jsx("input",{type:"text",value:S.height,onChange:Z=>b(S.width,Z.target.value),className:"w-9 h-5 border border-gray-300 rounded px-1 text-[9px] text-center",placeholder:"H"})]})]}),s.jsxs("div",{className:"flex flex-col justify-center gap-0 border-r border-gray-200 px-1.5 mr-3 h-full min-w-[200px] py-1",ref:Sn,children:[s.jsxs("div",{className:"relative w-full flex items-center gap-1",children:[s.jsxs("button",{onMouseDown:Z=>{Z.preventDefault(),Ot.current=Z.currentTarget,rt(!ze)},className:"flex items-center justify-between w-52 h-6 px-2 bg-gray-50 border border-gray-200 rounded hover:bg-brand-50 text-[11px] font-medium text-gray-700",children:[s.jsx("span",{className:"truncate",children:zl}),s.jsx(u0,{size:10,className:"ml-2 text-gray-400"})]}),s.jsx("button",{onClick:se,className:"p-0 rounded hover:bg-brand-50 text-gray-600 hover:text-brand-600",title:"Reload Fonts",children:s.jsx(ci,{size:12})}),ze&&s.jsxs("div",{className:"fixed w-52 bg-white border border-gray-200 rounded-md shadow-xl flex flex-col p-1",style:Tn(Ot,6),children:[s.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Apply Style"}),yl.map(Z=>s.jsxs("div",{className:"flex items-center justify-between hover:bg-brand-50 rounded px-2 py-1.5 group cursor-pointer",children:[s.jsx("span",{className:"flex-1 text-sm text-gray-700",onClick:()=>{u("formatBlock",Z.tag),rt(!1)},children:Z.label}),s.jsx("button",{onClick:Ue=>{Ue.stopPropagation(),j(Z.tag),rt(!1)},className:"text-brand-600 hover:text-brand-700 p-1 rounded bg-brand-50/60 hover:bg-brand-100 transition-colors flex items-center gap-1 text-[10px]",title:"Update style",children:s.jsx(ci,{size:10})})]},Z.tag))]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("div",{className:"relative flex flex-col gap-0",ref:bt,children:[s.jsx("div",{className:"relative flex items-center",children:s.jsx("input",{type:"text",list:"font-list",value:ln,readOnly:!0,onMouseDown:Z=>{Z.preventDefault(),mn.current=Z.currentTarget,H(),Rt(!0),Pe(!0)},onDoubleClick:Z=>{Z.preventDefault(),mn.current=Z.currentTarget,Dt(""),dt(""),Pe(!0)},placeholder:"Font",className:"h-6 border border-gray-200 rounded text-[11px] text-gray-700 focus:outline-none w-52 pr-2 pl-2 bg-white cursor-text",title:"Font Family"})}),zt&&s.jsx("div",{className:"fixed w-52 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-md shadow-xl",style:Tn(mn,6),children:Ul.map((Z,Ue)=>s.jsxs("button",{type:"button",onMouseDown:Ie=>Ie.preventDefault(),onClick:()=>{Dt(Z.name),dt(""),u("fontName",Z.value),Pe(!1)},className:"w-full text-left text-xs px-2 py-2 hover:bg-brand-50 text-gray-700",children:[Z.name," ",Z.available===!1?"":""]},Ue))}),s.jsx("datalist",{id:"font-list",children:Ul.map((Z,Ue)=>s.jsx("option",{value:Z.name},Ue))})]}),s.jsxs("label",{className:"p-0 rounded hover:bg-brand-50 text-gray-600 hover:text-brand-600 cursor-pointer",title:"Add Font",children:[s.jsx("input",{type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:Oe,className:"hidden"}),s.jsx(H0,{size:12})]})]})]}),s.jsxs("div",{className:"flex items-center h-full gap-3 mr-4",children:[s.jsx("input",{type:"number",min:6,max:200,step:1,value:W.fontSize||"16",onMouseDown:H,onFocus:H,onKeyDown:Z=>{(Z.key==="ArrowUp"||Z.key==="ArrowDown")&&H()},onChange:Z=>{const Ue=Z.target.value;Ue!==""&&u("fontSize",Ue)},className:"h-8 border border-gray-200 rounded text-xs text-gray-800 focus:outline-none w-14 px-1 bg-white",title:"Font Size"}),s.jsx("div",{className:"w-px h-8 bg-gray-200"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>u("bold"),className:`${Je(W.bold)} !p-2`,title:"Bold",children:s.jsx(c0,{size:16})}),s.jsx("button",{onClick:()=>u("italic"),className:`${Je(W.italic)} !p-2`,title:"Italic",children:s.jsx(h0,{size:16})}),s.jsx("button",{onClick:()=>u("underline"),className:`${Je(W.underline)} !p-2`,title:"Underline",children:s.jsx(S0,{size:16})})]}),s.jsxs("div",{className:"relative flex items-center justify-center w-9 h-9 rounded hover:bg-brand-50 cursor-pointer border border-transparent hover:border-gray-300",title:"Text Color",children:[s.jsx("span",{className:"font-bold text-gray-700 text-xs select-none",style:{color:W.foreColor},children:"A"}),s.jsx("input",{type:"color",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",value:W.foreColor||"#000000",onChange:Z=>u("foreColor",Z.target.value)}),s.jsx("div",{className:"absolute bottom-1 w-5 h-0.5 rounded-full",style:{backgroundColor:W.foreColor||"#000000"}})]}),s.jsx("div",{className:"w-px h-8 bg-gray-200"}),s.jsxs("div",{className:"relative flex items-center",ref:Nn,children:[s.jsx("button",{onMouseDown:Z=>{Z.preventDefault(),jn.current=Z.currentTarget,Ye(!He)},className:`${Je(He)} !p-2`,title:"Line Height",children:s.jsx(i0,{size:16})}),He&&s.jsxs("div",{className:"fixed flex flex-col bg-white border border-gray-200 shadow-xl rounded-md p-1 w-40",style:Tn(jn,8),children:[s.jsx("div",{className:"text-[9px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Line Height"}),s.jsxs("div",{className:"px-2 pb-2",children:[s.jsx("input",{type:"number",step:"0.15",min:"0.5",max:"3",value:kn,onChange:Z=>{const Ue=Z.target.value;if(In(Ue),Ue==="")return;const Ie=parseFloat(Ue);isNaN(Ie)||(ml.current&&window.clearTimeout(ml.current),ml.current=window.setTimeout(()=>{u("lineHeight",Ie.toString())},150))},onBlur:()=>{const Z=parseFloat(kn);isNaN(Z)||u("lineHeight",Z.toString())},className:"w-full h-7 border border-gray-200 rounded px-2 text-xs text-gray-700",placeholder:"1.15"}),s.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Tip: 1.00, 1.15, 1.30 (Word style)"})]}),s.jsx("div",{className:"h-px bg-gray-100 my-1"}),s.jsx("div",{className:"text-[9px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Letter Spacing"}),s.jsxs("div",{className:"px-2 pb-2",children:[s.jsx("input",{type:"number",step:"0.1",min:"-5",max:"10",value:gn,onChange:Z=>{const Ue=Z.target.value;if(yt(Ue),Ue==="")return;const Ie=parseFloat(Ue);isNaN(Ie)||(qn.current&&window.clearTimeout(qn.current),qn.current=window.setTimeout(()=>{u("letterSpacing",`${Ie}px`)},150))},onBlur:()=>{const Z=parseFloat(gn);isNaN(Z)||u("letterSpacing",`${Z}px`)},className:"w-full h-7 border border-gray-200 rounded px-2 text-xs text-gray-700",placeholder:"px"}),s.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Tip: use 0.5 steps (px)"})]})]})]}),s.jsxs("div",{className:"relative flex items-center",ref:Pt,children:[s.jsx("button",{onMouseDown:Z=>{Z.preventDefault(),Ln.current=Z.currentTarget,at(!Fe)},className:`${Je(Fe)} !p-2`,title:"Text Case",children:s.jsx(w0,{size:16})}),Fe&&s.jsxs("div",{className:"fixed flex flex-col bg-white border border-gray-200 shadow-xl rounded-md p-1 w-36",style:Tn(Ln,8),children:[s.jsx("div",{className:"text-[9px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Case"}),s.jsx("button",{onClick:()=>{u("textTransform","uppercase"),at(!1)},className:"hover:bg-brand-50 text-xs p-2 rounded text-left uppercase",children:"Uppercase"}),s.jsx("button",{onClick:()=>{u("textTransform","lowercase"),at(!1)},className:"hover:bg-brand-50 text-xs p-2 rounded text-left lowercase",children:"Lowercase"}),s.jsx("button",{onClick:()=>{u("textTransform","capitalize"),at(!1)},className:"hover:bg-brand-50 text-xs p-2 rounded text-left capitalize",children:"Capitalize"}),s.jsx("div",{className:"h-px bg-gray-100 my-1"}),s.jsx("button",{onClick:()=>{u("textTransform","none"),at(!1)},className:"hover:bg-brand-50 text-xs p-2 rounded text-left",children:"Normal"})]})]}),s.jsx("div",{className:"w-px h-8 bg-gray-200"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>u("justifyLeft"),className:`${Je(W.alignLeft)} !p-2`,title:"Left",children:s.jsx(Is,{size:16})}),s.jsx("button",{onClick:()=>u("justifyCenter"),className:`${Je(W.alignCenter)} !p-2`,title:"Center",children:s.jsx(Ws,{size:16})}),s.jsx("button",{onClick:()=>u("justifyRight"),className:`${Je(W.alignRight)} !p-2`,title:"Right",children:s.jsx(Fs,{size:16})}),s.jsx("button",{onClick:()=>u("justifyFull"),className:`${Je(W.alignJustify)} !p-2`,title:"Justify",children:s.jsx(bu,{size:16})})]}),s.jsx("div",{className:"w-px h-8 bg-gray-200"}),s.jsxs("div",{className:"relative flex items-center",ref:Ht,children:[s.jsxs("button",{onMouseDown:Z=>{Z.preventDefault(),On.current=Z.currentTarget,kt(!Xt)},className:`${Je(W.ul||W.ol)} !p-2 flex items-center`,title:"Lists",children:[W.ol?s.jsx(p0,{size:16}):s.jsx(g0,{size:16}),s.jsx(u0,{size:10,className:"ml-1 -mr-1 opacity-50"})]}),Xt&&s.jsxs("div",{className:"fixed flex flex-col bg-white border border-gray-200 shadow-xl rounded-md p-1 w-36",style:Tn(On,8),children:[s.jsx("div",{className:"text-[9px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Lists"}),s.jsxs("button",{onClick:()=>{u("insertUnorderedList"),kt(!1)},className:`text-xs p-2 rounded text-left flex items-center gap-2 hover:bg-brand-50 ${W.ul?"bg-brand-50 text-brand-600":""}`,children:[s.jsx(g0,{size:14})," Bulleted"]}),s.jsxs("button",{onClick:()=>{u("insertOrderedList"),kt(!1)},className:`text-xs p-2 rounded text-left flex items-center gap-2 hover:bg-brand-50 ${W.ol?"bg-brand-50 text-brand-600":""}`,children:[s.jsx(p0,{size:14})," Numbered"]})]})]})]}),s.jsx("button",{onClick:x,className:"bg-[#8d55f1] text-white p-2 rounded-md hover:bg-[#7539d3] shadow-sm",title:"Export",children:s.jsx(Jg,{size:18})}),s.jsx("button",{onMouseDown:Z=>{Z.preventDefault(),Kn.current=Z.currentTarget,Zn(!Mn)},className:Je(Mn),title:"Settings",children:s.jsx(Bm,{size:18})}),xl(Mn,Kn,"bg-white border border-gray-200 shadow-xl rounded-md p-2 w-64",s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Settings"}),s.jsx("button",{onClick:()=>{K(),Zn(!1)},className:"w-full text-left text-xs px-2 py-2 rounded hover:bg-brand-50 text-gray-700",children:"API Key"}),s.jsx("div",{className:"h-px bg-gray-100 my-2"}),s.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Logs"}),s.jsx("button",{onClick:()=>{Ve(),Zn(!1)},className:"w-full text-left text-xs px-2 py-2 rounded hover:bg-brand-50 text-gray-700",children:"Open error log"}),s.jsx("div",{className:"h-px bg-gray-100 my-2"}),s.jsx("div",{className:"text-[10px] uppercase font-bold text-gray-400 px-2 py-1 bg-gray-50 mb-1 rounded",children:"Layout"}),s.jsxs("button",{onClick:()=>{ot(),Zn(!1)},className:"w-full text-left text-xs px-2 py-2 rounded hover:bg-brand-50 text-gray-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Auto Merge Elements"]})]}),6,Cn)]})})}),N&&(w.isCropping?s.jsx("div",{className:"h-14 border-b border-gray-200 bg-gray-800 text-white shadow-inner overflow-x-auto overflow-y-hidden",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-full min-w-max",children:[s.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[s.jsx(f0,{size:18}),s.jsx("span",{children:"Crop Mode"})]}),s.jsx("div",{className:"text-xs text-gray-300",children:"Drag corners to crop."}),s.jsx("div",{})]})}):s.jsx("div",{className:"h-16 border-b border-gray-200 bg-brand-50 shadow-inner overflow-x-auto overflow-y-hidden",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-full min-w-max",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-brand-800 font-semibold border-r border-brand-200 pr-4",children:[s.jsx(sm,{size:18}),s.jsx("span",{className:"hidden sm:inline text-sm",children:"Image"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 border-r border-brand-200 pr-4",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Actions"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:`${Je(!1)} cursor-pointer`,title:"Replace Image",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"}),s.jsx(ci,{size:16}),s.jsx("span",{className:"text-xs ml-1 hidden lg:inline",children:"Replace"})]}),s.jsxs("button",{onClick:ie,className:Je(!1),title:"Crop Image",children:[s.jsx(f0,{size:16}),s.jsx("span",{className:"text-xs ml-1 hidden lg:inline",children:"Crop"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 border-r border-brand-200 pr-4",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("label",{className:"text-[9px] font-bold text-gray-500 uppercase flex items-center gap-1",children:[s.jsx(Gm,{size:9})," Brightness"]}),s.jsx("input",{type:"range",min:"0",max:"200",value:w.brightness,onChange:Z=>le("brightness",parseInt(Z.target.value)),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("label",{className:"text-[9px] font-bold text-gray-500 uppercase flex items-center gap-1",children:[s.jsx(Qg,{size:9})," Contrast"]}),s.jsx("input",{type:"range",min:"0",max:"200",value:w.contrast,onChange:Z=>le("contrast",parseInt(Z.target.value)),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Layout"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>le("alignment","left"),className:Je(w.alignment==="left"),children:s.jsx(Is,{size:14})}),s.jsx("button",{onClick:()=>le("alignment","center"),className:Je(w.alignment==="center"),children:s.jsx(Ws,{size:14})}),s.jsx("button",{onClick:()=>le("alignment","right"),className:Je(w.alignment==="right"),children:s.jsx(Fs,{size:14})}),s.jsx("button",{onClick:()=>le("alignment","float-left"),className:Je(w.alignment==="float-left"),children:s.jsx(x0,{size:14})}),s.jsx("button",{onClick:()=>le("alignment","float-right"),className:Je(w.alignment==="float-right"),children:s.jsx(y0,{size:14})})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:["Size: ",w.width,"%"]}),s.jsx("input",{type:"range",min:"10",max:"100",value:w.width,onChange:Z=>le("width",parseInt(Z.target.value)),className:"w-16 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>u("removeSelection"),className:"text-xs text-brand-600 underline font-medium ml-4",children:"Close Tools"})})]})})),J&&s.jsx("div",{className:"h-16 border-b border-gray-200 bg-brand-50 shadow-inner overflow-x-auto overflow-y-hidden",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-full min-w-max",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-brand-800 font-semibold border-r border-brand-200 pr-4",children:[s.jsx(m0,{size:18}),s.jsx("span",{className:"hidden sm:inline text-sm",children:"Line"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Color"}),s.jsx("input",{type:"color",value:_.color,onChange:Z=>be("color",Z.target.value),className:"w-8 h-6 p-0 border-none cursor-pointer bg-transparent"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:["Thickness: ",_.height,"px"]}),s.jsx("input",{type:"range",min:"1",max:"50",value:_.height,onChange:Z=>be("height",parseInt(Z.target.value)),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:["Width: ",_.width,"%"]}),s.jsx("input",{type:"range",min:"10",max:"100",value:_.width,onChange:Z=>be("width",parseInt(Z.target.value)),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Align"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>be("alignment","left"),className:Je(_.alignment==="left"),children:s.jsx(Is,{size:14})}),s.jsx("button",{onClick:()=>be("alignment","center"),className:Je(_.alignment==="center"),children:s.jsx(Ws,{size:14})}),s.jsx("button",{onClick:()=>be("alignment","right"),className:Je(_.alignment==="right"),children:s.jsx(Fs,{size:14})})]})]}),s.jsx("div",{className:"w-px h-8 bg-brand-200"}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Style"}),s.jsxs("select",{className:"text-xs border border-gray-300 rounded p-1",value:_.style,onChange:Z=>be("style",Z.target.value),children:[s.jsx("option",{value:"solid",children:"Solid"}),s.jsx("option",{value:"dashed",children:"Dashed"}),s.jsx("option",{value:"dotted",children:"Dotted"}),s.jsx("option",{value:"tapered",children:"Tapered (Fade)"})]})]})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>u("removeSelection"),className:"text-xs text-brand-600 underline font-medium ml-4",children:"Close Tools"})})]})}),C&&s.jsx("div",{className:"h-16 border-b border-gray-200 bg-brand-50 shadow-inner overflow-x-auto overflow-y-hidden",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-full min-w-max",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-brand-800 font-semibold border-r border-brand-200 pr-4",children:[s.jsx(d0,{size:18}),s.jsx("span",{className:"hidden sm:inline text-sm",children:"Footer"})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 border-r border-brand-200 pr-4",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Text"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("select",{className:"text-xs border border-gray-300 rounded p-1 w-24",value:W.fontName||"inherit",onChange:Z=>u("fontName",Z.target.value),children:Pn.map((Z,Ue)=>s.jsx("option",{value:Z.value,children:Z.name},Ue))}),s.jsx("input",{type:"number",min:6,max:200,step:1,className:"text-xs border border-gray-300 rounded p-1 w-12",value:W.fontSize||"16",onMouseDown:H,onFocus:H,onKeyDown:Z=>{(Z.key==="ArrowUp"||Z.key==="ArrowDown")&&H()},onChange:Z=>{const Ue=Z.target.value;Ue!==""&&u("fontSize",Ue)},title:"Font Size"})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 border-r border-brand-200 pr-4",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Style"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>u("bold"),className:Je(W.bold),children:s.jsx(c0,{size:14})}),s.jsx("button",{onClick:()=>u("italic"),className:Je(W.italic),children:s.jsx(h0,{size:14})}),s.jsx("button",{onClick:()=>u("underline"),className:Je(W.underline),children:s.jsx(S0,{size:14})})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 border-r border-brand-200 pr-4",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Align"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>u("justifyLeft"),className:Je(W.alignLeft),children:s.jsx(Is,{size:14})}),s.jsx("button",{onClick:()=>u("justifyCenter"),className:Je(W.alignCenter),children:s.jsx(Ws,{size:14})}),s.jsx("button",{onClick:()=>u("justifyRight"),className:Je(W.alignRight),children:s.jsx(Fs,{size:14})}),s.jsx("button",{onClick:()=>u("justifyFull"),className:Je(W.alignJustify),children:s.jsx(bu,{size:14})})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 border-r border-brand-200 pr-4",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Format"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("div",{className:"relative flex items-center",ref:Nn,children:[s.jsx("button",{onMouseDown:Z=>{Z.preventDefault(),jn.current=Z.currentTarget,Ye(!He)},className:`${Je(He)} !p-1`,title:"Line Height",children:s.jsx(i0,{size:14})}),He&&s.jsxs("div",{className:"fixed flex flex-col bg-white border border-gray-200 shadow-xl rounded p-1 w-24",style:Yn(jn,8),children:[s.jsx("button",{onClick:()=>{u("lineHeight","1.0"),Ye(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left",children:"Single"}),s.jsx("button",{onClick:()=>{u("lineHeight","1.5"),Ye(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left",children:"1.5"}),s.jsx("button",{onClick:()=>{u("lineHeight","2.0"),Ye(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left",children:"Double"})]})]}),s.jsxs("div",{className:"relative flex items-center",ref:Pt,children:[s.jsx("button",{onMouseDown:Z=>{Z.preventDefault(),Ln.current=Z.currentTarget,at(!Fe)},className:`${Je(Fe)} !p-1`,title:"Text Case",children:s.jsx(w0,{size:14})}),Fe&&s.jsxs("div",{className:"fixed flex flex-col bg-white border border-gray-200 shadow-xl rounded p-1 w-32",style:Yn(Ln,8),children:[s.jsx("button",{onClick:()=>{u("textTransform","uppercase"),at(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left uppercase",children:"Uppercase"}),s.jsx("button",{onClick:()=>{u("textTransform","lowercase"),at(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left lowercase",children:"Lowercase"}),s.jsx("button",{onClick:()=>{u("textTransform","capitalize"),at(!1)},className:"hover:bg-brand-50 text-[10px] p-1 rounded text-left capitalize",children:"Capitalize"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("label",{className:"text-[9px] font-bold text-gray-500 uppercase",children:"Actions"}),s.jsx("button",{onClick:()=>u("deleteFooter"),className:"bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded text-xs flex items-center gap-1",children:"Delete All"})]})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>u("removeSelection"),className:"text-xs text-brand-600 underline font-medium ml-4",children:"Close"})})]})}),Be&&!N&&!J&&!C&&s.jsx("div",{className:"h-12 bg-gray-50 border-b border-gray-200 shadow-inner overflow-x-auto overflow-y-hidden",children:s.jsxs("div",{className:"flex items-center px-4 h-full space-x-6 min-w-max",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase",children:[s.jsx(b0,{size:14}),s.jsx("span",{children:"Frame Tools"})]}),s.jsxs("div",{className:"flex items-center gap-2 border-r border-gray-200 pr-4",children:[s.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Um,{size:12})," Shape:"]}),s.jsxs("select",{className:"text-xs border border-gray-300 rounded p-1",value:W.shape||"none",onChange:Z=>xn("shape",Z.target.value),children:[s.jsx("option",{value:"none",children:"No Shape"}),s.jsx("option",{value:"rectangle",children:"Rectangle"}),s.jsx("option",{value:"circle",children:"Circle"}),s.jsx("option",{value:"pill",children:"Pill / Oval"}),s.jsx("option",{value:"speech",children:"Speech Bubble"}),s.jsx("option",{value:"cloud",children:"Cloud"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Thickness:"}),s.jsx("input",{type:"range",min:"0",max:"20",step:"1",value:parseInt(W.borderWidth||"0")||0,onChange:Z=>xn("borderWidth",Z.target.value+"px"),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 w-4",children:parseInt(W.borderWidth||"0")||0})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Color:"}),s.jsx("input",{type:"color",value:W.borderColor||"#000000",onChange:Z=>xn("borderColor",Z.target.value),className:"w-6 h-6 border-none p-0 cursor-pointer bg-transparent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Style:"}),s.jsxs("select",{className:"text-xs border border-gray-300 rounded p-1",value:W.borderStyle||"solid",onChange:Z=>xn("borderStyle",Z.target.value),children:[s.jsx("option",{value:"solid",children:"Solid"}),s.jsx("option",{value:"dashed",children:"Dashed"}),s.jsx("option",{value:"dotted",children:"Dotted"}),s.jsx("option",{value:"double",children:"Double"}),s.jsx("option",{value:"none",children:"None"})]})]}),s.jsx("div",{className:"w-px h-4 bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Radius:"}),s.jsx("input",{type:"number",min:"0",max:"50",value:parseInt(W.borderRadius||"0"),onChange:Z=>xn("borderRadius",Z.target.value+"px"),className:"w-10 text-xs border border-gray-300 rounded px-1"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(mm,{size:10})," Pad:"]}),s.jsx("input",{type:"number",min:"0",max:"100",value:parseInt(W.padding||"0"),onChange:Z=>xn("padding",Z.target.value+"px"),className:"w-10 text-xs border border-gray-300 rounded px-1"})]}),s.jsx("div",{className:"w-px h-4 bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(wm,{size:10})," Width:"]}),s.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:parseInt(W.width||"0")||100,onChange:Z=>xn("width",Z.target.value+"%"),className:"w-20 accent-brand-600 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"}),s.jsxs("span",{className:"text-xs text-gray-600 w-6 text-right",children:[parseInt(W.width||"0")||"Auto","%"]})]}),s.jsx("div",{className:"w-px h-4 bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>xn("textAlign","left"),className:Je(W.textAlign==="left"),children:s.jsx(Is,{size:14})}),s.jsx("button",{onClick:()=>xn("textAlign","center"),className:Je(W.textAlign==="center"),children:s.jsx(Ws,{size:14})}),s.jsx("button",{onClick:()=>xn("textAlign","right"),className:Je(W.textAlign==="right"),children:s.jsx(Fs,{size:14})}),s.jsx("button",{onClick:()=>xn("textAlign","justify"),className:Je(W.textAlign==="justify"),children:s.jsx(bu,{size:14})})]}),s.jsx("div",{className:"w-px h-4 bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Cm,{size:10})," Fill:"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"color",value:W.backgroundColor==="transparent"?"#ffffff":W.backgroundColor,onChange:Z=>xn("backgroundColor",Z.target.value),className:"w-6 h-6 border-none p-0 cursor-pointer bg-transparent"}),s.jsx("button",{onClick:()=>xn("backgroundColor","transparent"),className:"text-[10px] underline text-gray-500 hover:text-red-500",children:"Clear"})]})]})]})})]})},lx=({isSidebarOpen:r,pageCount:h,currentPage:u,onPageSelect:c,structureEntries:p,selectionMode:x,onStartSelection:m,onConfirmSelection:d,onCancelSelection:S,onNavigateToEntry:b,onUpdateEntryStatus:j,aiMessages:M,aiInput:z,aiLoading:ye,hasApiKey:oe,onAiInputChange:ie,onAiSend:we,onOpenSettings:fe,onClearStructure:Be,onResetAutoScan:De,isManualMode:W})=>{var J;const[Ee,_e]=q.useState("pages"),N=[{id:"h1",label:"Heading 1"},{id:"h2",label:"Heading 2"},{id:"h3",label:"Heading 3"}];return s.jsxs("div",{className:`app-sidebar w-72 border-r border-gray-200 bg-white h-full overflow-hidden flex flex-col flex-shrink-0 transition-all duration-300 ${r?"ml-0":"-ml-72"}`,children:[s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>_e("pages"),className:`flex-1 py-3 text-xs font-semibold uppercase tracking-wider flex items-center justify-center gap-2 transition-colors ${Ee==="pages"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50":"text-gray-500 hover:bg-brand-50 hover:text-brand-600"}`,children:[s.jsx(im,{size:14})," Pages"]}),s.jsxs("button",{onClick:()=>_e("structure"),className:`flex-1 py-3 text-xs font-semibold uppercase tracking-wider flex items-center justify-center gap-2 transition-colors ${Ee==="structure"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50":"text-gray-500 hover:bg-brand-50 hover:text-brand-600"}`,children:[s.jsx(hm,{size:14})," Structure"]}),s.jsxs("button",{onClick:()=>_e("ai"),className:`flex-1 py-3 text-xs font-semibold uppercase tracking-wider flex items-center justify-center gap-2 transition-colors ${Ee==="ai"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50":"text-gray-500 hover:bg-brand-50 hover:text-brand-600"}`,children:[s.jsx(Ym,{size:14})," AI"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[Ee==="pages"&&s.jsxs("div",{className:"space-y-1",children:[Array.from({length:h}).map((C,w)=>s.jsxs("button",{onClick:()=>c(w),className:`w-full text-left px-3 py-3 rounded-md text-sm flex items-center gap-3 transition-colors ${u===w?"bg-brand-50 text-brand-700 border-l-4 border-brand-600":"text-gray-600 hover:bg-brand-50 hover:text-brand-600 border-l-4 border-transparent"}`,children:[s.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-gray-100 rounded text-xs font-bold text-gray-500",children:w+1}),s.jsxs("span",{className:"truncate flex-1",children:["Page ",w+1]}),u===w&&s.jsx(B0,{size:14})]},w)),h===0&&s.jsx("div",{className:"text-center text-gray-400 py-8 text-sm",children:"No pages detected"})]}),Ee==="structure"&&s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-2 border-b border-gray-100 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Structure"}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[!W&&s.jsx("span",{className:"text-[9px] text-green-600 font-bold uppercase",children:"Auto"}),s.jsx("button",{onClick:W?De:Be,className:`px-2 py-0.5 text-[10px] rounded font-bold flex items-center gap-0.5 ${W?"bg-brand-100 text-brand-700 hover:bg-brand-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,title:W?"Enable auto-scan":"Clear all and switch to manual",children:W?s.jsxs(s.Fragment,{children:[s.jsx(ci,{size:9})," Auto Scan"]}):s.jsxs(s.Fragment,{children:[s.jsx(v0,{size:9})," Clear"]})}),p.filter(C=>C.status!=="rejected").length>0&&W&&s.jsxs("button",{onClick:C=>{C.stopPropagation(),Be()},className:"px-2 py-0.5 text-[10px] bg-red-100 text-red-600 hover:bg-red-200 rounded font-bold flex items-center gap-0.5",children:[s.jsx(v0,{size:9})," Clear"]})]})]}),s.jsx("div",{className:"flex gap-2",children:N.map(C=>s.jsxs("button",{onClick:()=>m(C.id),disabled:x.active,className:`flex-1 py-1.5 px-2 rounded text-xs font-medium border transition-colors flex items-center justify-center gap-1 ${x.active?"bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-700 border-gray-300 hover:border-brand-400 hover:text-brand-600"}`,title:`Select ${C.label} blocks`,children:[s.jsx(H0,{size:12})," ",C.id.toUpperCase()]},C.id))})]}),x.active&&s.jsxs("div",{className:"bg-violet-50 border-b-2 border-violet-400 p-3 animate-in fade-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-violet-800 font-bold text-xs uppercase mb-1",children:[s.jsx(bm,{size:14})," Selecting ",(J=x.level)==null?void 0:J.toUpperCase()]}),s.jsxs("p",{className:"text-[10px] text-violet-600 mb-2 leading-tight",children:["Click paragraphs in the document to tag them as ",x.level,".",x.selectedIds.length>0&&s.jsxs("span",{className:"ml-1 font-bold text-violet-800",children:["(",x.selectedIds.length," selected)"]})]}),s.jsxs("div",{className:"flex gap-2",children:[x.selectedIds.length>0?s.jsxs("button",{onClick:d,className:"flex-1 bg-violet-600 text-white text-xs py-2.5 rounded-md font-bold hover:bg-violet-700 shadow-lg shadow-violet-300 border-2 border-violet-400",children:[" CONFIRM (",x.selectedIds.length,")"]}):s.jsx("div",{className:"flex-1 bg-gray-100 text-gray-400 text-xs py-2.5 rounded-md font-medium text-center border border-dashed border-gray-300",children:"Select elements..."}),s.jsx("button",{onClick:S,className:"px-4 bg-white text-gray-600 border border-gray-300 text-xs py-2.5 rounded-md hover:bg-red-50 hover:text-red-600 hover:border-red-300",children:""})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2 mt-1",children:"Table of Contents"}),p.filter(C=>C.status!=="rejected").length===0?s.jsxs("div",{className:"text-center text-gray-400 py-8 text-xs italic",children:["No entries yet.",s.jsx("br",{}),"Use the buttons above to add titles."]}):s.jsx("div",{className:"space-y-1",children:p.filter(C=>C.status!=="rejected").sort((C,w)=>C.page-w.page).map(C=>{let w="ml-0",_="text-sm font-semibold";return C.type.includes("h2")&&(w="ml-4",_="text-xs font-medium text-gray-600"),C.type.includes("h3")&&(w="ml-8",_="text-[11px] text-gray-500"),s.jsxs("div",{className:`group flex items-center justify-between p-1.5 rounded hover:bg-brand-50 cursor-pointer transition-colors ${w}`,onClick:()=>b(C.elementId),children:[s.jsx("div",{className:"flex items-baseline gap-2 overflow-hidden",children:s.jsx("span",{className:`${_} truncate`,children:C.text})}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("span",{className:"text-[9px] text-gray-400 font-mono",children:["p.",C.page]}),s.jsx("button",{onClick:le=>{le.stopPropagation(),j(C.id,"rejected")},className:"text-brand-600 hover:text-brand-700 transition-colors",title:"Remove from TOC",children:s.jsx(ui,{size:12})})]})]},C.id)})})]})]}),Ee==="ai"&&s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:[s.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Document AI"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Ask for practical edits and automation."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 space-y-3 max-h-[calc(100vh-420px)]",children:[M.filter(C=>C.role!=="system").length===0&&s.jsx("div",{className:"text-center text-gray-400 py-8 text-xs italic",children:"No messages yet. Ask the AI to modify the document."}),M.filter(C=>C.role!=="system").map((C,w)=>s.jsxs("div",{className:`text-xs leading-relaxed ${C.role==="user"?"text-gray-800":"text-brand-700"}`,children:[s.jsx("div",{className:"font-semibold mb-1",children:C.role==="user"?"You":"AI"}),s.jsx("div",{className:"whitespace-pre-wrap",children:C.content})]},w))]}),s.jsx("div",{className:"border-t border-gray-200 p-3 bg-white",children:oe?s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("textarea",{value:z,onChange:C=>ie(C.target.value),onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),we())},placeholder:"E.g. Cambia il font delle righe con un font calligrafico...",className:"w-full h-16 border border-gray-300 rounded px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-brand-500"}),s.jsx("button",{onClick:we,disabled:ye||!z.trim(),className:`px-3 py-2 text-xs text-white rounded shadow-sm ${ye||!z.trim()?"bg-gray-300 cursor-not-allowed":"bg-violet-600 hover:bg-violet-700"}`,children:ye?"Working...":"Run AI Task"})]}):s.jsxs("div",{className:"text-xs text-gray-600 space-y-2",children:[s.jsx("div",{children:"Set your OpenAI API key to use AI features."}),s.jsx("button",{onClick:fe,className:"px-3 py-2 text-xs text-white bg-violet-600 hover:bg-violet-700 rounded shadow-sm",children:"Open Settings"})]})})]})]})]})},j0=({image:r,containerRef:h,isCropping:u,showSmartGuides:c,onCropComplete:p,onCancelCrop:x,onResize:m,multiSelectedElements:d,pageMargins:S})=>{const b=r.tagName==="IMG",[j,M]=q.useState(null),[z,ye]=q.useState(null),[oe,ie]=q.useState([]),[we,fe]=q.useState(!0),Be=96,De=w=>{if(!w||!S)return null;const _=w.getBoundingClientRect(),le=_.width/w.offsetWidth||1;return{left:_.left+S.left*Be*le,right:_.right-S.right*Be*le}},W=()=>{if(r&&h.current){const w=r.getBoundingClientRect(),_=h.current.getBoundingClientRect();M({...w,top:w.top-_.top+h.current.scrollTop,left:w.left-_.left+h.current.scrollLeft,width:w.width,height:w.height,x:w.x,y:w.y,bottom:w.bottom,right:w.right,toJSON:w.toJSON})}};if(q.useEffect(()=>{W();const w=h.current;if(w){w.addEventListener("scroll",W),window.addEventListener("resize",W);const _=new ResizeObserver(W);return _.observe(r),()=>{w.removeEventListener("scroll",W),window.removeEventListener("resize",W),_.disconnect()}}},[r,h]),q.useEffect(()=>{u&&j&&ye({x:0,y:0,w:j.width,h:j.height})},[u]),!j)return null;const Ee=(w,_)=>{w.preventDefault(),w.stopPropagation();const le=Array.isArray(d)?d:[],be=r,Le=be.closest(".page"),qe=new Set;le.forEach(ze=>{const rt=document.getElementById(ze);rt&&qe.add(rt)}),qe.add(be);let k=Array.from(qe);if(Le&&(k=k.filter(ze=>ze.closest(".page")===Le)),k.length>1){const ze=k.map(yt=>({el:yt,rect:yt.getBoundingClientRect(),position:window.getComputedStyle(yt).position})),rt=Math.min(...ze.map(yt=>yt.rect.left)),He=Math.min(...ze.map(yt=>yt.rect.top)),Ye=Math.max(...ze.map(yt=>yt.rect.right)),Fe=Math.max(...ze.map(yt=>yt.rect.bottom)),at=Math.max(1,Ye-rt),Xt=Math.max(1,Fe-He),kt=_.includes("e"),zt=_.includes("w"),Pe=_.includes("s"),sn=_.includes("n"),Rt=kt||zt,Lt=sn||Pe;ze.forEach(({el:yt})=>{yt.style.setProperty("max-width","none","important"),yt.style.setProperty("max-height","none","important"),yt.style.setProperty("min-width","0","important"),yt.style.setProperty("min-height","0","important"),yt.style.setProperty("aspect-ratio","auto","important"),yt.style.setProperty("object-fit","fill","important")});const dt=w.clientX,ln=w.clientY,Mn=k.every(yt=>yt.getAttribute("data-ignore-margins")==="true")?null:De(Le),Zn=yt=>{const kn=yt.clientX-dt,In=yt.clientY-ln;let Sn=rt,Nn=Ye,Pt=He,Ht=Fe;kt&&(Nn=Ye+kn),zt&&(Sn=rt+kn),Pe&&(Ht=Fe+In),sn&&(Pt=He+In);let bt=Nn-Sn,Ut=Ht-Pt;const fn=20;if(bt<fn&&(bt=fn),Ut<fn&&(Ut=fn),Mn){let Ot=Sn;if(Ot<Mn.left){const mn=Mn.left-Ot;Ot=Mn.left,bt=Math.max(fn,bt-mn)}Ot+bt>Mn.right&&(bt=Math.max(fn,Mn.right-Ot)),Sn=Ot}if(we&&b){const Ot=at/Xt;Rt&&!Lt?Ut=bt/Ot:Lt&&!Rt?bt=Ut*Ot:Rt&&Lt&&(Math.abs(kn)>=Math.abs(In)?Ut=bt/Ot:bt=Ut*Ot);const mn=kt||!kt&&!zt,jn=Pe||!Pe&&!sn;mn?(Sn=rt,Nn=Sn+bt):(Nn=Ye,Sn=Nn-bt),jn?(Pt=He,Ht=Pt+Ut):(Ht=Fe,Pt=Ht-Ut)}ze.forEach(({el:Ot,rect:mn,position:jn})=>{const Ln=(mn.left-rt)/at,On=(mn.top-He)/Xt,Cn=(mn.right-rt)/at,Kn=(mn.bottom-He)/Xt,qn=Sn+Ln*bt,ml=Pt+On*Ut,Je=(Cn-Ln)*bt,Tn=(Kn-On)*Ut;if(Je>0&&Ot.style.setProperty("width",`${Je}px`,"important"),Tn>0&&Ot.style.setProperty("height",`${Tn}px`,"important"),jn==="absolute"||jn==="fixed"){const Yn=Ot.offsetParent;if(Yn){const xl=Yn.getBoundingClientRect(),yl=qn-xl.left,zl=ml-xl.top;Ot.style.setProperty("left",`${yl}px`,"important"),Ot.style.setProperty("top",`${zl}px`,"important")}}}),W()},gn=()=>{document.removeEventListener("mousemove",Zn),document.removeEventListener("mouseup",gn),m&&m()};document.addEventListener("mousemove",Zn),document.addEventListener("mouseup",gn);return}let F=w.clientX,Se=w.clientY;const Ne=r.getBoundingClientRect();w.clientX-Ne.left,w.clientY-Ne.top;const Y=r.getBoundingClientRect(),y=Y.width,A=Y.height,K=parseFloat(r.style.left)||0,se=parseFloat(r.style.top)||0,H=r.getAttribute("data-ignore-margins")==="true"?null:De(r.closest(".page"));r.style.setProperty("max-width","none","important"),r.style.setProperty("max-height","none","important"),r.style.setProperty("min-width","0","important"),r.style.setProperty("min-height","0","important"),r.style.setProperty("aspect-ratio","auto","important"),r.style.setProperty("object-fit","fill","important"),r.style.setProperty("width",`${y}px`),r.style.setProperty("height",`${A}px`);const Ve=ze=>{const rt=ze.clientX-F,He=ze.clientY-Se;let Ye=y,Fe=A,at=K,Xt=se;const kt=_.includes("e"),zt=_.includes("w"),Pe=_.includes("s"),sn=_.includes("n");kt?Ye=y+rt:zt&&(Ye=y-rt),Pe?Fe=A+He:sn&&(Fe=A-He),r.classList.contains("floating-text")&&(zt&&(at=K+rt),sn&&(Xt=se+He));const Rt=20;if(H){let Lt=Y.left;if(zt&&(Lt=Y.left+rt),Lt<H.left){const dt=H.left-Lt;Lt=H.left,Ye=Math.max(Rt,Ye-dt)}Lt+Ye>H.right&&(Ye=Math.max(Rt,H.right-Lt)),r.classList.contains("floating-text")&&zt&&(at=K+(Lt-Y.left))}if(we&&b){const Lt=y/A,dt=kt||zt,ln=sn||Pe;dt&&!ln?Fe=Ye/Lt:ln&&!dt?Ye=Fe*Lt:dt&&ln&&(Math.abs(rt)>=Math.abs(He)?Fe=Ye/Lt:Ye=Fe*Lt)}if(we&&b){const Lt=y/A;Ye<Rt&&(Ye=Rt,Fe=Ye/Lt),Fe<Rt&&(Fe=Rt,Ye=Fe*Lt)}else Ye<Rt&&(Ye=Rt),Fe<Rt&&(Fe=Rt);r.classList.contains("floating-text")&&(zt&&Ye<Rt&&(at=K+(y-Rt)),sn&&Fe<Rt&&(Xt=se+(A-Rt))),r.style.setProperty("width",`${Ye}px`,"important"),r.style.setProperty("height",`${Fe}px`,"important"),r.classList.contains("floating-text")&&(r.style.setProperty("left",`${at}px`,"important"),r.style.setProperty("top",`${Xt}px`,"important")),W()},ot=()=>{document.removeEventListener("mousemove",Ve),document.removeEventListener("mouseup",ot),m&&m()};document.addEventListener("mousemove",Ve),document.addEventListener("mouseup",ot)},_e=w=>{w.preventDefault(),w.stopPropagation();let _=w.clientX,le=w.clientY;const be=r.getBoundingClientRect(),Le=w.clientX-be.left,qe=w.clientY-be.top,k=r.getAttribute("data-ignore-margins")==="true",F=window.getComputedStyle(r);r.classList.contains("floating-text")?r.style.position="absolute":F.position==="static"&&(r.style.position="relative");let Se=parseFloat(r.style.left)||0,Ne=parseFloat(r.style.top)||0,Y={x:[],y:[]},y=null,A=null;if(c&&h.current){A=r.getBoundingClientRect();const Oe=r.closest(".page");if(Oe){const H=Oe.getBoundingClientRect();Y.x.push(H.left+H.width/2),Array.from(Oe.querySelectorAll("img, .mission-box, h1, h2, h3, p")).forEach(ot=>{if(ot===r)return;const ze=ot.getBoundingClientRect();Y.x.push(ze.left),Y.x.push(ze.left+ze.width/2),Y.x.push(ze.right),Y.y.push(ze.top),Y.y.push(ze.top+ze.height/2),Y.y.push(ze.bottom)})}y=h.current.getBoundingClientRect()}const K=Oe=>{let H=Oe.clientX-_,Ve=Oe.clientY-le;if(r.classList.contains("floating-text")){const He=document.elementsFromPoint(Oe.clientX,Oe.clientY).map(Fe=>Fe.closest(".page")).find(Fe=>Fe),Ye=r.closest(".page");if(He&&Ye&&He!==Ye){const Fe=He.getBoundingClientRect(),at=Oe.clientX-Fe.left-Le,Xt=Oe.clientY-Fe.top-qe;let kt=at;if(!k&&S){const zt=Fe.width/He.offsetWidth||1,Pe=S.left*Be*zt,sn=Fe.width-S.right*Be*zt-be.width;kt=Math.max(Pe,Math.min(sn,at))}r.style.left=`${kt}px`,r.style.top=`${Xt}px`,He.appendChild(r),Se=at,Ne=Xt,_=Oe.clientX,le=Oe.clientY,W();return}}if(!k){const rt=r.closest(".page"),He=De(rt);if(He){const Ye=be.left+H,Fe=Ye+be.width;Ye<He.left&&(H+=He.left-Ye),Fe>He.right&&(H-=Fe-He.right)}}const ot=[],ze=5;if(c&&A&&y&&h.current){const rt=A.left+H,He=A.right+H,Ye=A.left+A.width/2+H,Fe=A.top+Ve,at=A.bottom+Ve,Xt=A.top+A.height/2+Ve;let kt=!1;for(const Pe of Y.x)if(Math.abs(Ye-Pe)<ze){H+=Pe-Ye,ot.push({type:"vertical",x:Pe-(A.left+H),y:-2e3,length:4e3}),kt=!0;break}if(!kt){for(const Pe of Y.x)if(Math.abs(rt-Pe)<ze){H+=Pe-rt,ot.push({type:"vertical",x:Pe-(A.left+H),y:-2e3,length:4e3}),kt=!0;break}}if(!kt){for(const Pe of Y.x)if(Math.abs(He-Pe)<ze){H+=Pe-He,ot.push({type:"vertical",x:Pe-(A.left+H),y:-2e3,length:4e3});break}}let zt=!1;for(const Pe of Y.y)if(Math.abs(Xt-Pe)<ze){Ve+=Pe-Xt,ot.push({type:"horizontal",y:Pe-(A.top+Ve),x:-2e3,length:4e3}),zt=!0;break}if(!zt){for(const Pe of Y.y)if(Math.abs(Fe-Pe)<ze){Ve+=Pe-Fe,ot.push({type:"horizontal",y:Pe-(A.top+Ve),x:-2e3,length:4e3}),zt=!0;break}}if(!zt){for(const Pe of Y.y)if(Math.abs(at-Pe)<ze){Ve+=Pe-at,ot.push({type:"horizontal",y:Pe-(A.top+Ve),x:-2e3,length:4e3});break}}}ie(ot),r.classList.contains("floating-text")||(r.style.position="relative"),r.style.left=`${Se+H}px`,r.style.top=`${Ne+Ve}px`,W()},se=()=>{ie([]),document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",se),m&&m()};document.addEventListener("mousemove",K),document.addEventListener("mouseup",se)},N=(w,_)=>{if(!z)return;w.preventDefault(),w.stopPropagation();const le=w.clientX,be=w.clientY,Le={...z},qe=F=>{const Se=F.clientX-le,Ne=F.clientY-be;let Y=Le.x,y=Le.y,A=Le.w,K=Le.h;_==="move"?(Y+=Se,y+=Ne):(_.includes("e")&&(A+=Se),_.includes("s")&&(K+=Ne),_.includes("w")&&(Y+=Se,A-=Se),_.includes("n")&&(y+=Ne,K-=Ne));const se=j.width,Oe=j.height;A<0&&(Y+=A,A=Math.abs(A)),K<0&&(y+=K,K=Math.abs(K)),Y<0&&(A+=Y,Y=0),y<0&&(K+=y,y=0),Y+A>se&&(A=se-Y),y+K>Oe&&(K=Oe-y),A<10&&(A=10),K<10&&(K=10),ye({x:Y,y,w:A,h:K})},k=()=>{document.removeEventListener("mousemove",qe),document.removeEventListener("mouseup",k)};document.addEventListener("mousemove",qe),document.addEventListener("mouseup",k)},J=()=>{if(!z)return;const w=document.createElement("canvas"),_=w.getContext("2d");if(!_)return;const le=window.getComputedStyle(r),be=parseFloat(le.borderLeftWidth)||0,Le=parseFloat(le.borderTopWidth)||0,qe=parseFloat(le.borderRightWidth)||0,k=parseFloat(le.borderBottomWidth)||0,F=be,Se=Le,Ne=j.width-be-qe,Y=j.height-Le-k,y=Math.max(z.x,F),A=Math.max(z.y,Se),K=Math.min(z.x+z.w,F+Ne),se=Math.min(z.y+z.h,Se+Y),Oe=Math.max(0,K-y),H=Math.max(0,se-A);if(Oe<=0||H<=0){alert("Selection is empty or entirely on the border.");return}const Ve=r.naturalWidth/Ne,ot=r.naturalHeight/Y,ze=(y-F)*Ve,rt=(A-Se)*ot,He=Oe*Ve,Ye=H*ot;w.width=He,w.height=Ye;try{_.drawImage(r,ze,rt,He,Ye,0,0,He,Ye);const Fe=Oe+be+qe,at=H+Le+k;p(w.toDataURL(),Fe,at)}catch(Fe){console.error("Crop failed",Fe),alert("Could not crop image. It might be tainted (cross-origin).")}},C=({dir:w,cursor:_,onStart:le})=>{const be={position:"absolute",width:"10px",height:"10px",backgroundColor:"white",border:"1px solid #8d55f1",zIndex:50,cursor:_};return w.includes("n")?be.top="-5px":w.includes("s")?be.bottom="-5px":be.top="calc(50% - 5px)",w.includes("w")?be.left="-5px":w.includes("e")?be.right="-5px":be.left="calc(50% - 5px)",s.jsx("div",{style:be,onMouseDown:Le=>le(Le,w)})};return u&&z&&b?s.jsxs("div",{style:{position:"absolute",top:j.top,left:j.left,width:j.width,height:j.height,zIndex:50,pointerEvents:"none"},"data-overlay":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 pointer-events-auto"}),s.jsxs("div",{style:{position:"absolute",top:z.y,left:z.x,width:z.w,height:z.h,border:"1px solid rgba(255,255,255,0.8)",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)",cursor:"move",pointerEvents:"auto"},onMouseDown:w=>N(w,"move"),children:[s.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[s.jsx("div",{className:"flex-1 border-b border-white/30"}),s.jsx("div",{className:"flex-1 border-b border-white/30"}),s.jsx("div",{className:"flex-1"})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-row",children:[s.jsx("div",{className:"flex-1 border-r border-white/30"}),s.jsx("div",{className:"flex-1 border-r border-white/30"}),s.jsx("div",{className:"flex-1"})]}),s.jsx(C,{dir:"nw",cursor:"nw-resize",onStart:N}),s.jsx(C,{dir:"n",cursor:"n-resize",onStart:N}),s.jsx(C,{dir:"ne",cursor:"ne-resize",onStart:N}),s.jsx(C,{dir:"e",cursor:"e-resize",onStart:N}),s.jsx(C,{dir:"se",cursor:"se-resize",onStart:N}),s.jsx(C,{dir:"s",cursor:"s-resize",onStart:N}),s.jsx(C,{dir:"sw",cursor:"sw-resize",onStart:N}),s.jsx(C,{dir:"w",cursor:"w-resize",onStart:N})]}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 flex gap-2 pointer-events-auto bg-white p-1 rounded shadow-xl border border-gray-200",children:[s.jsx("button",{onClick:J,className:"bg-brand-600 hover:bg-brand-700 text-white px-3 py-1 rounded text-xs font-bold uppercase tracking-wide",children:"Apply"}),s.jsx("button",{onClick:x,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded text-xs font-bold uppercase tracking-wide",children:"Cancel"})]})]}):s.jsxs("div",{style:{position:"absolute",top:j.top,left:j.left,width:j.width,height:j.height,pointerEvents:"none",border:"1px solid #8d55f1",zIndex:40},"data-overlay":"true",children:[s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"32px",height:"32px",backgroundColor:"rgba(141, 85, 241, 0.9)",borderRadius:"50%",cursor:"move",pointerEvents:"auto",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseDown:_e,title:"Drag to move",children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:s.jsx("path",{d:"M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3M12 12L5 12M12 12L12 5M12 12L19 12M12 12L12 19"})})}),b&&s.jsx("button",{type:"button",onClick:()=>fe(w=>!w),title:we?"Unlock proportions":"Lock proportions",style:{position:"absolute",top:-36,left:0,pointerEvents:"auto",backgroundColor:we?"#8d55f1":"#ffffff",color:we?"#ffffff":"#4b5563",border:"1px solid #e5e7eb",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:600},children:we?"Lock ratio":"Unlock ratio"}),s.jsxs("div",{style:{pointerEvents:"auto"},children:[s.jsx(C,{dir:"nw",cursor:"nw-resize",onStart:Ee}),s.jsx(C,{dir:"n",cursor:"n-resize",onStart:Ee}),s.jsx(C,{dir:"ne",cursor:"ne-resize",onStart:Ee}),s.jsx(C,{dir:"e",cursor:"e-resize",onStart:Ee}),s.jsx(C,{dir:"se",cursor:"se-resize",onStart:Ee}),s.jsx(C,{dir:"s",cursor:"s-resize",onStart:Ee}),s.jsx(C,{dir:"sw",cursor:"sw-resize",onStart:Ee}),s.jsx(C,{dir:"w",cursor:"w-resize",onStart:Ee})]}),oe.map((w,_)=>s.jsx("div",{style:{position:"absolute",backgroundColor:"#ec4899",zIndex:60,pointerEvents:"none",...w.type==="horizontal"?{top:w.y,left:w.x,width:w.length,height:"1px"}:{top:w.y,left:w.x,width:"1px",height:w.length}}},_))]})},ax=r=>{const h=r.getBoundingClientRect(),u=r.offsetHeight||1;return h.height/u||1},U0=r=>{if(r.classList.contains("page-footer")||r.classList.contains("image-overlay")||r.classList.contains("resize-handle")||r.tagName==="STYLE")return!1;const h=window.getComputedStyle(r).position;return h!=="absolute"&&h!=="fixed"},Ll=r=>Array.from(r.children).filter(U0),fi=r=>Array.from(r.children).find(u=>u.classList.contains("page-footer"))??null,Au=r=>{const h=ax(r),u=r.getBoundingClientRect(),c=window.getComputedStyle(r),p=(parseFloat(c.paddingBottom)||0)*h;let x=u.bottom-p;const m=fi(r);if(m){const d=m.getBoundingClientRect();d.height>0&&(x=Math.min(x,d.top))}return x},ju=r=>r.getBoundingClientRect().bottom,vu=r=>{const h=Ll(r);if(h.length===0)return!1;const u=Au(r);for(let c=h.length-1;c>=0;c--)if(ju(h[c])>u+1)return!0;return!1},sx=r=>{const h=Array.from(r.children);for(let u=h.length-1;u>=0;u--)if(U0(h[u]))return h[u];return null},ox=r=>{const h=Array.from(r.childNodes);let u=r.querySelector(".page"),c=!1;u||(u=document.createElement("div"),u.className="page",r.insertBefore(u,r.firstChild),c=!0);const p=[];return h.forEach(x=>{var m;if(x.nodeType===Node.ELEMENT_NODE){const d=x;d.classList.contains("page")?u=d:!d.classList.contains("image-overlay")&&!d.classList.contains("resize-handle")&&d.tagName!=="STYLE"&&p.push(x)}else x.nodeType===Node.TEXT_NODE&&((m=x.textContent)!=null&&m.trim())&&p.push(x)}),p.length>0&&u?(p.forEach(x=>{x.parentNode===r&&u.appendChild(x)}),!0):c},rx=r=>{if(r.tagName!=="DIV"&&r.tagName!=="SECTION"&&r.tagName!=="ARTICLE"||r.classList.contains("page")||r.classList.contains("page-footer")||r.classList.contains("mission-box")||r.classList.contains("spacer")||r.className&&r.className.startsWith&&/shape-/.test(r.className)||r.classList.contains("toc-style-dotted")||r.children.length===0||r.className&&r.className.trim()||r.hasAttribute("style"))return!1;const h=window.getComputedStyle(r),u=(parseFloat(h.paddingTop)||0)>0||(parseFloat(h.paddingBottom)||0)>0,c=(parseFloat(h.borderTopWidth)||0)>0||(parseFloat(h.borderBottomWidth)||0)>0,p=h.backgroundColor!=="rgba(0, 0, 0, 0)"&&h.backgroundColor!=="transparent";return!u&&!c&&!p},wu=r=>{let h=!1,u=0;for(;u<10;){u++;const c=Ll(r);if(c.length!==1||!rx(c[0]))break;const p=c[0],x=fi(r);for(;p.firstChild;)r.insertBefore(p.firstChild,x);p.remove(),h=!0}return h},Mu=new Set(["UL","OL","BLOCKQUOTE","DIV","SECTION"]),ix=()=>`split-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,C0=(r,h)=>{if(!Mu.has(r.tagName))return null;const u=Array.from(r.children);if(u.length<=1)return null;let c=-1;for(let m=0;m<u.length;m++)if(u[m].getBoundingClientRect().bottom>h+1){c=m;break}if(c<=0)return null;r.getAttribute("data-split-id")||r.setAttribute("data-split-original",r.outerHTML);const p=r.cloneNode(!1);p.removeAttribute("id");const x=r.getAttribute("data-split-id")??ix();r.setAttribute("data-split-id",x),p.setAttribute("data-split-id",x);for(let m=c;m<u.length;m++)p.appendChild(u[m]);return p},T0=(r,h)=>{const u=Au(r),c=Ll(r);for(let p=c.length-1;p>=0;p--){const x=c[p];if(ju(x)<=u+1)continue;const m=C0(x,u);if(m)return Ko(h,m),!0;if(Mu.has(x.tagName)){const d=Array.from(x.children);for(let S=d.length-1;S>=0;S--){const b=d[S];if(ju(b)<=u+1)continue;const j=C0(b,u);if(j){const M=x.cloneNode(!1);M.removeAttribute("id"),M.appendChild(j);for(let z=S+1;z<d.length;z++)M.appendChild(d[z]);return Ko(h,M),!0}break}}break}return!1},Ko=(r,h)=>{if(h.contains(r)||h===r||!h.parentNode&&!h.isConnected&&r.contains(h))return;const u=Ll(r)[0],c=fi(r);u?r.insertBefore(h,u):c?r.insertBefore(h,c):r.appendChild(h)},cx=(r,h)=>{if(h.contains(r)||h===r)return;const u=fi(r);u?r.insertBefore(h,u):r.appendChild(h)},q0=(r,h)=>{if(!r||!h)return!1;const u=r.getAttribute("data-split-id"),c=h.getAttribute("data-split-id");if(!u||u!==c||r.tagName!==h.tagName)return!1;for(;h.firstChild;)r.appendChild(h.firstChild);return h.remove(),r.removeAttribute("data-split-id"),r.removeAttribute("data-split-original"),!0},ux=new Set(["UL","OL","BLOCKQUOTE","DIV","SECTION","TABLE"]),fx=new Set(["page","page-footer","spacer","mission-box","editor-workspace","floating-text","image-overlay","resize-handle","toc-style-dotted","recipe-card","meal-plan-day"]),E0=r=>{for(const h of fx)if(r.classList.contains(h))return!0;return!!/shape-/.test(r.className)},dx=(r,h)=>{if(r.tagName!==h.tagName||!ux.has(r.tagName)||E0(r)||E0(h))return!1;if(r.tagName==="DIV"||r.tagName==="SECTION"){const u=r.className.trim(),c=h.className.trim();if(!u||!c||u!==c)return!1}return!0},hx=(r,h)=>{for(;h.firstChild;)r.appendChild(h.firstChild);return h.remove(),r.removeAttribute("data-split-id"),r.removeAttribute("data-split-original"),!0},Cu=r=>{let h=!1,u=!0;for(;u;){u=!1;const c=Ll(r);for(let p=0;p<c.length-1;p++)if(q0(c[p],c[p+1])){h=!0,u=!0;break}}return h},px=r=>{let h=!1,u=!0;for(;u;){u=!1;const c=Ll(r);for(let p=0;p<c.length-1;p++)if(dx(c[p],c[p+1])){hx(c[p],c[p+1]),h=!0,u=!0;break}}return h},It=r=>{if(!r||!r.isConnected)return!1;let h=ox(r);const u=Array.from(r.querySelectorAll(".page"));if(u.length===0)return h;for(const x of u)wu(x)&&(h=!0);let c=0;const p=5e3;for(let x=0;x<u.length&&c<p;x++){const m=u[x];for(wu(m);vu(m)&&c<p;){c++;const d=sx(m);if(!d||d.contains(m))break;let S=u[x+1];if(S&&S.hasAttribute("data-page-break")){const j=document.createElement("div");j.className="page",r.insertBefore(j,S),u.splice(x+1,0,j),S=j}if(S||(S=document.createElement("div"),S.className="page",r.appendChild(S),u.push(S)),Ll(m).length<=1){if(!T0(m,S))break}else Mu.has(d.tagName)&&d.getBoundingClientRect().top<Au(m)&&T0(m,S)||Ko(S,d);h=!0}if(Cu(m)&&(h=!0),x+1<u.length){const d=u[x+1];if(d.hasAttribute("data-page-break"))continue;for(wu(d);c<p;){const S=Ll(d)[0];if(!S)break;if(cx(m,S),vu(m)){Ko(d,S);break}const b=Ll(m),j=b.length>=2?b[b.length-2]:null,M=b[b.length-1];q0(j,M)&&(h=!0),c++,h=!0}if(Cu(m)&&(h=!0,vu(m))){x--;continue}Ll(d).length===0&&!d.hasAttribute("data-page-break")&&(d.remove(),u.splice(x+1,1))}}for(let x=u.length-1;x>=1&&(Ll(u[x]).length===0&&!u[x].hasAttribute("data-page-break"));x--)u[x].remove(),u.splice(x,1),h=!0;return h},gx=r=>{if(!r||!r.isConnected)return!1;const h=Array.from(r.querySelectorAll(".page"));let u=!1;console.group("[AutoMerge] Scanning pages...");for(let c=0;c<h.length;c++){const p=Ll(h[c]),x=p.map(d=>`${d.tagName}${d.className?"."+d.className.split(" ")[0]:""}`);console.log(`Page ${c+1}: ${p.length} flow children  [${x.join(", ")}]`);const m=[];for(let d=0;d<p.length-1;d++)p[d].tagName===p[d+1].tagName&&m.push(`${p[d].tagName} @ index ${d}-${d+1}`);m.length>0&&console.log(`  Same-type adjacent pairs: ${m.join("; ")}`),Cu(h[c])&&(u=!0),px(h[c])&&(u=!0)}return console.groupEnd(),console.log(`[AutoMerge] Result: ${u?"merged elements":"nothing to merge"}`),u&&It(r),u},mx=({margins:r,onMarginChange:h,width:u,height:c})=>{const[p,x]=q.useState(null),m=q.useRef(null),d=96,S=we=>(we*2.54).toFixed(2),b=(we,fe)=>{we.preventDefault(),we.stopPropagation(),x(fe)};q.useEffect(()=>{if(!p)return;const we=Be=>{if(!m.current)return;const De=m.current.getBoundingClientRect();let W=0;if(p==="top")W=(Be.clientY-De.top)/d;else if(p==="bottom"){const Ee=Be.clientY-De.top;W=(c-Ee)/d}else if(p==="left")W=(Be.clientX-De.left)/d;else if(p==="right"){const Ee=Be.clientX-De.left;W=(u-Ee)/d}W<0&&(W=0),p==="left"||p==="right"?W>u/d/2-.5&&(W=u/d/2-.5):W>c/d/2-.5&&(W=c/d/2-.5),W=Math.round(W*8)/8,h(p,W)},fe=()=>{x(null)};return document.addEventListener("mousemove",we),document.addEventListener("mouseup",fe),()=>{document.removeEventListener("mousemove",we),document.removeEventListener("mouseup",fe)}},[p,c,u,h]);const j=r.top*d,M=c-r.bottom*d,z=r.left*d,ye=u-r.right*d,oe="absolute bg-brand-500 z-50 transition-none",ie="absolute bg-gray-800 text-white text-[10px] px-2 py-1 rounded shadow-lg pointer-events-none transform -translate-x-1/2 whitespace-nowrap z-[60]";return s.jsxs("div",{ref:m,className:"absolute inset-0 pointer-events-none",children:[s.jsx("div",{className:`${oe} w-full h-px pointer-events-none hover:h-1 hover:bg-brand-600 opacity-50 hover:opacity-100`,style:{top:j}}),s.jsx("div",{className:"absolute left-0 right-0 h-4 -translate-y-2 cursor-ns-resize pointer-events-auto",style:{top:j},onMouseDown:we=>b(we,"top")}),p==="top"&&s.jsxs("div",{className:ie,style:{top:j-25,left:"50%"},children:[r.top.toFixed(2),'" (',S(r.top)," cm)"]}),s.jsx("div",{className:`${oe} h-full w-px cursor-ew-resize pointer-events-auto hover:w-1 hover:bg-brand-600 opacity-50 hover:opacity-100`,style:{left:z},onMouseDown:we=>b(we,"left")}),p==="left"&&s.jsxs("div",{className:ie,style:{top:"50%",left:z-40},children:[r.left.toFixed(2),'" (',S(r.left)," cm)"]}),s.jsx("div",{className:`${oe} h-full w-px cursor-ew-resize pointer-events-auto hover:w-1 hover:bg-brand-600 opacity-50 hover:opacity-100`,style:{left:ye},onMouseDown:we=>b(we,"right")}),p==="right"&&s.jsxs("div",{className:ie,style:{top:"50%",left:ye+40},children:[r.right.toFixed(2),'" (',S(r.right)," cm)"]}),s.jsx("div",{className:`${oe} w-full h-px pointer-events-none hover:h-1 hover:bg-brand-600 opacity-50 hover:opacity-100`,style:{top:M}}),s.jsx("div",{className:"absolute left-0 right-0 h-4 -translate-y-2 cursor-ns-resize pointer-events-auto",style:{top:M},onMouseDown:we=>b(we,"bottom")}),p==="bottom"&&s.jsxs("div",{className:ie,style:{bottom:r.bottom*d+10,left:"50%"},children:[r.bottom.toFixed(2),'" (',S(r.bottom)," cm)"]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gray-500/10 pointer-events-none",style:{height:j}}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-500/10 pointer-events-none",style:{height:r.bottom*d}}),s.jsx("div",{className:"absolute top-0 bottom-0 left-0 bg-gray-500/10 pointer-events-none",style:{width:z}}),s.jsx("div",{className:"absolute top-0 bottom-0 right-0 bg-gray-500/10 pointer-events-none",style:{width:r.right*d}})]})},xx=({width:r,height:h,unit:u="in",ppi:c=96,margins:p})=>{const m="#c4a7ff",d="#7539d3",S="rgba(0, 0, 0, 0.05)",b=(j,M)=>{const z=[],ye=j/c;if(ye>50)return null;for(let oe=0;oe<=Math.ceil(ye);oe++){const ie=oe*c;if(ie>j)break;M==="horizontal"?z.push(s.jsxs("g",{children:[s.jsx("line",{x1:ie,y1:0,x2:ie,y2:20,stroke:m,strokeWidth:1}),s.jsx("text",{x:ie+2,y:18,fontSize:"10",fill:d,fontFamily:"sans-serif",children:oe})]},`major-${oe}`)):z.push(s.jsxs("g",{children:[s.jsx("line",{x1:0,y1:ie,x2:20,y2:ie,stroke:m,strokeWidth:1}),s.jsx("text",{x:2,y:ie+10,fontSize:"10",fill:d,fontFamily:"sans-serif",transform:`rotate(-90 2 ${ie+10})`,children:oe})]},`major-${oe}`));const we=8,fe=c/we;for(let Be=1;Be<we;Be++){const De=ie+Be*fe;if(De>j)break;let W=20*.25;Be===4&&(W=10),Be%2===0&&Be!==4&&(W=7),M==="horizontal"?z.push(s.jsx("line",{x1:De,y1:0,x2:De,y2:W,stroke:m,strokeWidth:.5},`sub-${oe}-${Be}`)):z.push(s.jsx("line",{x1:0,y1:De,x2:W,y2:De,stroke:m,strokeWidth:.5},`sub-${oe}-${Be}`))}}return z};return s.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:[s.jsx("div",{className:"absolute top-[-20px] left-0 right-0 h-[20px] bg-brand-50 border-b border-brand-200",children:s.jsxs("svg",{width:r,height:20,className:"overflow-visible",children:[p&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:0,y:0,width:p.left*c,height:20,fill:S}),s.jsx("rect",{x:r-p.right*c,y:0,width:p.right*c,height:20,fill:S})]}),b(r,"horizontal")]})}),s.jsx("div",{className:"absolute top-0 bottom-0 left-[-20px] w-[20px] bg-brand-50 border-r border-brand-200",children:s.jsxs("svg",{width:20,height:h,className:"overflow-visible",children:[p&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:0,y:0,width:20,height:p.top*c,fill:S}),s.jsx("rect",{x:0,y:h-p.bottom*c,width:20,height:p.bottom*c,fill:S})]}),b(h,"vertical")]})}),s.jsx("div",{className:"absolute top-[-20px] left-[-20px] w-[20px] h-[20px] bg-brand-100 border-r border-b border-brand-200 z-10"})]})},yx=({x:r,y:h,onClose:u,onCopy:c,onCut:p,onPaste:x,onCopyStyle:m,onPasteStyle:d,canPasteStyle:S,onCreateQRCode:b,onTransformToTOC:j,onDistributeHoriz:M,onDistributeVert:z,onDistributeHorizMore:ye,onDistributeHorizLess:oe,onDistributeVertMore:ie,onDistributeVertLess:we,onAlignLeft:fe,onAlignCenter:Be,onAlignRight:De,onAlignTop:W,onAlignMiddle:Ee,onAlignBottom:_e,onMoveUp:N,onMoveDown:J,onDelete:C,onDuplicate:w,onMerge:_,onMergePageElements:le,onToggleMarginOverride:be,isMarginOverride:Le,hasBlock:qe})=>{const k=q.useRef(null),[F,Se]=q.useState({x:r,y:h});return q.useEffect(()=>{const Ne=k.current;if(!Ne){Se({x:r,y:h});return}const Y=8,y=Ne.offsetHeight,A=Ne.offsetWidth;let K=r,se=h;se+y>window.innerHeight-Y&&(se=Math.max(Y,h-y)),K+A>window.innerWidth-Y&&(K=Math.max(Y,window.innerWidth-A-Y)),Se({x:K,y:se})},[r,h]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[990]",onClick:u}),s.jsxs("div",{ref:k,className:"fixed z-[1000] bg-white rounded-lg shadow-xl border border-gray-200 py-1 min-w-[170px] pointer-events-auto",style:{left:F.x,top:F.y},onMouseDown:Ne=>{Ne.stopPropagation()},children:[s.jsxs("button",{onClick:()=>{c(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy",s.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"C"})]}),s.jsxs("button",{onClick:()=>{p(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})}),"Cut",s.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"X"})]}),s.jsxs("button",{onClick:()=>{x(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Paste",s.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"V"})]}),(m||d)&&s.jsx("div",{className:"border-t border-gray-100 my-1"}),m&&s.jsxs("button",{onClick:()=>{m(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy style"]}),d&&s.jsxs("button",{onClick:()=>{S&&(d(),u())},className:`w-full px-3 py-2 text-left text-sm flex items-center gap-2 pointer-events-auto ${S?"hover:bg-brand-50 hover:text-brand-700":"text-gray-300 cursor-not-allowed"}`,disabled:!S,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Paste style"]}),_&&s.jsxs("button",{onClick:()=>{_(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto border-t border-gray-100",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Merge"]}),le&&s.jsxs("button",{onClick:()=>{le(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 pointer-events-auto border-t border-gray-100",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Merge Page Elements"]}),qe&&s.jsxs("button",{onClick:()=>{C(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center gap-2 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete",s.jsx("span",{className:"ml-auto text-xs text-gray-400",children:""})]}),b&&s.jsxs("button",{onClick:()=>{b(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 border-t border-gray-100 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4h2v-4zm-6 0H6v4h2v-4zm10-7h2m-6 0h-2v4h2V8zm-6 0H6v4h2V8zm0-4H6v4h2V4zm10 0h-2v4h2V4zM4 20h16a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Create QR Code"]}),j&&s.jsxs("button",{onClick:()=>{j(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2 border-t border-gray-100 pointer-events-auto",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})}),"Transform to TOC"]}),(M||z||fe||Be||De||W||Ee||_e)&&s.jsxs("div",{className:"border-t border-gray-100 px-2 py-2",children:[s.jsx("div",{className:"text-[9px] font-semibold text-gray-400 uppercase tracking-wide mb-1",children:"Align"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-gray-50/60 rounded-md p-1",children:[fe&&s.jsx("button",{onClick:()=>{fe(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Left",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h12M4 12h8M4 18h16"})})}),Be&&s.jsx("button",{onClick:()=>{Be(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Center",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 6h12M4 12h16M6 18h12"})})}),De&&s.jsx("button",{onClick:()=>{De(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Right",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 6h12M12 12h8M4 18h16"})})}),W&&s.jsx("button",{onClick:()=>{W(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Top",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 6h12M8 10v8M12 10v8M16 10v8"})})}),Ee&&s.jsx("button",{onClick:()=>{Ee(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Middle",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 12h12M8 7v10M12 7v10M16 7v10"})})}),_e&&s.jsx("button",{onClick:()=>{_e(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Align Bottom",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18h12M8 6v8M12 6v8M16 6v8"})})})]}),s.jsx("div",{className:"text-[9px] font-semibold text-gray-400 uppercase tracking-wide mt-2 mb-1",children:"Distribute"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 bg-gray-50/60 rounded-md p-1",children:[M&&s.jsx("button",{onClick:()=>{M(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Distribute Horiz",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12h16M7 8v8M17 8v8"})})}),z&&s.jsx("button",{onClick:()=>{z(),u()},className:"w-7 h-7 rounded hover:bg-white border border-transparent hover:border-brand-200",title:"Distribute Vert",children:s.jsx("svg",{className:"w-3.5 h-3.5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16M8 7h8M8 17h8"})})})]})]}),qe&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-t border-gray-100 my-1"}),be&&s.jsxs("button",{onClick:()=>{be(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h16M7 5v14a2 2 0 002 2h6a2 2 0 002-2V5"})}),Le?"Use margins":"Ignore margins"]}),s.jsxs("button",{onClick:()=>{N(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Move up"]}),s.jsxs("button",{onClick:()=>{J(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Move down"]}),s.jsxs("button",{onClick:()=>{w(),u()},className:"w-full px-3 py-2 text-left text-sm hover:bg-brand-50 hover:text-brand-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Duplicate"]})]})]})]})},bx=({element:r,containerRef:h,showSmartGuides:u,onUpdate:c,onAction:p})=>{const[x,m]=q.useState({top:0,left:0,width:0,height:0}),d=q.useRef({x:0,y:0,elementTop:0,elementLeft:0,width:0,height:0}),S=q.useRef(!1),b=q.useRef(null);q.useEffect(()=>{j();const oe=new MutationObserver(j);return oe.observe(r,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("scroll",j,!0),window.addEventListener("resize",j),()=>{oe.disconnect(),window.removeEventListener("scroll",j,!0),window.removeEventListener("resize",j)}},[r]);const j=()=>{if(!h.current)return;const oe=h.current.getBoundingClientRect(),ie=r.getBoundingClientRect();m({top:ie.top-oe.top+h.current.scrollTop,left:ie.left-oe.left+h.current.scrollLeft,width:ie.width,height:ie.height})},M=oe=>{oe.preventDefault(),oe.stopPropagation(),S.current=!0,b.current=null,d.current={x:oe.clientX,y:oe.clientY,elementTop:x.top,elementLeft:x.left,width:x.width,height:x.height},r.style.opacity="0.5";const ie=fe=>{var W,Ee;if(!S.current)return;const Be=document.elementsFromPoint(fe.clientX,fe.clientY);let De;for(const _e of Be){if(_e===r||_e.classList.contains("drag-handle")||_e.closest(".drag-handle"))continue;const N=_e.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, hr, img, table");if(N&&N!==r){De=N;break}}if(document.querySelectorAll(".drop-indicator").forEach(_e=>_e.remove()),De){const _e=De.getBoundingClientRect(),N=fe.clientY<_e.top+_e.height/2;b.current={element:De,isAbove:N};const J=document.createElement("div");J.className="drop-indicator",J.style.cssText=`
          height: 4px;
          background: #8d55f1;
          margin: 4px 0;
          border-radius: 2px;
        `,N?(W=De.parentNode)==null||W.insertBefore(J,De):(Ee=De.parentNode)==null||Ee.insertBefore(J,De.nextSibling)}else b.current=null},we=()=>{var fe,Be;if(S.current=!1,r.style.opacity="",document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",we),document.querySelectorAll(".drop-indicator").forEach(De=>De.remove()),b.current){const{element:De,isAbove:W}=b.current;De!==r&&(W?(fe=De.parentNode)==null||fe.insertBefore(r,De):(Be=De.parentNode)==null||Be.insertBefore(r,De.nextSibling),p==null||p("move",r),c())}b.current=null,j()};document.addEventListener("mousemove",ie),document.addEventListener("mouseup",we)},z=(oe,ie)=>{oe.preventDefault(),oe.stopPropagation();const we=r.getAttribute("data-ignore-margins")==="true";let fe=null;if(!we){const W=r.closest(".page");if(W){const Ee=window.getComputedStyle(W),_e=parseFloat(Ee.paddingLeft)||0,N=parseFloat(Ee.paddingRight)||0;fe=Math.max(50,W.clientWidth-_e-N)}}d.current={x:oe.clientX,y:oe.clientY,elementTop:x.top,elementLeft:x.left,width:r.offsetWidth,height:r.offsetHeight};const Be=W=>{const Ee=W.clientX-d.current.x,_e=W.clientY-d.current.y;if(ie.includes("e")){let N=Math.max(50,d.current.width+Ee);fe&&(N=Math.min(N,fe)),r.style.width=`${N}px`}if(ie.includes("w")){let N=Math.max(50,d.current.width-Ee);fe&&(N=Math.min(N,fe)),r.style.width=`${N}px`}ie.includes("s")&&(r.style.height=`${Math.max(20,d.current.height+_e)}px`),ie.includes("n")&&(r.style.height=`${Math.max(20,d.current.height-_e)}px`),j()},De=()=>{document.removeEventListener("mousemove",Be),document.removeEventListener("mouseup",De),p==null||p("resize",r),c()};document.addEventListener("mousemove",Be),document.addEventListener("mouseup",De)},ye=r.tagName==="HR";return r.tagName,s.jsxs("div",{className:"drag-handle pointer-events-auto",style:{position:"absolute",top:x.top-2,left:x.left-2,width:x.width+4,height:x.height+4,border:"2px solid #8d55f1",borderRadius:"2px",zIndex:100,pointerEvents:"none"},children:[s.jsx("div",{onMouseDown:M,style:{position:"absolute",top:-24,left:"50%",transform:"translateX(-50%)",width:60,height:20,background:"#8d55f1",borderRadius:"4px 4px 0 0",cursor:"grab",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"},children:s.jsxs("svg",{width:"16",height:"10",viewBox:"0 0 16 10",fill:"white",children:[s.jsx("circle",{cx:"4",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"8",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"2",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"8",cy:"7",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"7",r:"1.5"})]})}),s.jsx("div",{onMouseDown:oe=>z(oe,"e"),style:{position:"absolute",right:-6,top:"50%",transform:"translateY(-50%)",width:12,height:24,background:"#8d55f1",borderRadius:4,cursor:"ew-resize",pointerEvents:"auto"}}),s.jsx("div",{onMouseDown:oe=>z(oe,"w"),style:{position:"absolute",left:-6,top:"50%",transform:"translateY(-50%)",width:12,height:24,background:"#8d55f1",borderRadius:4,cursor:"ew-resize",pointerEvents:"auto"}}),!ye&&s.jsx("div",{onMouseDown:oe=>z(oe,"s"),style:{position:"absolute",bottom:-6,left:"50%",transform:"translateX(-50%)",width:24,height:12,background:"#8d55f1",borderRadius:4,cursor:"ns-resize",pointerEvents:"auto"}}),s.jsx("div",{onClick:()=>{if(r.classList.contains("page")||r.classList.contains("editor-workspace")||r.tagName==="BODY"||r.tagName==="HTML"){console.warn("Cannot delete structural element");return}p==null||p("delete",r),r.remove(),c()},style:{position:"absolute",top:-24,right:0,width:20,height:20,background:"#ef4444",borderRadius:"0 4px 0 0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"},children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"white",stroke:"white",strokeWidth:"2",children:s.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})},Y0=({isOpen:r,actionType:h,matches:u,onConfirm:c,onCancel:p})=>{const[x,m]=q.useState(new Set(u.map(z=>z.element.id||"")));if(!r)return null;const d=z=>{const ye=new Set(x);ye.has(z)?ye.delete(z):ye.add(z),m(ye)},S=()=>{m(new Set(u.map(z=>z.element.id||"")))},b=()=>{m(new Set)},j=()=>{c(Array.from(x))},M=z=>{z.scrollIntoView({behavior:"smooth",block:"center"}),z.style.outline="3px solid #f59e0b",setTimeout(()=>{z.style.outline=""},2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-lg w-full mx-4 max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Pattern riconosciuto! "}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:['You performed "',h,'" on similar items. Found ',s.jsx("strong",{children:u.length})," matching items."]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("button",{onClick:S,className:"text-xs px-2 py-1 bg-brand-100 text-brand-700 rounded hover:bg-brand-200",children:"Select all"}),s.jsx("button",{onClick:b,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Deseleziona tutti"})]}),s.jsx("div",{className:"space-y-2",children:u.map((z,ye)=>{var we;const oe=z.element.id||`temp-${ye}`,ie=x.has(oe);return s.jsxs("div",{className:`flex items-center gap-3 p-2 rounded border cursor-pointer transition-colors ${ie?"bg-brand-50 border-brand-300":"bg-gray-50 border-gray-200 hover:bg-brand-50"}`,onClick:()=>d(oe),children:[s.jsx("input",{type:"checkbox",checked:ie,onChange:()=>d(oe),className:"w-4 h-4 text-brand-600 rounded"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-mono text-gray-700 truncate",children:z.preview}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Page ",((we=z.element.closest(".page"))==null?void 0:we.getAttribute("data-page"))||"?"]})]}),s.jsx("button",{onClick:fe=>{fe.stopPropagation(),M(z.element)},className:"text-xs px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300",children:" View"})]},oe)})})]}),s.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[x.size," of ",u.length," selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-brand-50 hover:text-brand-700",children:"Cancel"}),s.jsxs("button",{onClick:j,disabled:x.size===0,className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 shadow-lg shadow-violet-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["Apply to ",x.size," items"]})]})]})]})})},Ps=function(r,h){let p=r;const x=Qo[h];let m=null,d=0,S=null;const b=[],j={},M=function(N,J){d=p*4+17,m=(function(C){const w=new Array(C);for(let _=0;_<C;_+=1){w[_]=new Array(C);for(let le=0;le<C;le+=1)w[_][le]=null}return w})(d),z(0,0),z(d-7,0),z(0,d-7),ie(),oe(),fe(N,J),p>=7&&we(N),S==null&&(S=W(p,x,b)),Be(S,J)},z=function(N,J){for(let C=-1;C<=7;C+=1)if(!(N+C<=-1||d<=N+C))for(let w=-1;w<=7;w+=1)J+w<=-1||d<=J+w||(0<=C&&C<=6&&(w==0||w==6)||0<=w&&w<=6&&(C==0||C==6)||2<=C&&C<=4&&2<=w&&w<=4?m[N+C][J+w]=!0:m[N+C][J+w]=!1)},ye=function(){let N=0,J=0;for(let C=0;C<8;C+=1){M(!0,C);const w=Ba.getLostPoint(j);(C==0||N>w)&&(N=w,J=C)}return J},oe=function(){for(let N=8;N<d-8;N+=1)m[N][6]==null&&(m[N][6]=N%2==0);for(let N=8;N<d-8;N+=1)m[6][N]==null&&(m[6][N]=N%2==0)},ie=function(){const N=Ba.getPatternPosition(p);for(let J=0;J<N.length;J+=1)for(let C=0;C<N.length;C+=1){const w=N[J],_=N[C];if(m[w][_]==null)for(let le=-2;le<=2;le+=1)for(let be=-2;be<=2;be+=1)le==-2||le==2||be==-2||be==2||le==0&&be==0?m[w+le][_+be]=!0:m[w+le][_+be]=!1}},we=function(N){const J=Ba.getBCHTypeNumber(p);for(let C=0;C<18;C+=1){const w=!N&&(J>>C&1)==1;m[Math.floor(C/3)][C%3+d-8-3]=w}for(let C=0;C<18;C+=1){const w=!N&&(J>>C&1)==1;m[C%3+d-8-3][Math.floor(C/3)]=w}},fe=function(N,J){const C=x<<3|J,w=Ba.getBCHTypeInfo(C);for(let _=0;_<15;_+=1){const le=!N&&(w>>_&1)==1;_<6?m[_][8]=le:_<8?m[_+1][8]=le:m[d-15+_][8]=le}for(let _=0;_<15;_+=1){const le=!N&&(w>>_&1)==1;_<8?m[8][d-_-1]=le:_<9?m[8][15-_-1+1]=le:m[8][15-_-1]=le}m[d-8][8]=!N},Be=function(N,J){let C=-1,w=d-1,_=7,le=0;const be=Ba.getMaskFunction(J);for(let Le=d-1;Le>0;Le-=2)for(Le==6&&(Le-=1);;){for(let qe=0;qe<2;qe+=1)if(m[w][Le-qe]==null){let k=!1;le<N.length&&(k=(N[le]>>>_&1)==1),be(w,Le-qe)&&(k=!k),m[w][Le-qe]=k,_-=1,_==-1&&(le+=1,_=7)}if(w+=C,w<0||d<=w){w-=C,C=-C;break}}},De=function(N,J){let C=0,w=0,_=0;const le=new Array(J.length),be=new Array(J.length);for(let F=0;F<J.length;F+=1){const Se=J[F].dataCount,Ne=J[F].totalCount-Se;w=Math.max(w,Se),_=Math.max(_,Ne),le[F]=new Array(Se);for(let K=0;K<le[F].length;K+=1)le[F][K]=255&N.getBuffer()[K+C];C+=Se;const Y=Ba.getErrorCorrectPolynomial(Ne),A=Jo(le[F],Y.getLength()-1).mod(Y);be[F]=new Array(Y.getLength()-1);for(let K=0;K<be[F].length;K+=1){const se=K+A.getLength()-be[F].length;be[F][K]=se>=0?A.getAt(se):0}}let Le=0;for(let F=0;F<J.length;F+=1)Le+=J[F].totalCount;const qe=new Array(Le);let k=0;for(let F=0;F<w;F+=1)for(let Se=0;Se<J.length;Se+=1)F<le[Se].length&&(qe[k]=le[Se][F],k+=1);for(let F=0;F<_;F+=1)for(let Se=0;Se<J.length;Se+=1)F<be[Se].length&&(qe[k]=be[Se][F],k+=1);return qe},W=function(N,J,C){const w=A0.getRSBlocks(N,J),_=M0();for(let be=0;be<C.length;be+=1){const Le=C[be];_.put(Le.getMode(),4),_.put(Le.getLength(),Ba.getLengthInBits(Le.getMode(),N)),Le.write(_)}let le=0;for(let be=0;be<w.length;be+=1)le+=w[be].dataCount;if(_.getLengthInBits()>le*8)throw"code length overflow. ("+_.getLengthInBits()+">"+le*8+")";for(_.getLengthInBits()+4<=le*8&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(!1);for(;!(_.getLengthInBits()>=le*8||(_.put(236,8),_.getLengthInBits()>=le*8));)_.put(17,8);return De(_,w)};j.addData=function(N,J){J=J||"Byte";let C=null;switch(J){case"Numeric":C=vx(N);break;case"Alphanumeric":C=wx(N);break;case"Byte":C=Sx(N);break;case"Kanji":C=Nx(N);break;default:throw"mode:"+J}b.push(C),S=null},j.isDark=function(N,J){if(N<0||d<=N||J<0||d<=J)throw N+","+J;return m[N][J]},j.getModuleCount=function(){return d},j.make=function(){if(p<1){let N=1;for(;N<40;N++){const J=A0.getRSBlocks(N,x),C=M0();for(let _=0;_<b.length;_++){const le=b[_];C.put(le.getMode(),4),C.put(le.getLength(),Ba.getLengthInBits(le.getMode(),N)),le.write(C)}let w=0;for(let _=0;_<J.length;_++)w+=J[_].dataCount;if(C.getLengthInBits()<=w*8)break}p=N}M(!1,ye())},j.createTableTag=function(N,J){N=N||2,J=typeof J>"u"?N*4:J;let C="";C+='<table style="',C+=" border-width: 0px; border-style: none;",C+=" border-collapse: collapse;",C+=" padding: 0px; margin: "+J+"px;",C+='">',C+="<tbody>";for(let w=0;w<j.getModuleCount();w+=1){C+="<tr>";for(let _=0;_<j.getModuleCount();_+=1)C+='<td style="',C+=" border-width: 0px; border-style: none;",C+=" border-collapse: collapse;",C+=" padding: 0px; margin: 0px;",C+=" width: "+N+"px;",C+=" height: "+N+"px;",C+=" background-color: ",C+=j.isDark(w,_)?"#000000":"#ffffff",C+=";",C+='"/>';C+="</tr>"}return C+="</tbody>",C+="</table>",C},j.createSvgTag=function(N,J,C,w){let _={};typeof arguments[0]=="object"&&(_=arguments[0],N=_.cellSize,J=_.margin,C=_.alt,w=_.title),N=N||2,J=typeof J>"u"?N*4:J,C=typeof C=="string"?{text:C}:C||{},C.text=C.text||null,C.id=C.text?C.id||"qrcode-description":null,w=typeof w=="string"?{text:w}:w||{},w.text=w.text||null,w.id=w.text?w.id||"qrcode-title":null;const le=j.getModuleCount()*N+J*2;let be,Le,qe,k,F="",Se;for(Se="l"+N+",0 0,"+N+" -"+N+",0 0,-"+N+"z ",F+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',F+=_.scalable?"":' width="'+le+'px" height="'+le+'px"',F+=' viewBox="0 0 '+le+" "+le+'" ',F+=' preserveAspectRatio="xMinYMin meet"',F+=w.text||C.text?' role="img" aria-labelledby="'+Ee([w.id,C.id].join(" ").trim())+'"':"",F+=">",F+=w.text?'<title id="'+Ee(w.id)+'">'+Ee(w.text)+"</title>":"",F+=C.text?'<description id="'+Ee(C.id)+'">'+Ee(C.text)+"</description>":"",F+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',F+='<path d="',qe=0;qe<j.getModuleCount();qe+=1)for(k=qe*N+J,be=0;be<j.getModuleCount();be+=1)j.isDark(qe,be)&&(Le=be*N+J,F+="M"+Le+","+k+Se);return F+='" stroke="transparent" fill="black"/>',F+="</svg>",F},j.createDataURL=function(N,J){N=N||2,J=typeof J>"u"?N*4:J;const C=j.getModuleCount()*N+J*2,w=J,_=C-J;return Ex(C,C,function(le,be){if(w<=le&&le<_&&w<=be&&be<_){const Le=Math.floor((le-w)/N),qe=Math.floor((be-w)/N);return j.isDark(qe,Le)?0:1}else return 1})},j.createImgTag=function(N,J,C){N=N||2,J=typeof J>"u"?N*4:J;const w=j.getModuleCount()*N+J*2;let _="";return _+="<img",_+=' src="',_+=j.createDataURL(N,J),_+='"',_+=' width="',_+=w,_+='"',_+=' height="',_+=w,_+='"',C&&(_+=' alt="',_+=Ee(C),_+='"'),_+="/>",_};const Ee=function(N){let J="";for(let C=0;C<N.length;C+=1){const w=N.charAt(C);switch(w){case"<":J+="&lt;";break;case">":J+="&gt;";break;case"&":J+="&amp;";break;case'"':J+="&quot;";break;default:J+=w;break}}return J},_e=function(N){N=typeof N>"u"?2:N;const C=j.getModuleCount()*1+N*2,w=N,_=C-N;let le,be,Le,qe,k;const F={"":""," ":""," ":"","  ":" "},Se={"":""," ":""," ":" ","  ":" "};let Ne="";for(le=0;le<C;le+=2){for(Le=Math.floor((le-w)/1),qe=Math.floor((le+1-w)/1),be=0;be<C;be+=1)k="",w<=be&&be<_&&w<=le&&le<_&&j.isDark(Le,Math.floor((be-w)/1))&&(k=" "),w<=be&&be<_&&w<=le+1&&le+1<_&&j.isDark(qe,Math.floor((be-w)/1))?k+=" ":k+="",Ne+=N<1&&le+1>=_?Se[k]:F[k];Ne+=`
`}return C%2&&N>0?Ne.substring(0,Ne.length-C-1)+Array(C+1).join(""):Ne.substring(0,Ne.length-1)};return j.createASCII=function(N,J){if(N=N||1,N<2)return _e(J);N-=1,J=typeof J>"u"?N*2:J;const C=j.getModuleCount()*N+J*2,w=J,_=C-J;let le,be,Le,qe;const k=Array(N+1).join(""),F=Array(N+1).join("  ");let Se="",Ne="";for(le=0;le<C;le+=1){for(Le=Math.floor((le-w)/N),Ne="",be=0;be<C;be+=1)qe=1,w<=be&&be<_&&w<=le&&le<_&&j.isDark(Le,Math.floor((be-w)/N))&&(qe=0),Ne+=qe?k:F;for(Le=0;Le<N;Le+=1)Se+=Ne+`
`}return Se.substring(0,Se.length-1)},j.renderTo2dContext=function(N,J){J=J||2;const C=j.getModuleCount();for(let w=0;w<C;w++)for(let _=0;_<C;_++)N.fillStyle=j.isDark(w,_)?"black":"white",N.fillRect(_*J,w*J,J,J)},j};Ps.stringToBytes=function(r){const h=[];for(let u=0;u<r.length;u+=1){const c=r.charCodeAt(u);h.push(c&255)}return h};Ps.createStringToBytes=function(r,h){const u=(function(){const p=Cx(r),x=function(){const S=p.read();if(S==-1)throw"eof";return S};let m=0;const d={};for(;;){const S=p.read();if(S==-1)break;const b=x(),j=x(),M=x(),z=String.fromCharCode(S<<8|b),ye=j<<8|M;d[z]=ye,m+=1}if(m!=h)throw m+" != "+h;return d})(),c=63;return function(p){const x=[];for(let m=0;m<p.length;m+=1){const d=p.charCodeAt(m);if(d<128)x.push(d);else{const S=u[p.charAt(m)];typeof S=="number"?(S&255)==S?x.push(S):(x.push(S>>>8),x.push(S&255)):x.push(c)}}return x}};const Qn={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Qo={L:1,M:0,Q:3,H:2},_a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ba=(function(){const r=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],h=1335,u=7973,c=21522,p={},x=function(m){let d=0;for(;m!=0;)d+=1,m>>>=1;return d};return p.getBCHTypeInfo=function(m){let d=m<<10;for(;x(d)-x(h)>=0;)d^=h<<x(d)-x(h);return(m<<10|d)^c},p.getBCHTypeNumber=function(m){let d=m<<12;for(;x(d)-x(u)>=0;)d^=u<<x(d)-x(u);return m<<12|d},p.getPatternPosition=function(m){return r[m-1]},p.getMaskFunction=function(m){switch(m){case _a.PATTERN000:return function(d,S){return(d+S)%2==0};case _a.PATTERN001:return function(d,S){return d%2==0};case _a.PATTERN010:return function(d,S){return S%3==0};case _a.PATTERN011:return function(d,S){return(d+S)%3==0};case _a.PATTERN100:return function(d,S){return(Math.floor(d/2)+Math.floor(S/3))%2==0};case _a.PATTERN101:return function(d,S){return d*S%2+d*S%3==0};case _a.PATTERN110:return function(d,S){return(d*S%2+d*S%3)%2==0};case _a.PATTERN111:return function(d,S){return(d*S%3+(d+S)%2)%2==0};default:throw"bad maskPattern:"+m}},p.getErrorCorrectPolynomial=function(m){let d=Jo([1],0);for(let S=0;S<m;S+=1)d=d.multiply(Jo([1,Ha.gexp(S)],0));return d},p.getLengthInBits=function(m,d){if(1<=d&&d<10)switch(m){case Qn.MODE_NUMBER:return 10;case Qn.MODE_ALPHA_NUM:return 9;case Qn.MODE_8BIT_BYTE:return 8;case Qn.MODE_KANJI:return 8;default:throw"mode:"+m}else if(d<27)switch(m){case Qn.MODE_NUMBER:return 12;case Qn.MODE_ALPHA_NUM:return 11;case Qn.MODE_8BIT_BYTE:return 16;case Qn.MODE_KANJI:return 10;default:throw"mode:"+m}else if(d<41)switch(m){case Qn.MODE_NUMBER:return 14;case Qn.MODE_ALPHA_NUM:return 13;case Qn.MODE_8BIT_BYTE:return 16;case Qn.MODE_KANJI:return 12;default:throw"mode:"+m}else throw"type:"+d},p.getLostPoint=function(m){const d=m.getModuleCount();let S=0;for(let M=0;M<d;M+=1)for(let z=0;z<d;z+=1){let ye=0;const oe=m.isDark(M,z);for(let ie=-1;ie<=1;ie+=1)if(!(M+ie<0||d<=M+ie))for(let we=-1;we<=1;we+=1)z+we<0||d<=z+we||ie==0&&we==0||oe==m.isDark(M+ie,z+we)&&(ye+=1);ye>5&&(S+=3+ye-5)}for(let M=0;M<d-1;M+=1)for(let z=0;z<d-1;z+=1){let ye=0;m.isDark(M,z)&&(ye+=1),m.isDark(M+1,z)&&(ye+=1),m.isDark(M,z+1)&&(ye+=1),m.isDark(M+1,z+1)&&(ye+=1),(ye==0||ye==4)&&(S+=3)}for(let M=0;M<d;M+=1)for(let z=0;z<d-6;z+=1)m.isDark(M,z)&&!m.isDark(M,z+1)&&m.isDark(M,z+2)&&m.isDark(M,z+3)&&m.isDark(M,z+4)&&!m.isDark(M,z+5)&&m.isDark(M,z+6)&&(S+=40);for(let M=0;M<d;M+=1)for(let z=0;z<d-6;z+=1)m.isDark(z,M)&&!m.isDark(z+1,M)&&m.isDark(z+2,M)&&m.isDark(z+3,M)&&m.isDark(z+4,M)&&!m.isDark(z+5,M)&&m.isDark(z+6,M)&&(S+=40);let b=0;for(let M=0;M<d;M+=1)for(let z=0;z<d;z+=1)m.isDark(z,M)&&(b+=1);const j=Math.abs(100*b/d/d-50)/5;return S+=j*10,S},p})(),Ha=(function(){const r=new Array(256),h=new Array(256);for(let c=0;c<8;c+=1)r[c]=1<<c;for(let c=8;c<256;c+=1)r[c]=r[c-4]^r[c-5]^r[c-6]^r[c-8];for(let c=0;c<255;c+=1)h[r[c]]=c;const u={};return u.glog=function(c){if(c<1)throw"glog("+c+")";return h[c]},u.gexp=function(c){for(;c<0;)c+=255;for(;c>=256;)c-=255;return r[c]},u})(),Jo=function(r,h){if(typeof r.length>"u")throw r.length+"/"+h;const u=(function(){let p=0;for(;p<r.length&&r[p]==0;)p+=1;const x=new Array(r.length-p+h);for(let m=0;m<r.length-p;m+=1)x[m]=r[m+p];return x})(),c={};return c.getAt=function(p){return u[p]},c.getLength=function(){return u.length},c.multiply=function(p){const x=new Array(c.getLength()+p.getLength()-1);for(let m=0;m<c.getLength();m+=1)for(let d=0;d<p.getLength();d+=1)x[m+d]^=Ha.gexp(Ha.glog(c.getAt(m))+Ha.glog(p.getAt(d)));return Jo(x,0)},c.mod=function(p){if(c.getLength()-p.getLength()<0)return c;const x=Ha.glog(c.getAt(0))-Ha.glog(p.getAt(0)),m=new Array(c.getLength());for(let d=0;d<c.getLength();d+=1)m[d]=c.getAt(d);for(let d=0;d<p.getLength();d+=1)m[d]^=Ha.gexp(Ha.glog(p.getAt(d))+x);return Jo(m,0).mod(p)},c},A0=(function(){const r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],h=function(p,x){const m={};return m.totalCount=p,m.dataCount=x,m},u={},c=function(p,x){switch(x){case Qo.L:return r[(p-1)*4+0];case Qo.M:return r[(p-1)*4+1];case Qo.Q:return r[(p-1)*4+2];case Qo.H:return r[(p-1)*4+3];default:return}};return u.getRSBlocks=function(p,x){const m=c(p,x);if(typeof m>"u")throw"bad rs block @ typeNumber:"+p+"/errorCorrectionLevel:"+x;const d=m.length/3,S=[];for(let b=0;b<d;b+=1){const j=m[b*3+0],M=m[b*3+1],z=m[b*3+2];for(let ye=0;ye<j;ye+=1)S.push(h(M,z))}return S},u})(),M0=function(){const r=[];let h=0;const u={};return u.getBuffer=function(){return r},u.getAt=function(c){const p=Math.floor(c/8);return(r[p]>>>7-c%8&1)==1},u.put=function(c,p){for(let x=0;x<p;x+=1)u.putBit((c>>>p-x-1&1)==1)},u.getLengthInBits=function(){return h},u.putBit=function(c){const p=Math.floor(h/8);r.length<=p&&r.push(0),c&&(r[p]|=128>>>h%8),h+=1},u},vx=function(r){const h=Qn.MODE_NUMBER,u=r,c={};c.getMode=function(){return h},c.getLength=function(m){return u.length},c.write=function(m){const d=u;let S=0;for(;S+2<d.length;)m.put(p(d.substring(S,S+3)),10),S+=3;S<d.length&&(d.length-S==1?m.put(p(d.substring(S,S+1)),4):d.length-S==2&&m.put(p(d.substring(S,S+2)),7))};const p=function(m){let d=0;for(let S=0;S<m.length;S+=1)d=d*10+x(m.charAt(S));return d},x=function(m){if("0"<=m&&m<="9")return m.charCodeAt(0)-48;throw"illegal char :"+m};return c},wx=function(r){const h=Qn.MODE_ALPHA_NUM,u=r,c={};c.getMode=function(){return h},c.getLength=function(x){return u.length},c.write=function(x){const m=u;let d=0;for(;d+1<m.length;)x.put(p(m.charAt(d))*45+p(m.charAt(d+1)),11),d+=2;d<m.length&&x.put(p(m.charAt(d)),6)};const p=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-48;if("A"<=x&&x<="Z")return x.charCodeAt(0)-65+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return c},Sx=function(r){const h=Qn.MODE_8BIT_BYTE,u=Ps.stringToBytes(r),c={};return c.getMode=function(){return h},c.getLength=function(p){return u.length},c.write=function(p){for(let x=0;x<u.length;x+=1)p.put(u[x],8)},c},Nx=function(r){const h=Qn.MODE_KANJI,u=Ps.stringToBytes;(function(x,m){const d=u(x);if(d.length!=2||(d[0]<<8|d[1])!=m)throw"sjis not supported."})("",38726);const c=u(r),p={};return p.getMode=function(){return h},p.getLength=function(x){return~~(c.length/2)},p.write=function(x){const m=c;let d=0;for(;d+1<m.length;){let S=(255&m[d])<<8|255&m[d+1];if(33088<=S&&S<=40956)S-=33088;else if(57408<=S&&S<=60351)S-=49472;else throw"illegal char at "+(d+1)+"/"+S;S=(S>>>8&255)*192+(S&255),x.put(S,13),d+=2}if(d<m.length)throw"illegal char at "+(d+1)},p},X0=function(){const r=[],h={};return h.writeByte=function(u){r.push(u&255)},h.writeShort=function(u){h.writeByte(u),h.writeByte(u>>>8)},h.writeBytes=function(u,c,p){c=c||0,p=p||u.length;for(let x=0;x<p;x+=1)h.writeByte(u[x+c])},h.writeString=function(u){for(let c=0;c<u.length;c+=1)h.writeByte(u.charCodeAt(c))},h.toByteArray=function(){return r},h.toString=function(){let u="";u+="[";for(let c=0;c<r.length;c+=1)c>0&&(u+=","),u+=r[c];return u+="]",u},h},jx=function(){let r=0,h=0,u=0,c="";const p={},x=function(d){c+=String.fromCharCode(m(d&63))},m=function(d){if(d<0)throw"n:"+d;if(d<26)return 65+d;if(d<52)return 97+(d-26);if(d<62)return 48+(d-52);if(d==62)return 43;if(d==63)return 47;throw"n:"+d};return p.writeByte=function(d){for(r=r<<8|d&255,h+=8,u+=1;h>=6;)x(r>>>h-6),h-=6},p.flush=function(){if(h>0&&(x(r<<6-h),r=0,h=0),u%3!=0){const d=3-u%3;for(let S=0;S<d;S+=1)c+="="}},p.toString=function(){return c},p},Cx=function(r){const h=r;let u=0,c=0,p=0;const x={};x.read=function(){for(;p<8;){if(u>=h.length){if(p==0)return-1;throw"unexpected end of file./"+p}const S=h.charAt(u);if(u+=1,S=="=")return p=0,-1;if(S.match(/^\s$/))continue;c=c<<6|m(S.charCodeAt(0)),p+=6}const d=c>>>p-8&255;return p-=8,d};const m=function(d){if(65<=d&&d<=90)return d-65;if(97<=d&&d<=122)return d-97+26;if(48<=d&&d<=57)return d-48+52;if(d==43)return 62;if(d==47)return 63;throw"c:"+d};return x},Tx=function(r,h){const u=r,c=h,p=new Array(r*h),x={};x.setPixel=function(b,j,M){p[j*u+b]=M},x.write=function(b){b.writeString("GIF87a"),b.writeShort(u),b.writeShort(c),b.writeByte(128),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(255),b.writeByte(255),b.writeByte(255),b.writeString(","),b.writeShort(0),b.writeShort(0),b.writeShort(u),b.writeShort(c),b.writeByte(0);const j=2,M=d(j);b.writeByte(j);let z=0;for(;M.length-z>255;)b.writeByte(255),b.writeBytes(M,z,255),z+=255;b.writeByte(M.length-z),b.writeBytes(M,z,M.length-z),b.writeByte(0),b.writeString(";")};const m=function(b){const j=b;let M=0,z=0;const ye={};return ye.write=function(oe,ie){if(oe>>>ie)throw"length over";for(;M+ie>=8;)j.writeByte(255&(oe<<M|z)),ie-=8-M,oe>>>=8-M,z=0,M=0;z=oe<<M|z,M=M+ie},ye.flush=function(){M>0&&j.writeByte(z)},ye},d=function(b){const j=1<<b,M=(1<<b)+1;let z=b+1;const ye=S();for(let Be=0;Be<j;Be+=1)ye.add(String.fromCharCode(Be));ye.add(String.fromCharCode(j)),ye.add(String.fromCharCode(M));const oe=X0(),ie=m(oe);ie.write(j,z);let we=0,fe=String.fromCharCode(p[we]);for(we+=1;we<p.length;){const Be=String.fromCharCode(p[we]);we+=1,ye.contains(fe+Be)?fe=fe+Be:(ie.write(ye.indexOf(fe),z),ye.size()<4095&&(ye.size()==1<<z&&(z+=1),ye.add(fe+Be)),fe=Be)}return ie.write(ye.indexOf(fe),z),ie.write(M,z),ie.flush(),oe.toByteArray()},S=function(){const b={};let j=0;const M={};return M.add=function(z){if(M.contains(z))throw"dup key:"+z;b[z]=j,j+=1},M.size=function(){return j},M.indexOf=function(z){return b[z]},M.contains=function(z){return typeof b[z]<"u"},M};return x},Ex=function(r,h,u){const c=Tx(r,h);for(let d=0;d<h;d+=1)for(let S=0;S<r;S+=1)c.setPixel(S,d,u(S,d));const p=X0();c.write(p);const x=jx(),m=p.toByteArray();for(let d=0;d<m.length;d+=1)x.writeByte(m[d]);return x.flush(),"data:image/gif;base64,"+x};Ps.stringToBytes;class $0 extends yu.Component{constructor(u){super(u);fu(this,"canvasRef",yu.createRef())}download(u,c){if(this.canvasRef.current){let p;switch(u){case"jpg":p="image/jpeg";break;case"webp":p="image/webp";break;case"png":default:p="image/png";break}const x=this.canvasRef.current.toDataURL(p,1),m=document.createElement("a");m.download=c??"react-qrcode-logo",m.href=x,m.click()}}utf16to8(u){let c="",p,x;const m=u.length;for(p=0;p<m;p++)x=u.charCodeAt(p),x>=1&&x<=127?c+=u.charAt(p):x>2047?(c+=String.fromCharCode(224|x>>12&15),c+=String.fromCharCode(128|x>>6&63),c+=String.fromCharCode(128|x>>0&63)):(c+=String.fromCharCode(192|x>>6&31),c+=String.fromCharCode(128|x>>0&63));return c}drawRoundedSquare(u,c,p,x,m,d,S,b){b.lineWidth=u,b.fillStyle=m,b.strokeStyle=m,p+=u/2,c+=u/2,x-=u,Array.isArray(d)||(d=[d,d,d,d]),d=d.map(oe=>(oe=Math.min(oe,x/2),oe<0?0:oe));const j=d[0]||0,M=d[1]||0,z=d[2]||0,ye=d[3]||0;b.beginPath(),b.moveTo(c+j,p),b.lineTo(c+x-M,p),M&&b.quadraticCurveTo(c+x,p,c+x,p+M),b.lineTo(c+x,p+x-z),z&&b.quadraticCurveTo(c+x,p+x,c+x-z,p+x),b.lineTo(c+ye,p+x),ye&&b.quadraticCurveTo(c,p+x,c,p+x-ye),b.lineTo(c,p+j),j&&b.quadraticCurveTo(c,p,c+j,p),b.closePath(),b.stroke(),S&&b.fill()}drawPositioningPattern(u,c,p,x,m,d,S=[0,0,0,0]){const b=Math.ceil(c);let j,M;typeof S!="number"&&!Array.isArray(S)?(j=S.outer||0,M=S.inner||0):(j=S,M=j);let z,ye;typeof d!="string"?(z=d.outer,ye=d.inner):(z=d,ye=d);let oe=x*c+p,ie=m*c+p,we=c*7;this.drawRoundedSquare(b,ie,oe,we,z,j,!1,u),we=c*3,oe+=c*2,ie+=c*2,this.drawRoundedSquare(b,ie,oe,we,ye,M,!0,u)}isInPositioninZone(u,c,p){return p.some(x=>u>=x.row&&u<=x.row+7&&c>=x.col&&c<=x.col+7)}removeCoordinateBehindLogo(u,c,p,x,m,d,S,b,j,M,z=0,ye="square"){if(!u||!M)return!1;const ie=Math.ceil(z/b)*b,we=d+j,fe=S+j,Be=Math.round(p*b)+j,De=Math.round(c*b)+j,W=Math.ceil((p+1)*b)-Math.floor(p*b),Ee=Math.ceil((c+1)*b)-Math.floor(c*b),_e=Be+W,N=De+Ee;if(ye==="square"){const J=we-ie,C=we+x+ie,w=fe-ie,_=fe+m+ie,le=Be<C&&_e>J,be=De<_&&N>w;return le&&be}if(ye==="circle"){const J=we+x/2,C=fe+m/2,w=Math.max(x,m)/2+ie,_=Math.max(Be,Math.min(J,_e)),le=Math.max(De,Math.min(C,N)),be=J-_,Le=C-le;return be*be+Le*Le<w*w}return!1}shouldComponentUpdate(u){return!Zo(this.props,u)}componentDidMount(){this.update()}componentDidUpdate(){this.update()}update(){var Se;const{value:u,ecLevel:c,enableCORS:p,bgColor:x,fgColor:m,logoImage:d,logoOpacity:S,logoOnLoad:b,removeQrCodeBehindLogo:j,qrStyle:M,eyeRadius:z,eyeColor:ye,logoPaddingStyle:oe,logoPaddingRadius:ie}=this.props,we=+this.props.size,fe=+this.props.quietZone,Be=this.props.logoWidth?+this.props.logoWidth:0,De=this.props.logoHeight?+this.props.logoHeight:0,W=this.props.logoPadding?+this.props.logoPadding:0,Ee=Ps(0,c);Ee.addData(this.utf16to8(u)),Ee.make();const _e=(Se=this.canvasRef)==null?void 0:Se.current,N=_e.getContext("2d"),J=we+2*fe,C=Ee.getModuleCount(),w=we/C,_=window.devicePixelRatio||1,le=Be||we*.2,be=De||le,Le=(we-le)/2,qe=(we-be)/2;_e.height=_e.width=J*_,N.scale(_,_),N.fillStyle=x,N.fillRect(0,0,J,J);const k=fe,F=[{row:0,col:0},{row:0,col:C-7},{row:C-7,col:0}];if(N.strokeStyle=m,M==="dots"){N.fillStyle=m;const Ne=w/2;for(let Y=0;Y<C;Y++)for(let y=0;y<C;y++)Ee.isDark(Y,y)&&!this.isInPositioninZone(Y,y,F)&&!this.removeCoordinateBehindLogo(j??!1,Y,y,le,be,Le,qe,w,k,d,W,oe)&&(N.beginPath(),N.arc(Math.round(y*w)+Ne+k,Math.round(Y*w)+Ne+k,Ne/100*75,0,2*Math.PI,!1),N.closePath(),N.fill())}else if(M==="fluid"){const Ne=Math.ceil(w/2);for(let Y=0;Y<C;Y++)for(let y=0;y<C;y++)if(Ee.isDark(Y,y)&&!this.isInPositioninZone(Y,y,F)&&!this.removeCoordinateBehindLogo(j??!1,Y,y,le,be,Le,qe,w,k,d,W,oe)){let A=[!1,!1,!1,!1];Y>0&&!Ee.isDark(Y-1,y)&&y>0&&!Ee.isDark(Y,y-1)&&(A[0]=!0),Y>0&&!Ee.isDark(Y-1,y)&&y<C-1&&!Ee.isDark(Y,y+1)&&(A[1]=!0),Y<C-1&&!Ee.isDark(Y+1,y)&&y<C-1&&!Ee.isDark(Y,y+1)&&(A[2]=!0),Y<C-1&&!Ee.isDark(Y+1,y)&&y>0&&!Ee.isDark(Y,y-1)&&(A[3]=!0);const K=Math.ceil((y+1)*w)-Math.floor(y*w),se=Math.ceil((Y+1)*w)-Math.floor(Y*w);N.fillStyle=m,N.beginPath(),N.arc(Math.round(y*w)+Ne+k,Math.round(Y*w)+Ne+k,Ne,0,2*Math.PI,!1),N.closePath(),N.fill(),A[0]||N.fillRect(Math.round(y*w)+k,Math.round(Y*w)+k,K/2,se/2),A[1]||N.fillRect(Math.round(y*w)+k+Math.floor(K/2),Math.round(Y*w)+k,K/2,se/2),A[2]||N.fillRect(Math.round(y*w)+k+Math.floor(K/2),Math.round(Y*w)+k+Math.floor(se/2),K/2,se/2),A[3]||N.fillRect(Math.round(y*w)+k,Math.round(Y*w)+k+Math.floor(se/2),K/2,se/2)}}else for(let Ne=0;Ne<C;Ne++)for(let Y=0;Y<C;Y++)if(Ee.isDark(Ne,Y)&&!this.isInPositioninZone(Ne,Y,F)&&!this.removeCoordinateBehindLogo(j??!1,Ne,Y,le,be,Le,qe,w,k,d,W,oe)){N.fillStyle=m;const y=Math.ceil((Y+1)*w)-Math.floor(Y*w),A=Math.ceil((Ne+1)*w)-Math.floor(Ne*w);N.fillRect(Math.round(Y*w)+k,Math.round(Ne*w)+k,y,A)}for(let Ne=0;Ne<3;Ne++){const{row:Y,col:y}=F[Ne];let A=z,K;Array.isArray(A)&&(A=A[Ne]),typeof A=="number"&&(A=[A,A,A,A]),ye?Array.isArray(ye)?K=ye[Ne]:K=ye:K=m,this.drawPositioningPattern(N,w,k,Y,y,K,A)}if(d){const Ne=new Image;p&&(Ne.crossOrigin="Anonymous"),Ne.onload=Y=>{if(N.save(),W){N.beginPath(),N.strokeStyle=x,N.fillStyle=x;const y=le+2*W,A=be+2*W,K=Le+k-W,se=qe+k-W;if(oe==="circle"){const Oe=K+y/2,H=se+A/2;N.ellipse(Oe,H,y/2,A/2,0,0,2*Math.PI),N.stroke(),N.fill()}else N.roundRect(K,se,y,A,ie),N.stroke(),N.fill()}N.globalAlpha=S,N.drawImage(Ne,Le+k,qe+k,le,be),N.restore(),b&&b(Y)},Ne.src=d}}render(){const u=+this.props.size+2*+this.props.quietZone;return yu.createElement("canvas",{id:this.props.id??"react-qrcode-logo",height:u,width:u,style:{height:u+"px",width:u+"px",...this.props.style},ref:this.canvasRef})}}fu($0,"defaultProps",{value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square",logoPaddingRadius:0});function Zo(r,h,u=new WeakMap){if(Object.is(r,h))return!0;if(typeof r!=typeof h||r==null||h==null)return!1;if(typeof r=="function"||typeof h=="function")return r===h;if(typeof r=="object"&&typeof h=="object"){if(u.has(r)&&u.get(r)===h)return!0;u.set(r,h)}if(r instanceof Date&&h instanceof Date)return r.getTime()===h.getTime();if(Array.isArray(r)&&Array.isArray(h)){if(r.length!==h.length)return!1;for(let c=0;c<r.length;c++)if(!Zo(r[c],h[c],u))return!1;return!0}if(r instanceof Set&&h instanceof Set){if(r.size!==h.size)return!1;for(const c of r)if(![...h].some(p=>Zo(c,p,u)))return!1;return!0}if(r instanceof Map&&h instanceof Map){if(r.size!==h.size)return!1;for(const[c,p]of r)if(!h.has(c)||!Zo(p,h.get(c),u))return!1;return!0}if(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null){const c=Object.keys(r),p=Object.keys(h);if(c.length!==p.length)return!1;for(const x of c)if(!p.includes(x)||!Zo(r[x],h[x],u))return!1;return!0}try{return JSON.stringify(r)===JSON.stringify(h)}catch{return!1}}const Ax=({isOpen:r,onClose:h,initialUrl:u="",onInsert:c})=>{const[p,x]=q.useState(u),[m,d]=q.useState("squares"),[S,b]=q.useState(0),[j,M]=q.useState(10),[z,ye]=q.useState("#000000"),[oe,ie]=q.useState("#ffffff"),[we,fe]=q.useState(""),[Be,De]=q.useState(40),W=q.useRef(null),[Ee,_e]=q.useState(!1),[N,J]=q.useState("#111111"),[C,w]=q.useState(6),[_,le]=q.useState(12);if(q.useEffect(()=>{r&&(x(u),fe(""),De(40),_e(!1),J("#111111"),w(6),le(12))},[r,u]),!r)return null;const be=Y=>{var A;const y=(A=Y.target.files)==null?void 0:A[0];if(y){const K=new FileReader;K.onload=se=>{var Oe;fe((Oe=se.target)==null?void 0:Oe.result)},K.readAsDataURL(y)}},Le=()=>{fe(""),De(40),W.current&&(W.current.value="")},qe=(Y,y,A,K,se,Oe)=>{const H=Math.max(0,Math.min(Oe,Math.min(K,se)/2));Y.beginPath(),Y.moveTo(y+H,A),Y.lineTo(y+K-H,A),Y.quadraticCurveTo(y+K,A,y+K,A+H),Y.lineTo(y+K,A+se-H),Y.quadraticCurveTo(y+K,A+se,y+K-H,A+se),Y.lineTo(y+H,A+se),Y.quadraticCurveTo(y,A+se,y,A+se-H),Y.lineTo(y,A+H),Y.quadraticCurveTo(y,A,y+H,A),Y.closePath()},k=Y=>{if(!Ee||C<=0)return Y.toDataURL("image/png");const y=Y.width+C*2,A=document.createElement("canvas");A.width=y,A.height=y;const K=A.getContext("2d");return K?(K.clearRect(0,0,y,y),qe(K,0,0,y,y,_),K.save(),K.clip(),K.fillStyle=oe,K.fillRect(0,0,y,y),K.drawImage(Y,C,C),K.restore(),K.lineWidth=C,K.strokeStyle=N,qe(K,C/2,C/2,y-C,y-C,_),K.stroke(),A.toDataURL("image/png")):Y.toDataURL("image/png")},F=async Y=>{const y=Y.matches("canvas, svg")?Y:Y.querySelector("canvas, svg");if(!y)return null;if(y instanceof HTMLCanvasElement)return k(y);if(y instanceof SVGElement){const K=new XMLSerializer().serializeToString(y),se=new Blob([K],{type:"image/svg+xml;charset=utf-8"}),Oe=URL.createObjectURL(se);return new Promise(H=>{const Ve=new Image;Ve.onload=()=>{const ot=y.clientWidth||Ve.width||250,ze=document.createElement("canvas");ze.width=ot,ze.height=ot;const rt=ze.getContext("2d");if(rt){rt.drawImage(Ve,0,0,ot,ot);const He=k(ze);URL.revokeObjectURL(Oe),H(He);return}URL.revokeObjectURL(Oe),H(null)},Ve.onerror=()=>{URL.revokeObjectURL(Oe),H(null)},Ve.src=Oe})}return null},Se=async()=>{const Y=document.getElementById("react-qrcode-logo");if(!Y)return;const y=await F(Y);y&&(c(y,p||""),h())},Ne=async()=>{const Y=document.getElementById("react-qrcode-logo");if(!Y)return;const y=await F(Y);if(y){const A=document.createElement("a");A.href=y,A.download="qrcode.png",document.body.appendChild(A),A.click(),document.body.removeChild(A)}};return s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[900px] h-[740px] flex overflow-hidden",children:[s.jsxs("div",{className:"w-1/2 p-4 border-r border-gray-200 bg-gray-50",children:[s.jsx("h2",{className:"text-lg font-bold mb-3 text-gray-800",children:"Generate QR Code"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination URL"}),s.jsx("input",{type:"text",value:p,onChange:Y=>x(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-violet-500 focus:border-violet-500",placeholder:"https://..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dot Style"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>d("squares"),className:`flex-1 py-1.5 px-4 rounded border ${m==="squares"?"bg-violet-50 border-violet-500 text-violet-700":"bg-white border-gray-300 hover:bg-violet-50"}`,children:"Squares"}),s.jsx("button",{onClick:()=>d("dots"),className:`flex-1 py-1.5 px-4 rounded border ${m==="dots"?"bg-violet-50 border-violet-500 text-violet-700":"bg-white border-gray-300 hover:bg-violet-50"}`,children:"Dots"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Eye Corner Style"}),s.jsx("input",{type:"range",min:"0",max:"20",value:S,onChange:Y=>b(parseInt(Y.target.value)),className:"w-full accent-violet-500"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"Square"}),s.jsx("span",{children:"Round"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margin (Quiet Zone)"}),s.jsx("input",{type:"range",min:"0",max:"50",value:j,onChange:Y=>M(parseInt(Y.target.value)),className:"w-full accent-violet-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dot Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:z,onChange:Y=>ye(Y.target.value),className:"h-9 w-16 p-0 border border-gray-300 rounded cursor-pointer"}),s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:z})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:oe,onChange:Y=>ie(Y.target.value),className:"h-9 w-16 p-0 border border-gray-300 rounded cursor-pointer"}),s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:oe})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Center Logo"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:W,type:"file",accept:"image/*",onChange:be,className:`block w-full text-sm text-gray-500
                      file:mr-4 file:py-2 file:px-4
                      file:rounded-full file:border-0
                      file:text-sm file:font-semibold
                    file:bg-violet-50 file:text-violet-700
                    hover:file:bg-violet-100`}),we&&s.jsx("button",{type:"button",onClick:Le,"aria-label":"Remove logo",className:"h-6 w-6 rounded-full border border-gray-300 text-gray-600 hover:bg-white",children:""})]}),we&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Logo Size"}),s.jsx("input",{type:"range",min:"20",max:"80",value:Be,onChange:Y=>De(parseInt(Y.target.value)),className:"w-full accent-violet-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outer Border"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:Ee,onChange:Y=>_e(Y.target.checked),className:"h-4 w-4"}),"Enable border"]}),Ee&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Border Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:N,onChange:Y=>J(Y.target.value),className:"h-9 w-16 p-0 border border-gray-300 rounded cursor-pointer"}),s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:N})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Thickness"}),s.jsx("input",{type:"range",min:"2",max:"24",value:C,onChange:Y=>w(parseInt(Y.target.value)),className:"w-full accent-violet-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Corner Radius"}),s.jsx("input",{type:"range",min:"0",max:"40",value:_,onChange:Y=>le(parseInt(Y.target.value)),className:"w-full accent-violet-500"})]})]})]})]})]})]}),s.jsxs("div",{className:"w-1/2 p-6 flex flex-col items-center justify-between bg-gray-100",children:[s.jsx("div",{className:"flex-1 flex items-center justify-center w-full",children:s.jsx("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:s.jsx("div",{className:"inline-flex items-center justify-center",style:{border:Ee?`${C}px solid ${N}`:"none",borderRadius:Ee?`${_}px`:"0px",backgroundColor:Ee?oe:"transparent",overflow:Ee?"hidden":"visible"},children:s.jsx($0,{value:p||"https://example.com",size:250,qrStyle:m,eyeRadius:S,quietZone:j,logoImage:we,logoWidth:Be,logoHeight:Be,removeQrCodeBehindLogo:!0,fgColor:z,bgColor:Ee?"transparent":oe,id:"react-qrcode-logo"})})})}),s.jsxs("div",{className:"flex gap-4 w-full pt-6",children:[s.jsx("button",{onClick:h,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-white transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Ne,className:"flex-1 px-4 py-2 border border-violet-600 text-violet-600 rounded-lg font-medium hover:bg-violet-50 transition-colors",children:"Download PNG"}),s.jsx("button",{onClick:Se,className:"flex-1 px-4 py-2 bg-violet-600 text-white rounded-lg font-medium hover:bg-violet-700 shadow-md transition-all transform hover:scale-[1.02]",children:"Insert"})]})]})]})})},Mx=({url:r,x:h,y:u,onCreateQRCode:c,onClose:p})=>s.jsxs("div",{className:"fixed z-50 bg-white rounded-lg shadow-lg border border-gray-200 p-2 flex items-center gap-2 transform -translate-x-1/2 -translate-y-full mt-[-8px]",style:{left:h,top:u},children:[s.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm max-w-[200px] truncate mr-2",title:r,children:r}),s.jsx("div",{className:"h-4 w-px bg-gray-300 mx-1"}),s.jsx("button",{onClick:c,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded tooltip-trigger",title:"Create QR Code",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4h2v-4zm-6 0H6v4h2v-4zm10-7h2m-6 0h-2v4h2V8zm-6 0H6v4h2V8zm0-4H6v4h2V4zm10 0h-2v4h2V4zM4 20h16a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("button",{onClick:p,className:"ml-1 p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),kx=({isOpen:r,rows:h,anchors:u,onClose:c,onApply:p})=>{const[x,m]=q.useState(h);if(q.useEffect(()=>{m(h)},[h]),!r)return null;const d=[...u].sort((S,b)=>S.page!==b.page?S.page-b.page:S.label.localeCompare(b.label));return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[760px] max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Match Table Rows to Paragraphs"}),s.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-3",children:"Select the paragraph or heading that each row should link to. Page numbers update automatically."}),s.jsx("div",{className:"space-y-3",children:x.map((S,b)=>s.jsxs("div",{className:"grid grid-cols-[1fr_1fr] gap-4 items-center",children:[s.jsx("div",{className:"text-sm text-gray-800 truncate",title:S.label,children:S.label||"(empty)"}),s.jsxs("select",{value:S.selectedId,onChange:j=>{const M=[...x];M[b]={...S,selectedId:j.target.value},m(M)},className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"",children:"Not linked"}),d.map(j=>s.jsxs("option",{value:j.id,children:[j.label," (p.",j.page,")"]},j.id))]})]},b))})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[s.jsx("button",{onClick:c,className:"px-4 py-2 text-sm text-gray-600 hover:bg-brand-50 hover:text-brand-600 rounded",children:"Cancel"}),s.jsx("button",{onClick:()=>p(x),className:"px-4 py-2 text-sm text-white bg-[#8d55f1] hover:bg-[#7539d3] rounded shadow-md font-semibold",children:"Apply"})]})]})})},Wo=r=>{var z,ye;const h=r.tagName.toLowerCase(),u=Array.from(r.classList).sort().join(".");r.getAttribute("style");const c=window.getComputedStyle(r),p=c.fontSize;c.color,c.position;const x=((z=r.textContent)==null?void 0:z.trim())||"",m=/^\d+$/.test(x),d=x.length<10,S=m?"numeric":d?"short":"long",b=((ye=r.parentElement)==null?void 0:ye.tagName.toLowerCase())||"",j=!!r.closest('.page-footer, footer, [class*="footer"]'),M=Lx(r);return`${h}|${u}|${p}|${S}|${b}|${j}|${M}`},Lx=r=>{const h=r.closest(".page");if(!h)return!1;const u=h.getBoundingClientRect();return r.getBoundingClientRect().bottom>u.bottom-u.height*.15},Tu=(r,h,u)=>{const c=[];return u.querySelectorAll("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), span, img, hr, table, li, blockquote").forEach(x=>{const m=x;if(m===h)return;m.id||(m.id=`pattern-${Date.now()}-${Math.random().toString(36).substr(2,5)}`);const d=Wo(m);G0(r,d)&&c.push({element:m,preview:zx(m)})}),c},G0=(r,h)=>{const u=r.split("|"),c=h.split("|");if(u[0]!==c[0]||u[1]!==c[1]||u[2]!==c[2]||u[3]!==c[3])return!1;let p=4;return u[4]===c[4]&&p++,u[5]===c[5]&&p++,u[6]===c[6]&&p++,p>=4},zx=r=>{var p;const h=r.tagName.toLowerCase(),u=((p=r.textContent)==null?void 0:p.trim())||"";if(r.tagName==="IMG")return`<img> ${r.alt||"image"}`;if(r.tagName==="HR")return"<hr> linea orizzontale";const c=u.length>50?u.substring(0,50)+"...":u;return`<${h}> ${c||"(vuoto)"}`};class V0{constructor(){this.actions=[],this.THRESHOLD=3,this.TIME_WINDOW=6e4}recordAction(h,u,c,p){const x=Wo(u),m=Date.now();this.actions=this.actions.filter(d=>m-d.timestamp<this.TIME_WINDOW),this.actions.push({type:h,elementSignature:x,styleCommand:c,styleValue:p,timestamp:m})}detectPattern(){if(this.actions.length<this.THRESHOLD)return null;const h=this.actions.slice(-this.THRESHOLD),u=h[0].type;if(!h.every(x=>x.type===u))return null;if(h[0].styleCommand){const x=h[0].styleCommand;if(!h.every(m=>m.styleCommand===x))return null}const c=h[0].elementSignature;return h.every(x=>G0(c,x.elementSignature))?{detected:!0,actionType:this.getActionLabel(u),signature:c,command:h[0].styleCommand,value:h[0].styleValue}:null}getLastAction(){return this.actions.length>0?this.actions[this.actions.length-1]:null}getActionLabel(h){switch(h){case"delete":return"Delete";case"move":return"Move";case"resize":return"Resize";case"bold":return"Bold";case"italic":return"Italic";case"underline":return"Underline";case"list":return"List";case"indent":return"Indent";case"align":return"Align";case"fontSize":return"Text size";case"fontColor":return"Text color";case"imageWidth":return"Image size";case"imageAlign":return"Image alignment";case"imageBrightness":return"Image brightness";case"imageContrast":return"Image contrast";case"imageStyle":return"Image style";case"style":return"Style edit";default:return h}}clear(){this.actions=[]}}const Ks=r=>{if(!r||r==="transparent"||r==="rgba(0, 0, 0, 0)")return"#ffffff";const h=r.match(/\d+/g);if(!h||h.length<3)return"#000000";const u=parseInt(h[0]).toString(16).padStart(2,"0"),c=parseInt(h[1]).toString(16).padStart(2,"0"),p=parseInt(h[2]).toString(16).padStart(2,"0");return`#${u}${c}${p}`},k0=r=>String(Math.max(1,Math.round(r))),kl=(r,h,u)=>{let c=r?r.nodeType===Node.ELEMENT_NODE?r:r.parentElement:null;const p=h.map(x=>x.toUpperCase());for(;c;){if(p.includes(c.tagName))return!0;if(u&&c===u)break;c=c.parentElement}return!1},Rx=({htmlContent:r,cssContent:h,onContentChange:u,onSelectionChange:c,onBlockClick:p,onImageSelect:x,onTextLayerSelect:m,onHRSelect:d,selectedFooter:S,onFooterSelect:b,containerRef:j,selectedImage:M,selectedTextLayer:z,showMarginGuides:ye,showSmartGuides:oe,pageMargins:ie,onMarginChange:we,selectionMode:fe,onBlockSelection:Be,suppressSelectionRef:De,imageProperties:W,onCropComplete:Ee,onCancelCrop:_e,onPageBreak:N,onInsertHorizontalRule:J,onInsertImage:C,onInsertTextLayerAt:w,isTextLayerMode:_,onToggleMultiSelect:le,onClearMultiSelect:be,multiSelectedElements:Le,onDistributeMultiSelection:qe=(H,Ve)=>{},onAlignMultiSelection:k=H=>{},distributeAdjustAxis:F=null,onStartDistributeAdjust:Se=H=>{},onEndDistributeAdjust:Ne=()=>{},zoom:Y,viewMode:y,onCopyStyle:A,onPasteStyle:K,hasStyleClipboard:se,onTocSelect:Oe})=>{var bl,il;const H=q.useRef(null),[Ve,ot]=q.useState([]),[ze,rt]=q.useState(null),[He,Ye]=q.useState(null),[Fe,at]=q.useState({isOpen:!1,url:""}),[Xt,kt]=q.useState(null),[zt,Pe]=q.useState(null),[sn,Rt]=q.useState([]),Lt=q.useRef({active:!1,lastClient:0}),dt=q.useRef({active:!1,startX:0,startY:0,didDrag:!1,suppressClick:!1}),ln=q.useRef(null),[Dt,Mn]=q.useState({isOpen:!1,tableId:"",rows:[],anchors:[]}),Zn=L=>{if(!F)return;L.preventDefault(),L.stopPropagation();const ne=F==="x"?L.clientX:L.clientY;Lt.current={active:!0,lastClient:ne};const re=ee=>{if(!Lt.current.active)return;const de=F==="x"?ee.clientX:ee.clientY,me=de-Lt.current.lastClient;me!==0&&(qe(F,me),Lt.current.lastClient=de)},he=()=>{Lt.current.active=!1,window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",he)};window.addEventListener("mousemove",re),window.addEventListener("mouseup",he)},gn=L=>{typeof k=="function"&&k(L)},yt=L=>L.toLowerCase().replace(/[^\p{L}\p{N}]+/gu," ").replace(/\s+/g," ").trim(),kn=(L,ne)=>{const re=L.closest(".page");if(!re)return 1;const he=ne.findIndex(ee=>ee===re);return he>=0?he+1:1},In=L=>{const ne=Array.from(L.querySelectorAll(".page"));Array.from(L.querySelectorAll('table.toc-table, table[data-toc-table="true"]')).forEach(he=>{Array.from(he.querySelectorAll("tr")).forEach(de=>{const me=de.getAttribute("data-toc-target");if(!me)return;const je=L.querySelector(`#${CSS.escape(me)}`);if(!je)return;const Qe=kn(je,ne),nt=Array.from(de.querySelectorAll("th, td"));if(nt.length===0)return;const vt=nt[nt.length-1];vt.textContent=String(Qe),vt.setAttribute("data-toc-page","true")})})},Sn=L=>{if(!H.current)return;const ne=H.current;L.id||(L.id=`toc-table-${Date.now()}-${Math.random().toString(36).slice(2,6)}`);const re=Array.from(ne.querySelectorAll(".page")),ee=Array.from(ne.querySelectorAll("h1, h2, h3, h4, h5, h6, p, li, blockquote")).map((je,Qe)=>{je.id||(je.id=`toc-${Qe}-${Date.now()}`);const nt=(je.textContent||"").trim();return nt?{id:je.id,label:nt.length>140?`${nt.slice(0,140)}`:nt,page:kn(je,re),normalized:yt(nt)}:null}).filter(Boolean),me=Array.from(L.querySelectorAll("tr")).map((je,Qe)=>{const vt=Array.from(je.querySelectorAll("th, td"))[0],wt=((vt==null?void 0:vt.textContent)||"").trim(),St=yt(wt);let gt="";if(St){const it=ee.find(et=>et.normalized===St),mt=ee.find(et=>et.normalized.startsWith(St)),Ft=ee.find(et=>et.normalized.includes(St)),ke=it||mt||Ft||null;ke&&(gt=ke.id)}return{index:Qe,label:wt,selectedId:gt}});Mn({isOpen:!0,tableId:L.id,rows:me,anchors:ee.map(je=>({id:je.id,label:je.label,page:je.page}))})},Nn=(L,ne)=>{if(!H.current)return;const re=H.current,he=re.querySelector(`#${CSS.escape(L)}`);if(!he)return;const ee=Array.from(re.querySelectorAll(".page")),de=Array.from(he.querySelectorAll("tr"));ne.forEach(me=>{const je=me.selectedId,Qe=je?re.querySelector(`#${CSS.escape(je)}`):null,nt=de[me.index];if(!nt)return;const vt=Array.from(nt.querySelectorAll("th, td"));if(vt.length<2)return;if(!Qe){nt.removeAttribute("data-toc-target");return}const wt=vt[0],St=vt[vt.length-1],gt=(wt.textContent||"").trim();nt.setAttribute("data-toc-target",je),he.setAttribute("data-toc-table","true"),he.classList.add("toc-table");const it=wt.querySelector("a");it?(it.href=`#${je}`,it.setAttribute("data-toc-link","true"),it.setAttribute("onclick",`const el = document.getElementById('${je}'); if(el) { el.scrollIntoView({behavior: 'smooth', block: 'start'}); } return false;`),it.textContent=gt):wt.innerHTML=`<a href="#${je}" data-toc-link="true" onclick="const el = document.getElementById('${je}'); if(el) { el.scrollIntoView({behavior: 'smooth', block: 'start'}); } return false;">${gt}</a>`;const mt=kn(Qe,ee);St.textContent=String(mt),St.setAttribute("data-toc-page","true")}),In(re),It(re),u(re.innerHTML)},Pt=q.useRef(new V0),[Ht,bt]=q.useState({isOpen:!1,actionType:"",signature:"",matches:[]}),Ut=fe!=null&&fe.active&&fe.selectedIds.length>0?`${fe.selectedIds.map(L=>`#${L}`).join(", ")} { outline: 2px dashed #8d55f1 !important; cursor: pointer !important; position: relative; z-index: 10; }`:"",fn=q.useRef(!1);q.useEffect(()=>{if(!(fe!=null&&fe.active)&&H.current&&H.current.innerHTML!==r&&(H.current.innerHTML=r,H.current.querySelectorAll("img").forEach(ne=>{ne.onerror=()=>{ne.classList.add("broken-image")}}),!fn.current)){fn.current=!0;try{It(H.current)&&u(H.current.innerHTML)}catch(ne){console.error("Reflow error on load:",ne)}setTimeout(()=>{fn.current=!1},100)}},[r]),q.useEffect(()=>{if(!ye||!H.current||!j.current)return;const L=()=>{if(!H.current||!j.current)return;const re=j.current.getBoundingClientRect(),ee=Array.from(H.current.querySelectorAll(".page")).map(de=>{const me=de.getBoundingClientRect();return{top:me.top-re.top+j.current.scrollTop,left:me.left-re.left+j.current.scrollLeft,width:me.width,height:me.height}});ot(ee)};L();const ne=new ResizeObserver(L);return ne.observe(H.current),window.addEventListener("resize",L),()=>{ne.disconnect(),window.removeEventListener("resize",L)}},[r,ye,j,Y,h]);const Ot=q.useCallback(()=>{var Rn,el,Yl;if(De!=null&&De.current)return;const L=document.getSelection();if(!L||L.rangeCount===0)return;const ne=L.getRangeAt(0);if(!((Rn=H.current)!=null&&Rn.contains(ne.commonAncestorContainer)))return;const re=ne.commonAncestorContainer,he=re.nodeType===Node.ELEMENT_NODE?re:re.parentElement;if(he!=null&&he.closest(".floating-text"))return;const ee=ne.startContainer,de=ee.nodeType===Node.TEXT_NODE?ee.parentElement:ee,me=de==null?void 0:de.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, span.mission-box, span.shape-circle, span.shape-pill, span.shape-speech, span.shape-cloud, span.shape-rectangle, .page-footer");if(!me)return;const je=window.getComputedStyle(me),Qe=de?window.getComputedStyle(de):je,nt=parseFloat(Qe.fontSize||"16"),vt=Qe.fontWeight,wt=vt==="bold"||parseInt(vt,10)>=600,gt=(Qe.textDecorationLine||Qe.textDecoration).includes("underline"),it=Qe.fontStyle||"normal",mt=it==="italic"||it==="oblique",Ft=kl(ne.startContainer,["B","STRONG"],me)||kl(ne.endContainer,["B","STRONG"],me),ke=kl(ne.startContainer,["I","EM"],me)||kl(ne.endContainer,["I","EM"],me),et=kl(ne.startContainer,["U"],me)||kl(ne.endContainer,["U"],me),Ct=me.tagName==="LI"&&((el=me.parentElement)==null?void 0:el.tagName)==="UL",Tt=me.tagName==="LI"&&((Yl=me.parentElement)==null?void 0:Yl.tagName)==="OL",Vt=je.textAlign||"left",zn=me.classList.contains("shape-circle")?"circle":me.classList.contains("shape-pill")?"pill":me.classList.contains("shape-speech")?"speech":me.classList.contains("shape-cloud")?"cloud":me.classList.contains("shape-rectangle")?"rectangle":me.classList.contains("mission-box")?"mission-box":"none",vl=Xl=>{const Ua=parseInt(Xl,10);return isNaN(Ua)?"0":Ua.toString()},Yt={bold:wt||Ft,italic:mt||ke,underline:gt||et,ul:Ct,ol:Tt,blockType:me.tagName.toLowerCase(),alignLeft:Vt==="left"||Vt==="start",alignCenter:Vt==="center",alignRight:Vt==="right"||Vt==="end",alignJustify:Vt==="justify",fontName:Qe.fontFamily||"sans-serif",fontSize:k0(nt),lineHeight:je.lineHeight||"normal",letterSpacing:Qe.letterSpacing||"normal",foreColor:Ks(Qe.color),borderWidth:vl(je.borderTopWidth),borderColor:Ks(je.borderTopColor),borderRadius:vl(je.borderRadius),backgroundColor:Ks(je.backgroundColor),padding:vl(je.paddingTop),borderStyle:je.borderTopStyle||"none",textAlign:Vt,shape:zn,width:me.style.width||"",range:ne.cloneRange()};c(Yt,me)},[c]),mn=q.useCallback((L,ne)=>{var vl,Yt;const re=window.getSelection(),he=re&&re.rangeCount>0?re.getRangeAt(0).commonAncestorContainer:null,ee=he?he.nodeType===Node.TEXT_NODE?he.parentElement:he:null,de=ne||(ee&&L.contains(ee)?ee:L),me=window.getComputedStyle(L),je=window.getComputedStyle(de),Qe=parseFloat(je.fontSize||"16"),nt=je.fontWeight,vt=nt==="bold"||parseInt(nt,10)>=600,St=(je.textDecorationLine||je.textDecoration).includes("underline"),gt=je.fontStyle||"normal",it=me.textAlign||"left",mt=L.classList.contains("shape-circle")?"circle":L.classList.contains("shape-pill")?"pill":L.classList.contains("shape-speech")?"speech":L.classList.contains("shape-cloud")?"cloud":L.classList.contains("shape-rectangle")?"rectangle":L.classList.contains("mission-box")?"mission-box":"none",Ft=Rn=>{const el=parseInt(Rn,10);return isNaN(el)?"0":el.toString()},ke=re&&re.rangeCount>0?re.getRangeAt(0):null,et=kl((ke==null?void 0:ke.startContainer)||null,["B","STRONG"],L)||kl((ke==null?void 0:ke.endContainer)||null,["B","STRONG"],L),Ct=kl((ke==null?void 0:ke.startContainer)||null,["I","EM"],L)||kl((ke==null?void 0:ke.endContainer)||null,["I","EM"],L),Tt=kl((ke==null?void 0:ke.startContainer)||null,["U"],L)||kl((ke==null?void 0:ke.endContainer)||null,["U"],L),Vt=L.tagName==="LI"&&((vl=L.parentElement)==null?void 0:vl.tagName)==="UL",zn=L.tagName==="LI"&&((Yt=L.parentElement)==null?void 0:Yt.tagName)==="OL";return{bold:vt||et,italic:gt==="italic"||gt==="oblique"||Ct,underline:St||Tt,ul:Vt,ol:zn,blockType:L.tagName.toLowerCase(),alignLeft:it==="left"||it==="start",alignCenter:it==="center",alignRight:it==="right"||it==="end",alignJustify:it==="justify",fontName:je.fontFamily||"sans-serif",fontSize:k0(Qe),lineHeight:me.lineHeight||"normal",letterSpacing:je.letterSpacing||"normal",foreColor:Ks(je.color),borderWidth:Ft(me.borderTopWidth),borderColor:Ks(me.borderTopColor),borderRadius:Ft(me.borderRadius),backgroundColor:Ks(me.backgroundColor),padding:Ft(me.paddingTop),borderStyle:me.borderTopStyle||"none",textAlign:it,shape:mt,width:L.style.width||"",range:ke}},[]),jn=q.useCallback(()=>{if(!H.current)return[];const L=["p","h1","h2","h3","h4","h5","h6","blockquote","li","div:not(.page):not(.editor-workspace)","span.mission-box","span.shape-circle","span.shape-pill","span.shape-speech","span.shape-cloud","span.shape-rectangle","table","img","hr",".floating-text",".writing-lines",".tracing-line","textarea"].join(", "),ne=[".floating-text",".writing-lines",".tracing-line",".mission-box",".shape-rectangle",".shape-circle",".shape-pill",".shape-speech",".shape-cloud"];return Array.from(H.current.querySelectorAll(L)).filter(he=>{if(he.classList.contains("page")||he.classList.contains("editor-workspace")||he.closest("table")&&he.tagName!=="TABLE")return!1;for(const ee of ne){const de=he.closest(ee);if(de&&de!==he)return!1}return!0})},[]),Ln=q.useCallback(()=>{if(!H.current)return[];const L=["p","h1","h2","h3","h4","h5","h6","blockquote","li","div:not(.page):not(.editor-workspace)","span.mission-box","span.shape-circle","span.shape-pill","span.shape-speech","span.shape-cloud","span.shape-rectangle","table","img","hr",".floating-text",".writing-lines",".tracing-line","textarea"].join(", "),ne=[".floating-text",".writing-lines",".tracing-line",".mission-box",".shape-rectangle",".shape-circle",".shape-pill",".shape-speech",".shape-cloud"];return Array.from(H.current.querySelectorAll(L)).filter(he=>{if(he.classList.contains("page")||he.classList.contains("editor-workspace")||he.classList.contains("page-footer")||he.closest("table")&&he.tagName!=="TABLE")return!1;for(const ee of ne){const de=he.closest(ee);if(de&&de!==he)return!1}return!0})},[]),On=q.useCallback(()=>{if(!H.current||!j.current){Rt([]);return}const L=j.current,ne=L.getBoundingClientRect(),re=[],he=96;Ln().forEach(de=>{if(de.getAttribute("data-ignore-margins")==="true")return;const me=de.closest(".page");if(!me)return;const je=me.getBoundingClientRect(),Qe=je.width/me.offsetWidth||1,nt=je.left+ie.left*he*Qe,vt=je.right-ie.right*he*Qe,wt=de.getBoundingClientRect();if(wt.width<=0||wt.height<=0)return;const St=wt.top-ne.top+L.scrollTop,gt=wt.height;if(wt.left<nt){const it=Math.min(nt,wt.right)-wt.left;it>0&&re.push({x:wt.left-ne.left+L.scrollLeft,y:St,width:it,height:gt})}if(wt.right>vt){const it=Math.max(wt.left,vt),mt=wt.right-it;mt>0&&re.push({x:it-ne.left+L.scrollLeft,y:St,width:mt,height:gt})}}),Rt(re)},[Ln,ie,j]);q.useEffect(()=>{if(!H.current||!j.current)return;const L=j.current,ne=H.current;let re=null;const he=()=>{re||(re=window.setTimeout(()=>{re=null,!ln.current&&(ln.current=window.requestAnimationFrame(()=>{ln.current=null,On()}))},120))};he();const ee=new MutationObserver(he);return ee.observe(ne,{attributes:!0,childList:!0,subtree:!0}),L.addEventListener("scroll",he),window.addEventListener("resize",he),()=>{ee.disconnect(),L.removeEventListener("scroll",he),window.removeEventListener("resize",he),re&&(window.clearTimeout(re),re=null),ln.current&&(window.cancelAnimationFrame(ln.current),ln.current=null)}},[On,r,Y,ie]);const Cn=L=>{if(L.key==="Delete"||L.key==="Backspace"){const ne=window.getSelection();if(ne&&ne.rangeCount>0){if(!ne.isCollapsed)return;const re=ne.getRangeAt(0),he=re.commonAncestorContainer,ee=he.nodeType===Node.ELEMENT_NODE?he:he.parentElement;if(L.key==="Backspace"&&ee){const je=ee.closest('p, h1, h2, h3, h4, h5, h6, li, blockquote, .floating-text, div[contenteditable="true"]'),Qe=je==null?void 0:je.closest(".page");if(je&&Qe){const nt=gt=>gt instanceof HTMLElement&&!gt.classList.contains("page-footer")&&!gt.classList.contains("image-overlay")&&!gt.classList.contains("resize-handle")&&gt.tagName!=="STYLE"&&window.getComputedStyle(gt).position!=="absolute"&&window.getComputedStyle(gt).position!=="fixed",wt=Array.from(Qe.children).filter(nt)[0]??null;if(wt===je||wt&&wt.contains(je)){const gt=re.cloneRange();if(gt.selectNodeContents(je),gt.setEnd(re.startContainer,re.startOffset),gt.toString()===""){const mt=Qe.previousElementSibling;if(mt&&mt.classList.contains("page")){const Ft=Array.from(mt.children).filter(nt),ke=Ft.length>0?Ft[Ft.length-1]:null;if(ke){L.preventDefault();const et=ke.tagName===je.tagName,Ct=/^(P|H[1-6]|LI|BLOCKQUOTE)$/.test(je.tagName);if(et&&Ct){const Tt=document.createRange();for(ke.lastChild?Tt.setStartAfter(ke.lastChild):Tt.setStart(ke,0),Tt.collapse(!0),ne.removeAllRanges(),ne.addRange(Tt);je.firstChild;)ke.appendChild(je.firstChild);je.remove()}else{const Tt=Array.from(mt.children).find(Vt=>{var zn;return(zn=Vt.classList)==null?void 0:zn.contains("page-footer")});Tt?mt.insertBefore(je,Tt):mt.appendChild(je)}H.current&&(It(H.current),u(H.current.innerHTML));return}}}}}}if(!!(ee!=null&&ee.closest('p, h1, h2, h3, h4, h5, h6, li, blockquote, .floating-text, div[contenteditable="true"]')))return}if(He){L.preventDefault(),He.remove(),Ye(null),x(null),m(null),d(null),b(null),H.current&&(It(H.current),u(H.current.innerHTML));return}}if((L.metaKey||L.ctrlKey)&&L.key==="Enter"){L.preventDefault(),N();return}if(L.key==="Enter"){const ne=window.getSelection();if(!ne||ne.rangeCount===0)return;const he=ne.getRangeAt(0).commonAncestorContainer,ee=he.nodeType===Node.ELEMENT_NODE?he:he.parentElement,de=ee==null?void 0:ee.closest(".mission-box, .shape-rectangle, .shape-circle, .shape-pill, .shape-speech, .shape-cloud");if(de&&H.current){L.preventDefault();const me=document.createElement("p");me.appendChild(document.createElement("br")),de.insertAdjacentElement("afterend",me);const je=document.createRange();je.setStart(me,0),je.collapse(!0),ne.removeAllRanges(),ne.addRange(je),It(H.current),u(H.current.innerHTML)}}},Kn=L=>{L.preventDefault(),L.stopPropagation();const ne=L.dataTransfer.files;if(ne&&ne.length>0){const re=ne[0];if(re.type.startsWith("image/")){const he=new FileReader;he.onload=ee=>{var me;const de=(me=ee.target)==null?void 0:me.result;de&&(document.execCommand("insertImage",!1,de),H.current&&(It(H.current),u(H.current.innerHTML)))},he.readAsDataURL(re)}}},qn=L=>{L.preventDefault();const ne=L.target;let re;const he=ne.closest("a");if(he)re=he.href;else{const me=window.getSelection();if(me&&me.toString().trim().length>0){const je=me.toString().trim();(je.match(/^(http|https):\/\/[^ "]+$/)||je.match(/^www\.[^ "]+$/))&&(re=je.startsWith("www.")?`https://${je}`:je)}}let ee=ne.closest(".tracing-line, .writing-lines, .mission-box, .shape-rectangle, .shape-circle, .shape-pill, textarea");if(ee||(ee=ne.closest("hr")),ee||(ee=ne.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, img, table, tr, td, th, span:not(.editor-workspace), a")),ee&&(ee.tagName==="TD"||ee.tagName==="TH"||ee.tagName==="TR")){const me=ee.closest("table");me&&(ee=me)}!ee&&(ne.tagName==="HR"||ne.tagName==="IMG")&&(ee=ne),ee&&(ee.classList.contains("page")||ee.classList.contains("editor-workspace")||ee.tagName==="BODY"||ee.tagName==="HTML")&&(ee=null),He&&He.removeAttribute("data-selected"),ee&&ee.setAttribute("data-selected","true"),Ye(ee);const de=ne.closest(".page");rt({x:L.clientX,y:L.clientY,block:ee,linkUrl:re,page:de})},ml=q.useCallback(L=>{!L||L.classList.contains("page-footer")||(L.getAttribute("data-ignore-margins")==="true"?L.removeAttribute("data-ignore-margins"):L.setAttribute("data-ignore-margins","true"),H.current&&u(H.current.innerHTML),On())},[u,On]),Je=L=>{var he;const ne=window.getSelection();let re=null;if(ne&&ne.rangeCount>0){const ee=ne.getRangeAt(0);(he=H.current)!=null&&he.contains(ee.commonAncestorContainer)&&(re=ee)}if(re){const ee=document.createRange().createContextualFragment(L);re.insertNode(ee),re.collapse(!1)}else if(He)He.insertAdjacentHTML("afterend",L);else if(H.current){const ee=H.current.querySelector(".page");ee&&ee.insertAdjacentHTML("beforeend",L)}H.current&&(It(H.current),u(H.current.innerHTML))},Tn=(L,ne,re,he)=>{Pt.current.recordAction(L,ne,re,he);const ee=Pt.current.detectPattern();if(ee&&H.current){const de=Wo(ne),me=Tu(de,ne,H.current);me.length>0&&bt({isOpen:!0,actionType:ee.actionType,signature:de,matches:me,command:ee.command,value:ee.value})}},Yn=()=>{var ne;if(!He||!He.previousElementSibling)return;const L=He.previousElementSibling;(ne=He.parentNode)==null||ne.insertBefore(He,L),H.current&&(It(H.current),u(H.current.innerHTML))},xl=()=>{var ne;if(!He||!He.nextElementSibling)return;const L=He.nextElementSibling;(ne=He.parentNode)==null||ne.insertBefore(L,He),H.current&&(It(H.current),u(H.current.innerHTML))},yl=()=>{if(He){if(He.classList.contains("page")||He.classList.contains("editor-workspace")||He.tagName==="BODY"||He.tagName==="HTML"){console.warn("Cannot delete structural element");return}if(H.current){const L=H.current.querySelectorAll(".page");if(L.length===1){const ne=L[0];if(ne.querySelectorAll("p, h1, h2, h3, h4, h5, h6, div:not(.page), img, hr, table, blockquote, li").length<=1&&ne.contains(He)){console.warn("Cannot delete last element in document");return}}}Tn("delete",He),He.remove(),Ye(null),H.current&&(It(H.current),u(H.current.innerHTML))}},zl=()=>{var ne;if(!He)return;const L=He.cloneNode(!0);L.id&&(L.id=`dup-${Date.now()}-${Math.random().toString(36).substr(2,5)}`),(ne=He.parentNode)==null||ne.insertBefore(L,He.nextSibling),H.current&&(It(H.current),u(H.current.innerHTML))},xn=new Set(["P","H1","H2","H3","H4","H5","H6","UL","OL","BLOCKQUOTE","DIV","SECTION","TABLE"]),Xn=()=>{if(!H.current)return null;if(Le.length===2){const L=document.getElementById(Le[0]),ne=document.getElementById(Le[1]);return!L||!ne?null:L.tagName===ne.tagName&&xn.has(L.tagName)?L.compareDocumentPosition(ne)&Node.DOCUMENT_POSITION_FOLLOWING?[L,ne]:[ne,L]:null}if(ze!=null&&ze.block){const ne=ze.block.getAttribute("data-split-id");if(!ne)return null;const re=Array.from(H.current.querySelectorAll(`[data-split-id="${CSS.escape(ne)}"]`));if(re.length>=2&&re.every(he=>he.tagName===re[0].tagName))return re}return null},Pn=()=>{const L=Xn();if(!L||L.length<2||!H.current)return;const ne=L[0],re=ne.getAttribute("data-split-original");if(re){const he=document.createElement("div");he.innerHTML=re;const ee=he.firstElementChild;if(ee){ee.removeAttribute("data-split-id"),ee.removeAttribute("data-split-original"),ne.replaceWith(ee);for(let de=1;de<L.length;de++)L[de].remove();It(H.current),u(H.current.innerHTML);return}}for(let he=1;he<L.length;he++){for(;L[he].firstChild;)ne.appendChild(L[he].firstChild);L[he].remove()}ne.removeAttribute("data-split-id"),ne.removeAttribute("data-split-original"),It(H.current),u(H.current.innerHTML)},on=()=>{const L=ze==null?void 0:ze.page;if(!L||!H.current)return;const ne=ee=>ee instanceof HTMLElement&&!ee.classList.contains("page-footer")&&!ee.classList.contains("image-overlay")&&!ee.classList.contains("resize-handle")&&ee.tagName!=="STYLE"&&window.getComputedStyle(ee).position!=="absolute"&&window.getComputedStyle(ee).position!=="fixed";let re=!1,he=!0;for(;he;){he=!1;const ee=Array.from(L.children).filter(ne);for(let de=0;de<ee.length-1;de++){const me=ee[de],je=ee[de+1];if(me.tagName===je.tagName){for(;je.firstChild;)me.appendChild(je.firstChild);je.remove(),me.removeAttribute("data-split-id"),me.removeAttribute("data-split-original"),re=!0,he=!0;break}}}re&&(It(H.current),u(H.current.innerHTML))},Ul=()=>{document.execCommand("copy")},Jn=()=>{document.execCommand("cut"),H.current&&(It(H.current),u(H.current.innerHTML))},Z=async()=>{try{const L=await navigator.clipboard.readText();document.execCommand("insertText",!1,L),H.current&&(It(H.current),u(H.current.innerHTML))}catch{document.execCommand("paste")}},Ue=q.useCallback(()=>{var ee;const L=window.getSelection();if(!L||L.rangeCount===0)return null;const re=L.getRangeAt(0).commonAncestorContainer,he=re.nodeType===Node.TEXT_NODE?re.parentElement:re;return he&&((ee=H.current)!=null&&ee.contains(he))?he.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), li, blockquote, span"):null},[]);q.useEffect(()=>{const L=document.execCommand.bind(document);return document.execCommand=(ne,re,he)=>{const ee=L(ne,re,he);if(ee){const me={bold:"bold",italic:"italic",underline:"underline",insertUnorderedList:"list",insertOrderedList:"list",indent:"indent",outdent:"indent",justifyLeft:"align",justifyCenter:"align",justifyRight:"align",justifyFull:"align",fontSize:"fontSize",foreColor:"fontColor",hiliteColor:"fontColor"}[ne];if(me){const je=Ue();je&&Tn(me,je,ne,he)}}return ee},()=>{document.execCommand=L}},[Ue]);const Ie=L=>{const{actionType:ne,command:re,value:he}=Ht;L.forEach(ee=>{const de=document.getElementById(ee);if(de){if(ne==="Delete")de.remove();else if(re){const me=window.getSelection(),je=document.createRange();je.selectNodeContents(de),me==null||me.removeAllRanges(),me==null||me.addRange(je),document.execCommand(re,!1,he||void 0),me==null||me.removeAllRanges()}}}),H.current&&(It(H.current),u(H.current.innerHTML)),Pt.current.clear(),bt({isOpen:!1,actionType:"",signature:"",matches:[]})},Jt=()=>{Pt.current.clear(),bt({isOpen:!1,actionType:"",signature:"",matches:[]})};q.useEffect(()=>{const L=H.current;if(!L)return;const ne=ee=>{var Ft;if(dt.current.suppressClick){dt.current.suppressClick=!1;return}const de=ee.target;if(ee.metaKey||ee.ctrlKey){const ke=de.closest('[data-overlay="true"]');let et=null;if(ke&&(et=z||M),et||(et=de.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, span.mission-box, span.shape-circle, span.shape-pill, span.shape-speech, span.shape-cloud, span.shape-rectangle, table, img, .floating-text, .writing-lines")),et){ee.preventDefault(),ee.stopPropagation(),le(et);return}}else Le.length>0&&be();if(_){let ke=de.closest(".page");if(ke||(ke=document.elementsFromPoint(ee.clientX,ee.clientY).map(Ct=>Ct.closest(".page")).find(Ct=>Ct)||null),ke){console.log("[TextLayer] insert at click",{x:ee.clientX,y:ee.clientY}),ee.preventDefault(),ee.stopPropagation();const et=ke.getBoundingClientRect(),Ct=Y/100||1,Tt=(ee.clientX-et.left)/Ct,Vt=(ee.clientY-et.top)/Ct;w(ke,Tt,Vt);return}}const me=de.closest("td[data-toc-page], th[data-toc-page]");if(me){const ke=me.closest("tr[data-toc-target]");if(ke){ee.preventDefault(),ee.stopPropagation();const et=ke.getAttribute("data-toc-target")||"";if(et){const Ct=document.getElementById(et);Ct&&Ct.scrollIntoView({behavior:"smooth",block:"start"})}return}}const je=de.closest("tr[data-toc-target]");if(je){ee.preventDefault(),ee.stopPropagation();const ke=je.getAttribute("data-toc-target")||"";if(ke){const et=document.getElementById(ke);et&&et.scrollIntoView({behavior:"smooth",block:"start"})}return}const Qe=de.closest('a[data-toc-link="true"]');if(Qe){ee.preventDefault(),ee.stopPropagation();const ke=Qe.getAttribute("href")||"",et=ke.startsWith("#")?ke.slice(1):ke;if(et){const Ct=document.getElementById(et);Ct&&Ct.scrollIntoView({behavior:"smooth",block:"start"})}return}if(de.classList.contains("page")||de.classList.contains("editor-workspace")){He&&(He.removeAttribute("data-selected"),Ye(null));const ke=(Ft=H.current)==null?void 0:Ft.querySelectorAll('[data-selected="true"]');ke==null||ke.forEach(Ct=>Ct.removeAttribute("data-selected")),x(null),m(null),d(null),kt(null);const et=de.classList.contains("page")?de:de.closest(".page");if(et){const Ct=et.ownerDocument,Tt=Ct.getSelection();let Vt=null;const zn=Ct;if(zn.caretRangeFromPoint)Vt=zn.caretRangeFromPoint(ee.clientX,ee.clientY);else if(zn.caretPositionFromPoint){const Yt=zn.caretPositionFromPoint(ee.clientX,ee.clientY);Yt&&(Vt=Ct.createRange(),Vt.setStart(Yt.offsetNode,Yt.offset),Vt.collapse(!0))}const vl=Yt=>{const Rn=Ct.createRange();Rn.setStartAfter(Yt),Rn.collapse(!0),Tt==null||Tt.removeAllRanges(),Tt==null||Tt.addRange(Rn)};if(Vt){const Yt=Vt.commonAncestorContainer,Rn=Yt.nodeType===Node.ELEMENT_NODE?Yt:Yt.parentElement,el=Rn==null?void 0:Rn.closest("table, .writing-lines, .tracing-line, .mission-box, .shape-rectangle, .shape-circle, .shape-pill, .shape-speech, .shape-cloud");if(el){const Yl=el.getBoundingClientRect();if(ee.clientY>Yl.bottom-2){vl(el);return}}Vt.collapse(!0),Tt==null||Tt.removeAllRanges(),Tt==null||Tt.addRange(Vt)}}return}const vt=de.closest("a");if(vt){const ke=vt.getBoundingClientRect();kt({url:vt.href,x:ke.left+ke.width/2,y:ke.top,element:vt})}else kt(null);if(de.closest(".toc-entry")&&Oe&&Oe(),fe!=null&&fe.active&&Be){ee.preventDefault(),ee.stopPropagation();const ke=de.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, div");if(ke){if(ke.classList.contains("editor-workspace")||ke.classList.contains("page"))return;let et=!1;ke.id||(ke.id=`manual-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,et=!0),Be(ke.id),et&&H.current&&u(H.current.innerHTML)}return}const St=ke=>{const et=window.getSelection(),Ct=document.createRange();Ct.setStartAfter(ke),Ct.collapse(!0),et==null||et.removeAllRanges(),et==null||et.addRange(Ct)},gt=de.closest(".mission-box, .shape-rectangle, .shape-circle, .shape-pill, .shape-speech, .shape-cloud");if(gt){const ke=gt.getBoundingClientRect(),et=Array.from(gt.children),Ct=et.length?Math.max(...et.map(Tt=>Tt.getBoundingClientRect().bottom)):ke.top;if(ee.clientY>Ct+4&&ee.clientY<=ke.bottom+2){St(gt);return}}if(He&&He.removeAttribute("data-selected"),de.tagName==="IMG")x(de),de.setAttribute("data-selected","true"),Ye(de);else if(de.tagName==="TEXTAREA"||de.classList.contains("writing-lines"))x(de),de.setAttribute("data-selected","true"),Ye(de);else if(de.closest(".floating-text")){const ke=de.closest(".floating-text");m(ke),ke.setAttribute("data-selected","true"),Ye(ke)}else x(null),m(null);let it=de.closest("hr");if(it||(it=de.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, span.mission-box, span.shape-circle, span.shape-pill, span.shape-speech, span.shape-cloud, span.shape-rectangle, table, img")),it){it.setAttribute("data-selected","true"),Ye(it);const ke=window.getSelection();ke&&ke.rangeCount>0&&!ke.isCollapsed&&it.contains(ke.getRangeAt(0).commonAncestorContainer)?Ot():c(mn(it),it)}p&&p(it);const mt=de.closest("hr");mt?(d(mt),mt.setAttribute("data-selected","true"),Ye(mt)):d(null)};let re=null;const he=ee=>{var je;const de=(ee==null?void 0:ee.target)||null,me=!!((je=de==null?void 0:de.closest)!=null&&je.call(de,".floating-text"));if(H.current){re&&clearTimeout(re);const Qe=me?0:180;re=window.setTimeout(()=>{if(H.current){try{me||(It(H.current),In(H.current))}catch(nt){console.error("Reflow error:",nt)}u(H.current.innerHTML)}},Qe)}};return L.addEventListener("click",ne),L.addEventListener("input",he),L.addEventListener("keyup",he),L.addEventListener("mouseup",Ot),document.addEventListener("selectionchange",Ot),()=>{re&&clearTimeout(re),L.removeEventListener("click",ne),L.removeEventListener("input",he),L.removeEventListener("keyup",he),L.removeEventListener("mouseup",Ot),document.removeEventListener("selectionchange",Ot)}},[Ot,x,u,fe,Be,mn,c,_,w]),q.useEffect(()=>{if(!_)return;const L=ne=>{const he=document.elementsFromPoint(ne.clientX,ne.clientY).map(Qe=>Qe.closest(".page")).find(Qe=>Qe)||null;if(!he)return;ne.preventDefault(),ne.stopPropagation();const ee=he.getBoundingClientRect(),de=Y/100||1,me=(ne.clientX-ee.left)/de,je=(ne.clientY-ee.top)/de;w(he,me,je)};return document.addEventListener("mousedown",L,!0),()=>{document.removeEventListener("mousedown",L,!0)}},[_,w,Y]),q.useEffect(()=>{const L=H.current,ne=j.current;return L&&L.classList.toggle("text-layer-mode",_),ne&&ne.classList.toggle("text-layer-mode",_),document.body.style.cursor=_?"crosshair":"",()=>{document.body.style.cursor=""}},[_,j]),q.useEffect(()=>{if(!F)return;const L=ne=>{ne.key==="Escape"&&Ne()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[F,Ne]);const Kl={transform:`scale(${Y/100})`,transformOrigin:"top center"},ql=y==="double"?"editor-workspace flex flex-row flex-wrap justify-center gap-4 outline-none relative":"editor-workspace w-full flex flex-col items-center outline-none relative";return s.jsxs("div",{ref:j,className:`editor-container flex-1 bg-gray-200 overflow-auto h-full relative p-8 flex flex-col items-center ${_?"text-layer-mode":""}`,children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:h}}),s.jsx("style",{children:Ut}),s.jsx("style",{children:`
            .editor-workspace .page {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
                margin-bottom: 2rem;
                background-color: white;
                display: block; 
                outline: none;
                position: relative; 
            }
            .cursor-crosshair, .cursor-crosshair * {
                cursor: crosshair !important;
            }
            .editor-workspace * {
                user-select: text !important;
                -webkit-user-select: text !important;
            }
            .editor-workspace p, 
            .editor-workspace h1, 
            .editor-workspace h2, 
            .editor-workspace h3, 
            .editor-workspace h4, 
            .editor-workspace h5, 
            .editor-workspace h6,
            .editor-workspace div:not(.page),
            .editor-workspace span,
            .editor-workspace li,
            .editor-workspace blockquote {
                cursor: text;
            }
            .editor-workspace.text-layer-mode {
                cursor: crosshair !important;
            }
            .editor-workspace.text-layer-mode * {
                cursor: crosshair !important;
            }
            .editor-workspace .spacer {
                cursor: pointer;
                min-height: 20px;
                border: 1px dashed transparent;
                transition: border-color 0.2s;
            }
            .editor-workspace .spacer:hover {
                border-color: #c4a7ff;
            }
            .editor-workspace hr {
                cursor: pointer;
                transition: outline 0.2s;
            }
            .editor-workspace hr:hover {
                outline: 2px dashed #8d55f1;
                outline-offset: 2px;
            }
            .text-mode-badge {
                position: fixed;
                top: 90px;
                left: 16px;
                z-index: 9999;
                background: #111827;
                color: #fff;
                font-size: 11px;
                font-weight: 700;
                letter-spacing: 0.04em;
                padding: 6px 10px;
                border-radius: 999px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }
            .editor-workspace table.toc-table tr[data-toc-target] {
                cursor: pointer;
            }
            .editor-workspace table.toc-table td[data-toc-page],
            .editor-workspace table.toc-table th[data-toc-page] {
                cursor: pointer;
            }
            .editor-workspace.toc-modal-open * {
                outline: none !important;
                outline-offset: 0 !important;
            }
            .editor-workspace.toc-modal-open *:hover {
                outline: none !important;
                background-color: transparent !important;
            }
            .editor-workspace.toc-modal-open [data-selected="true"] {
                outline: none !important;
            }
            .editor-workspace hr[data-selected="true"] {
                outline: 2px solid #8d55f1;
                outline-offset: 2px;
            }
            .editor-workspace [data-selected="true"] {
                outline: 2px solid #8d55f1 !important;
                outline-offset: 2px !important;
            }
            .editor-workspace [data-multi-selected="true"] {
                outline: 2px dashed #10b981 !important;
                outline-offset: 2px !important;
            }
            .editor-workspace p,
            .editor-workspace h1,
            .editor-workspace h2,
            .editor-workspace h3,
            .editor-workspace h4,
            .editor-workspace h5,
            .editor-workspace h6,
            .editor-workspace div:not(.page):not(.editor-workspace),
            .editor-workspace blockquote,
            .editor-workspace li,
            .editor-workspace table,
            .editor-workspace img,
            .editor-workspace hr {
                cursor: grab;
                transition: outline 0.15s, background-color 0.15s;
            }
            .editor-workspace p:hover,
            .editor-workspace h1:hover,
            .editor-workspace h2:hover,
            .editor-workspace h3:hover,
            .editor-workspace h4:hover,
            .editor-workspace h5:hover,
            .editor-workspace h6:hover,
            .editor-workspace div:not(.page):not(.editor-workspace):hover,
            .editor-workspace blockquote:hover,
            .editor-workspace li:hover,
            .editor-workspace table:hover,
            .editor-workspace img:hover,
            .editor-workspace hr:hover {
                outline: 2px dashed #8d55f1;
                outline-offset: 2px;
                background-color: rgba(141, 85, 241, 0.06);
            }
            ${y==="double"?`
            .editor-workspace {
                display: flex !important;
                flex-direction: row !important;
                flex-wrap: wrap !important;
                justify-content: center !important;
                align-items: flex-start !important;
                gap: 1.5rem !important;
            }
            .editor-workspace .page {
                flex-shrink: 0 !important;
                margin-bottom: 0 !important;
            }
            `:""}
        `}),_&&s.jsx("div",{className:"text-mode-badge",children:"TEXT MODE ON"}),s.jsx("div",{ref:H,className:`${ql} ${fe!=null&&fe.active?"cursor-crosshair":""} ${_?"text-layer-mode":""} ${Dt.isOpen?"toc-modal-open":""}`,style:Kl,contentEditable:!W.isCropping&&!(fe!=null&&fe.active),suppressContentEditableWarning:!0,onMouseDown:L=>{if(L.metaKey&&L.button===0&&!_&&!W.isCropping&&!(fe!=null&&fe.active)){const he=j.current;if(!he)return;dt.current.active=!0,dt.current.startX=L.clientX,dt.current.startY=L.clientY,dt.current.didDrag=!1,dt.current.suppressClick=!1;const ee=he.getBoundingClientRect(),de=(Qe,nt)=>{const vt=Math.min(Qe,dt.current.startX)-ee.left+he.scrollLeft,wt=Math.min(nt,dt.current.startY)-ee.top+he.scrollTop,St=Math.abs(Qe-dt.current.startX),gt=Math.abs(nt-dt.current.startY);Pe({x:vt,y:wt,width:St,height:gt})},me=Qe=>{if(!dt.current.active)return;const nt=Math.abs(Qe.clientX-dt.current.startX),vt=Math.abs(Qe.clientY-dt.current.startY);!dt.current.didDrag&&(nt>4||vt>4)&&(dt.current.didDrag=!0,dt.current.suppressClick=!0,document.body.style.userSelect="none"),dt.current.didDrag&&de(Qe.clientX,Qe.clientY)},je=Qe=>{if(!dt.current.active)return;if(dt.current.active=!1,window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",je),document.body.style.userSelect="",!dt.current.didDrag){Pe(null);return}const nt=Math.min(Qe.clientX,dt.current.startX),vt=Math.max(Qe.clientX,dt.current.startX),wt=Math.min(Qe.clientY,dt.current.startY),St=Math.max(Qe.clientY,dt.current.startY),gt=jn().filter(it=>{const mt=it.getBoundingClientRect();return!(mt.right<nt||mt.left>vt||mt.bottom<wt||mt.top>St)});if(gt.length>0){const it=new Set(Le);gt.forEach(mt=>{mt.id||(mt.id=`multi-${Date.now()}-${Math.random().toString(36).slice(2,6)}`),it.has(mt.id)||le(mt)})}Pe(null)};window.addEventListener("mousemove",me),window.addEventListener("mouseup",je),L.preventDefault(),L.stopPropagation();return}L.target.closest('a[data-toc-link="true"]')&&(L.preventDefault(),L.stopPropagation())},onKeyDown:Cn,onDrop:Kn,onDragOver:L=>L.preventDefault(),onContextMenu:qn}),zt&&zt.width>0&&zt.height>0&&s.jsx("div",{style:{position:"absolute",left:zt.x,top:zt.y,width:zt.width,height:zt.height,border:"1px dashed #8d55f1",background:"rgba(141, 85, 241, 0.12)",boxShadow:"0 0 0 1px rgba(141, 85, 241, 0.2) inset",pointerEvents:"none",zIndex:50}}),F&&Le.length>1&&(()=>{const L=Le.map(St=>document.getElementById(St)).filter(Boolean);if(L.length<2)return null;const ne=j.current;if(!ne)return null;const re=ne.getBoundingClientRect(),he=L.map(St=>St.getBoundingClientRect()),ee=Math.min(...he.map(St=>St.left)),de=Math.max(...he.map(St=>St.right)),me=Math.min(...he.map(St=>St.top)),je=Math.max(...he.map(St=>St.bottom)),Qe=(ee+de)/2,nt=(me+je)/2,vt=F==="x"?{left:ee-re.left,top:nt-re.top,width:de-ee,height:2}:{left:Qe-re.left,top:me-re.top,width:2,height:je-me},wt=F==="x"?{left:Qe-re.left-8,top:nt-re.top-8}:{left:Qe-re.left-8,top:nt-re.top-8};return s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[s.jsx("div",{style:{position:"absolute",background:"#8d55f1",...vt}}),s.jsx("div",{onMouseDown:Zn,title:"Drag to adjust spacing",style:{position:"absolute",width:16,height:16,borderRadius:"999px",background:"#8d55f1",boxShadow:"0 2px 6px rgba(0,0,0,0.2)",cursor:F==="x"?"ew-resize":"ns-resize",pointerEvents:"auto",...wt}})]})})(),ye&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:s.jsx("div",{className:"relative w-full h-full",children:Ve.map((L,ne)=>s.jsxs("div",{className:"absolute pointer-events-none",style:{top:L.top,left:L.left,width:L.width,height:L.height},children:[s.jsx(xx,{width:L.width,height:L.height,margins:ie}),s.jsx(mx,{width:L.width,height:L.height,margins:ie,onMarginChange:we})]},ne))})}),sn.length>0&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:sn.map((L,ne)=>s.jsx("div",{style:{position:"absolute",left:L.x,top:L.y,width:L.width,height:L.height,background:"rgba(239, 68, 68, 0.35)",boxShadow:"0 0 0 1px rgba(239, 68, 68, 0.6) inset",zIndex:55}},`margin-overflow-${ne}`))}),M&&s.jsx(j0,{image:M,containerRef:j,isCropping:W.isCropping,showSmartGuides:oe,onCropComplete:Ee,onCancelCrop:_e,multiSelectedElements:Le,pageMargins:ie,onResize:()=>{H.current&&(It(H.current),u(H.current.innerHTML))}}),z&&s.jsx(j0,{image:z,containerRef:j,isCropping:!1,showSmartGuides:oe,onCropComplete:()=>{},onCancelCrop:()=>{},multiSelectedElements:Le,pageMargins:ie,onResize:()=>{H.current&&(It(H.current),u(H.current.innerHTML))}}),ze&&s.jsx(yx,{x:ze.x,y:ze.y,onClose:()=>rt(null),onCopy:Ul,onCut:Jn,onPaste:Z,onCopyStyle:A,onPasteStyle:K,canPasteStyle:se,onCreateQRCode:()=>at({isOpen:!0,url:ze.linkUrl||""}),onTransformToTOC:(bl=ze.block)!=null&&bl.closest("table")?()=>Sn(ze.block.closest("table")):void 0,onDistributeHoriz:Le.length>1?()=>Se("x"):void 0,onDistributeVert:Le.length>1?()=>Se("y"):void 0,onAlignLeft:Le.length>1?()=>gn("left"):void 0,onAlignCenter:Le.length>1?()=>gn("center"):void 0,onAlignRight:Le.length>1?()=>gn("right"):void 0,onAlignTop:Le.length>1?()=>gn("top"):void 0,onAlignMiddle:Le.length>1?()=>gn("middle"):void 0,onAlignBottom:Le.length>1?()=>gn("bottom"):void 0,onToggleMarginOverride:ze.block&&!ze.block.classList.contains("page-footer")?()=>ml(ze.block):void 0,isMarginOverride:((il=ze.block)==null?void 0:il.getAttribute("data-ignore-margins"))==="true",onMoveUp:Yn,onMoveDown:xl,onDelete:yl,onDuplicate:zl,onMerge:Xn()?Pn:void 0,onMergePageElements:ze.page?on:void 0,hasBlock:!!ze.block}),He&&!ze&&!He.classList.contains("floating-text")&&s.jsx(bx,{element:He,containerRef:j,showSmartGuides:oe,onUpdate:()=>{H.current&&(It(H.current),u(H.current.innerHTML)),Ye(null)},onAction:Tn}),Xt&&s.jsx(Mx,{url:Xt.url,x:Xt.x,y:Xt.y,onEdit:()=>{},onRemove:()=>{},onCreateQRCode:()=>{at({isOpen:!0,url:Xt.url}),kt(null)},onClose:()=>kt(null)}),s.jsx(kx,{isOpen:Dt.isOpen,rows:Dt.rows,anchors:Dt.anchors,onClose:()=>Mn({isOpen:!1,tableId:"",rows:[],anchors:[]}),onApply:L=>{Nn(Dt.tableId,L),Mn({isOpen:!1,tableId:"",rows:[],anchors:[]})}}),s.jsx(Y0,{isOpen:Ht.isOpen,actionType:Ht.actionType,matches:Ht.matches,onConfirm:Ie,onCancel:Jt}),s.jsx(Ax,{isOpen:Fe.isOpen,initialUrl:Fe.url,onClose:()=>at({...Fe,isOpen:!1}),onInsert:(L,ne)=>{Je(`<img src="${L}" data-original-url="${ne}" class="qr-code" style="width: 150px; height: auto; display: inline-block;" />`)}})]})},Dx=({isOpen:r,onClose:h,onInsert:u})=>{const[c,p]=q.useState({includeH1:!0,includeH2:!0,includeH3:!1,fontSize:11,fontFamily:"inherit",h2Indent:20,h3Indent:40,showLeader:!0,lineHeight:1.6});if(!r)return null;const x=j=>({display:"flex",alignItems:"baseline",width:"100%",whiteSpace:"nowrap",overflow:"hidden",margin:0,padding:"1px 0",lineHeight:c.lineHeight,fontSize:`${c.fontSize}px`,fontFamily:c.fontFamily==="inherit"?"inherit":c.fontFamily,fontWeight:j===1?700:400,fontStyle:j===3?"italic":"normal"}),m=j=>({flexShrink:0,paddingLeft:j===2?`${c.h2Indent}px`:j===3?`${c.h3Indent}px`:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),d={flex:"1 1 auto",minWidth:"20px",height:0,margin:"0 4px",borderBottom:c.showLeader?"1px dotted #aaa":"none"},S={flexShrink:0,minWidth:"2ch",textAlign:"right",fontVariantNumeric:"tabular-nums"},b=[{level:1,text:"Chapter 1: Introduction",page:1},{level:2,text:"The Beginning",page:3},{level:3,text:"Background",page:5}];return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[520px] max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h3",{className:"font-bold text-base text-gray-800",children:"Table of Contents"}),s.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:s.jsx(ui,{size:18})})]}),s.jsxs("div",{className:"p-4 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Include"}),s.jsx("div",{className:"flex gap-4",children:["H1","H2","H3"].map(j=>{const M=`include${j}`;return s.jsxs("label",{className:"flex items-center gap-1.5 text-sm",children:[s.jsx("input",{type:"checkbox",checked:c[M],onChange:z=>p({...c,[M]:z.target.checked}),className:"rounded text-violet-600"}),j]},j)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Font Size (",c.fontSize,"px)"]}),s.jsx("input",{type:"range",min:8,max:16,value:c.fontSize,onChange:j=>p({...c,fontSize:Number(j.target.value)}),className:"w-full accent-violet-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Font"}),s.jsxs("select",{value:c.fontFamily,onChange:j=>p({...c,fontFamily:j.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[s.jsx("option",{value:"inherit",children:"Document Font"}),s.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"Georgia, serif",children:"Georgia"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["H2 Indent (",c.h2Indent,"px)"]}),s.jsx("input",{type:"range",min:0,max:60,value:c.h2Indent,onChange:j=>p({...c,h2Indent:Number(j.target.value)}),className:"w-full accent-violet-600"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["H3 Indent (",c.h3Indent,"px)"]}),s.jsx("input",{type:"range",min:0,max:80,value:c.h3Indent,onChange:j=>p({...c,h3Indent:Number(j.target.value)}),className:"w-full accent-violet-600"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Line Height (",c.lineHeight,")"]}),s.jsx("input",{type:"range",min:1,max:2.5,step:.1,value:c.lineHeight,onChange:j=>p({...c,lineHeight:Number(j.target.value)}),className:"w-full accent-violet-600"})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:c.showLeader,onChange:j=>p({...c,showLeader:j.target.checked}),className:"rounded text-violet-600"}),"Dotted leader"]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Preview"}),s.jsx("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:b.map((j,M)=>s.jsxs("div",{style:x(j.level),children:[s.jsx("span",{style:m(j.level),children:j.text}),s.jsx("span",{style:d}),s.jsx("span",{style:S,children:j.page})]},M))})]})]}),s.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[s.jsx("button",{onClick:h,className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),s.jsx("button",{onClick:()=>u(c),className:"px-4 py-2 text-sm text-white bg-violet-600 hover:bg-violet-700 rounded shadow-sm font-semibold",children:"Insert"})]})]})})},Ox=({isOpen:r,onClose:h,onApply:u,onPreview:c,anchors:p})=>{const[x,m]=q.useState(""),[d,S]=q.useState("Arial, sans-serif"),[b,j]=q.useState("12"),[M,z]=q.useState("bottom"),[ye,oe]=q.useState("center"),[ie,we]=q.useState(.4);return q.useEffect(()=>{r&&p.length>0&&!x&&m(p[0].id)},[r,p]),q.useEffect(()=>{r&&x&&c(x,d,b,M,ye,ie)},[x,d,b,M,ye,ie]),r?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[s.jsx("h3",{className:"font-bold text-gray-800",children:"Page Numbering Settings"}),s.jsx("button",{onClick:h,className:"text-brand-600 hover:text-brand-700 transition-colors",children:s.jsx(ui,{size:20})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start numbering from:"}),s.jsx("select",{value:x,onChange:fe=>m(fe.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-brand-500",children:p.map(fe=>s.jsx("option",{value:fe.id,children:fe.tagName==="DOC_START"?"Beginning of Document":`${fe.tagName.toUpperCase()} - ${fe.text.substring(0,30)}${fe.text.length>30?"...":""}`},fe.id))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position:"}),s.jsxs("div",{className:"flex border border-brand-200 rounded overflow-hidden",children:[s.jsx("button",{onClick:()=>z("top"),className:`flex-1 flex justify-center py-2 text-brand-600 hover:text-brand-700 ${M==="top"?"bg-brand-100 text-brand-700":"bg-white hover:bg-brand-50"}`,children:s.jsx(Xg,{size:18})}),s.jsx("div",{className:"w-px bg-brand-200"}),s.jsx("button",{onClick:()=>z("bottom"),className:`flex-1 flex justify-center py-2 text-brand-600 hover:text-brand-700 ${M==="bottom"?"bg-brand-100 text-brand-700":"bg-white hover:bg-brand-50"}`,children:s.jsx(Ug,{size:18})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alignment:"}),s.jsxs("div",{className:"flex border border-brand-200 rounded overflow-hidden",children:[s.jsx("button",{onClick:()=>oe("left"),className:`flex-1 flex justify-center py-2 text-brand-600 hover:text-brand-700 ${ye==="left"?"bg-brand-100 text-brand-700":"bg-white hover:bg-brand-50"}`,children:s.jsx(Is,{size:18})}),s.jsx("div",{className:"w-px bg-brand-200"}),s.jsx("button",{onClick:()=>oe("center"),className:`flex-1 flex justify-center py-2 text-brand-600 hover:text-brand-700 ${ye==="center"?"bg-brand-100 text-brand-700":"bg-white hover:bg-brand-50"}`,children:s.jsx(Ws,{size:18})}),s.jsx("div",{className:"w-px bg-brand-200"}),s.jsx("button",{onClick:()=>oe("right"),className:`flex-1 flex justify-center py-2 text-brand-600 hover:text-brand-700 ${ye==="right"?"bg-brand-100 text-brand-700":"bg-white hover:bg-brand-50"}`,children:s.jsx(Fs,{size:18})})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1",children:[s.jsx(Nm,{size:14})," Margin from edge:"]}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 bg-brand-50 px-2 py-0.5 rounded",children:[ie.toFixed(2)," in"]})]}),s.jsx("input",{type:"range",min:"0.1",max:"2.0",step:"0.05",value:ie,onChange:fe=>we(parseFloat(fe.target.value)),className:"w-full accent-brand-600 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-400 mt-1",children:[s.jsx("span",{children:'0.1"'}),s.jsx("span",{children:'1.0"'}),s.jsx("span",{children:'2.0"'})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-[2]",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 text-[11px] uppercase tracking-wider",children:"Font:"}),s.jsxs("select",{value:d,onChange:fe=>S(fe.target.value),className:"w-full border border-gray-300 rounded px-3 py-1.5 text-sm focus:outline-none focus:border-brand-500",children:[s.jsx("option",{value:"'Roboto', sans-serif",children:"Roboto"}),s.jsx("option",{value:"'Courier Prime', monospace",children:"Courier Prime"}),s.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"'Black Ops One', cursive",children:"Black Ops One"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 text-[11px] uppercase tracking-wider",children:"Size:"}),s.jsxs("select",{value:b,onChange:fe=>j(fe.target.value),className:"w-full border border-gray-300 rounded px-3 py-1.5 text-sm focus:outline-none focus:border-brand-500",children:[s.jsx("option",{value:"9",children:"9pt"}),s.jsx("option",{value:"10",children:"10pt"}),s.jsx("option",{value:"11",children:"11pt"}),s.jsx("option",{value:"12",children:"12pt"}),s.jsx("option",{value:"14",children:"14pt"})]})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-2 rounded-b-lg",children:[s.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-brand-700 bg-brand-50 hover:bg-brand-100 rounded transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>u(x,d,b,M,ye,ie),className:"px-6 py-2 text-sm font-bold text-white bg-[#8d55f1] hover:bg-[#7539d3] rounded shadow-md transition-all active:scale-95",children:"Finish"})]})]})}):null},Js=[50,75,100,125,150,200],_x=({zoom:r,viewMode:h,onZoomChange:u,onViewModeChange:c})=>{const p=()=>{const m=Js.findIndex(d=>d>=r);m<Js.length-1?u(Js[m+1]):r<200&&u(Math.min(200,r+10))},x=()=>{const m=Js.findIndex(d=>d>=r);m>0?u(Js[m-1]):r>50&&u(Math.max(50,r-10))};return s.jsxs("div",{className:"fixed bottom-4 right-4 flex items-center gap-2 bg-white shadow-lg rounded-lg px-3 py-2 z-50 border border-gray-200",children:[s.jsx("button",{onClick:x,disabled:r<=50,className:"p-1.5 hover:bg-brand-50 hover:text-brand-600 rounded disabled:opacity-40 disabled:cursor-not-allowed",title:"Riduci zoom",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),s.jsx("select",{value:r,onChange:m=>u(Number(m.target.value)),className:"text-sm bg-transparent border-none focus:outline-none cursor-pointer font-medium text-gray-700 w-16 text-center",children:Js.map(m=>s.jsxs("option",{value:m,children:[m,"%"]},m))}),s.jsx("button",{onClick:p,disabled:r>=200,className:"p-1.5 hover:bg-brand-50 hover:text-brand-600 rounded disabled:opacity-40 disabled:cursor-not-allowed",title:"Aumenta zoom",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),s.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),s.jsx("button",{onClick:()=>c("single"),className:`p-1.5 rounded ${h==="single"?"bg-brand-100 text-brand-600":"hover:bg-brand-50 hover:text-brand-600 text-gray-600"}`,title:"Single page view",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("rect",{x:"6",y:"3",width:"12",height:"18",rx:"1",strokeWidth:2})})}),s.jsx("button",{onClick:()=>c("double"),className:`p-1.5 rounded ${h==="double"?"bg-brand-100 text-brand-600":"hover:bg-brand-50 hover:text-brand-600 text-gray-600"}`,title:"Two-page view",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("rect",{x:"2",y:"4",width:"8",height:"16",rx:"1",strokeWidth:2}),s.jsx("rect",{x:"14",y:"4",width:"8",height:"16",rx:"1",strokeWidth:2})]})})]})};let Su=null;const Bx=()=>(Su||(Su=document.createElement("canvas").getContext("2d")),Su),Hx=r=>{const h=r.replace(/['"]/g,"").split(",")[0].trim();if(h.toLowerCase()==="inherit"||h==="")return!0;const u=Bx();if(!u)return!1;const c="abcdefghijklmnopqrstuvwxyz0123456789",p=d=>(u.font=`72px ${d}`,u.measureText(c).width),x=["sans-serif","serif","monospace"];let m=!1;for(const d of x){const S=p(d),b=p(`'${h}', ${d}`);if(S!==b){m=!0;break}}return m},L0=async()=>{let r=[];if("queryLocalFonts"in window)try{const h=await window.queryLocalFonts(),u=new Set;if(h.forEach(c=>u.add(c.family)),r=Array.from(u).sort().map(c=>({name:c,value:`'${c}', sans-serif`,available:!0})),r.length>0)return[...Nu.filter(p=>["Courier Prime","Black Ops One","Lobster","Default"].includes(p.name)).map(p=>({...p,available:!0})),...r]}catch(h){console.warn("Local Font Access API denied or failed:",h)}return Nu.map(h=>({...h,available:["Courier Prime","Black Ops One","Roboto","Default"].includes(h.name)?!0:Hx(h.value)}))},Ux=r=>{if(!r)return{entries:[],modifiedHtml:null};const h=[],u=r.querySelectorAll(".page");let c=!1;const p=[];["h1","h2","h3"].forEach(m=>{const d=r.querySelector(m);if(d){const S=window.getComputedStyle(d);p.push({tagName:m,fontSize:parseFloat(S.fontSize),fontWeight:z0(S.fontWeight),color:S.color})}}),u.forEach((m,d)=>{m.querySelectorAll("h1, h2, h3, h4, h5, h6, p, div.mission-box").forEach((b,j)=>{const M=b,z=M.innerText.trim();if(!z||z.length>150)return;const ye=M.tagName.toLowerCase(),oe=ye.startsWith("h");let ie=!1;if(M.parentElement===m){let _e=M.previousElementSibling;for(;_e&&(_e.tagName==="BR"||_e.innerText.trim()==="");)_e=_e.previousElementSibling;_e||(ie=!0)}const we=window.getComputedStyle(M),fe=parseFloat(we.fontSize),Be=z0(we.fontWeight),De=we.color;let W;if(!oe){const _e=p.find(N=>Math.abs(N.fontSize-fe)<1&&Math.abs(N.fontWeight-Be)<100);_e&&(W=_e.tagName)}const Ee=fe>18||Be>=600&&fe>13;if(oe||W||ie&&Ee){M.id||(M.id=`struct-${d}-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,c=!0);let _e=fe*Be;ie&&(_e*=1.5),(W==="h1"||ye==="h1")&&(_e*=2),h.push({element:M,text:z,page:d+1,tagName:ye,fontSize:fe,fontWeight:Be,color:De,isExplicit:oe,isPageTop:ie,matchedRef:W,score:_e})}})});const x=[];return h.forEach(m=>{const d=m.element.getAttribute("data-structure-status")||"pending";if(d==="rejected")return;let S=m.tagName;m.isExplicit?S=m.tagName:m.matchedRef?S=`detected-${m.matchedRef}`:m.isPageTop||m.fontSize>=24?S="detected-h1":m.fontSize>=18?S="detected-h2":S="detected-h3",x.push({id:m.element.id,elementId:m.element.id,text:m.text,page:m.page,type:S,status:d})}),{entries:x,modifiedHtml:c?r.innerHTML:null}},z0=r=>{if(r==="bold")return 700;if(r==="normal")return 400;const h=parseInt(r);return isNaN(h)?400:h},qx=({isOpen:r,currentFileName:h,onClose:u,onExportPDF:c,onExportHTML:p,onExportDOCX:x})=>{const m=h.replace(/\.(html?|docx?)$/i,""),[d,S]=q.useState(m),[b,j]=q.useState("pdf"),[M,z]=q.useState(!1);if(!r)return null;const ye=async()=>{z(!0);const oe=d||"documento";try{switch(b){case"pdf":await c(oe);break;case"html":p(oe);break;case"docx":await x(oe);break}u()}catch(ie){console.error("Export failed:",ie),alert("Export failed. Please try again.")}finally{z(!1)}};return s.jsx("div",{className:"app-modal fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Export document"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose format and file name"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File name"}),s.jsx("input",{type:"text",value:d,onChange:oe=>S(oe.target.value),placeholder:"Document name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>j("pdf"),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${b==="pdf"?"border-violet-500 bg-violet-50 text-violet-700":"border-gray-200 hover:border-violet-300 hover:bg-violet-50/30"}`,children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsx("div",{className:"text-sm font-semibold",children:"PDF"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Print"})]}),s.jsxs("button",{onClick:()=>j("html"),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${b==="html"?"border-violet-500 bg-violet-50 text-violet-700":"border-gray-200 hover:border-violet-300 hover:bg-violet-50/30"}`,children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsx("div",{className:"text-sm font-semibold",children:"HTML"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Web"})]}),s.jsxs("button",{onClick:()=>j("docx"),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${b==="docx"?"border-violet-500 bg-violet-50 text-violet-700":"border-gray-200 hover:border-violet-300 hover:bg-violet-50/30"}`,children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsx("div",{className:"text-sm font-semibold",children:"DOCX"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Word"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:[b==="pdf"&&s.jsx(s.Fragment,{children:" The PDF keeps layout, images, and formatting exactly as shown."}),b==="html"&&s.jsx(s.Fragment,{children:" HTML preserves all content and can be reopened in Instant Writer PRO."}),b==="docx"&&s.jsx(s.Fragment,{children:" DOCX can be opened in Microsoft Word, Google Docs, and other editors."})]})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-center gap-4 rounded-b-xl",children:[s.jsx("button",{onClick:u,disabled:M,className:"px-8 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium",children:"Cancel"}),s.jsx("button",{onClick:ye,disabled:M||!d.trim(),className:"px-10 py-3 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-semibold shadow-lg",children:M?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):s.jsxs(s.Fragment,{children:["Download ",b.toUpperCase()]})})]})]})})},Yx=({isOpen:r,initialApiKey:h,onClose:u,onSave:c})=>{const[p,x]=q.useState(""),[m,d]=q.useState(!1);return q.useEffect(()=>{x(h||"")},[h,r]),r?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[520px] max-w-[90vw]",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Settings"}),s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsx("div",{className:"px-6 py-5 space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OpenAI API Key"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:m?"text":"password",value:p,onChange:S=>x(S.target.value),placeholder:"sk-...",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500",autoComplete:"off",spellCheck:!1}),s.jsx("button",{type:"button",onClick:()=>d(S=>!S),className:"px-3 py-2 text-xs text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:m?"Hide":"Show"})]}),s.jsx("div",{className:"text-[11px] text-gray-500 mt-2",children:"Saved locally in your browser. We never transmit it anywhere except to OpenAI when you use AI actions."})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-600 hover:bg-brand-50 hover:text-brand-600 rounded",children:"Cancel"}),s.jsx("button",{onClick:()=>c(p.trim()),className:"px-4 py-2 text-sm text-white bg-violet-600 hover:bg-violet-700 rounded shadow-md font-semibold",children:"Save"})]})]})}):null},ku="instantwriter_autolog_v1",Xx=r=>{if(!r)return[];try{const h=JSON.parse(r);return Array.isArray(h)?h:[]}catch{return[]}},Lu=()=>Xx(localStorage.getItem(ku)),$x=r=>{try{localStorage.setItem(ku,JSON.stringify(r))}catch{}},Q0=r=>{if(typeof r=="string")return r;if(r instanceof Error)return r.message||"Error";try{return JSON.stringify(r)}catch{return String(r)}},Gx=r=>r.map(Q0).join(" "),ss=r=>({id:`log-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,ts:Date.now(),...r}),os=(r,h)=>{const u=[...Lu(),r].slice(-h);$x(u)},rs=r=>({fileName:(r?r():{}).fileName||"",userAgent:navigator.userAgent,url:window.location.href}),Vx=r=>{const h=(r==null?void 0:r.maxEntries)??200,u=(r==null?void 0:r.captureConsole)??!0,c=(r==null?void 0:r.stallIntervalMs)??2e3,p=(r==null?void 0:r.stallThresholdMs)??1200,x=r==null?void 0:r.getContext;os(ss({level:"info",type:"app_start",message:"App started",extra:rs(x)}),h);const m=oe=>{const ie=oe.message||"Unhandled error",we=oe.error&&oe.error.stack?String(oe.error.stack):void 0,fe=oe.filename||void 0;os(ss({level:"error",type:"error",message:ie,stack:we,url:fe,extra:rs(x)}),h)},d=oe=>{const ie=oe.target,we=ie!=null&&ie.tagName?ie.tagName.toLowerCase():"resource",fe=(ie&&"src"in ie?ie.src:"")||"";fe&&os(ss({level:"warn",type:"resource_error",message:`${we} failed to load: ${fe}`,extra:rs(x)}),h)},S=oe=>{const ie=oe.reason,we=ie instanceof Error?ie.message:Q0(ie),fe=ie instanceof Error?ie.stack:void 0;os(ss({level:"error",type:"unhandled_rejection",message:we,stack:fe,extra:rs(x)}),h)};window.addEventListener("error",m),window.addEventListener("error",d,!0),window.addEventListener("unhandledrejection",S);let b=null;u&&(b=console.error.bind(console),console.error=(...oe)=>{os(ss({level:"error",type:"console_error",message:Gx(oe),extra:rs(x)}),h),b==null||b(...oe)});let j=performance.now(),M=0;const z=window.setInterval(()=>{const oe=performance.now(),ie=oe-j-c;ie>p&&Date.now()-M>1e4&&(M=Date.now(),os(ss({level:"warn",type:"stall",message:`Event loop blocked for ${Math.round(ie)}ms`,extra:rs(x)}),h)),j=oe},c),ye=()=>{os(ss({level:"info",type:"app_close",message:"App closed",extra:rs(x)}),h)};return window.addEventListener("beforeunload",ye),()=>{window.removeEventListener("error",m),window.removeEventListener("error",d,!0),window.removeEventListener("unhandledrejection",S),window.removeEventListener("beforeunload",ye),window.clearInterval(z),u&&b&&(console.error=b)}},R0=()=>Lu(),Qx=()=>{try{localStorage.removeItem(ku)}catch{}},Zx=(r="instantwriter-autolog.json")=>{const h=Lu(),u=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),c=URL.createObjectURL(u),p=document.createElement("a");p.href=c,p.download=r,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(c)},Kx=r=>{try{return new Date(r).toLocaleString()}catch{return String(r)}},Jx=({isOpen:r,onClose:h,onDownload:u,onClear:c})=>{const[p,x]=q.useState([]),[m,d]=q.useState("");q.useEffect(()=>{r&&x(R0())},[r]);const S=q.useMemo(()=>{const b=m.trim().toLowerCase();return b?p.filter(j=>{var z;return[j.message,j.stack||"",j.type,j.level,((z=j.extra)==null?void 0:z.fileName)||"",j.url||""].join(" ").toLowerCase().includes(b)}):p},[p,m]);return r?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] flex items-center justify-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[860px] max-w-[95vw] max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Auto Log"}),s.jsx("div",{className:"text-[11px] text-gray-500",children:"Saved locally on this device"})]}),s.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 flex items-center gap-3",children:[s.jsx("input",{value:m,onChange:b=>d(b.target.value),placeholder:"Search logs...",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-500",spellCheck:!1}),s.jsx("button",{onClick:()=>x(R0()),className:"px-3 py-2 text-xs text-gray-700 border border-gray-300 rounded hover:bg-gray-50",children:"Refresh"}),s.jsx("button",{onClick:u,className:"px-3 py-2 text-xs text-gray-700 border border-gray-300 rounded hover:bg-gray-50",children:"Download JSON"}),s.jsx("button",{onClick:()=>{c(),x([])},className:"px-3 py-2 text-xs text-red-600 border border-red-200 rounded hover:bg-red-50",children:"Clear"})]}),s.jsx("div",{className:"flex-1 overflow-auto px-6 py-4 space-y-3",children:S.length===0?s.jsx("div",{className:"text-sm text-gray-500",children:"No logs yet."}):S.slice().reverse().map(b=>{var j,M,z;return s.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("div",{className:"font-semibold text-gray-700",children:[b.level.toUpperCase(),"  ",b.type]}),s.jsx("div",{children:Kx(b.ts)})]}),s.jsx("div",{className:"text-sm text-gray-800 mt-2 whitespace-pre-wrap",children:b.message}),(((j=b.extra)==null?void 0:j.fileName)||b.url)&&s.jsxs("div",{className:"text-[11px] text-gray-500 mt-2",children:[(M=b.extra)!=null&&M.fileName?`file: ${b.extra.fileName}`:"",(z=b.extra)!=null&&z.fileName&&b.url?"  ":"",b.url?`url: ${b.url}`:""]}),b.stack&&s.jsx("pre",{className:"text-[11px] text-gray-600 mt-2 whitespace-pre-wrap",children:b.stack})]},b.id)})})]})}):null},Wx=()=>{const[r,h]=q.useState({htmlContent:N0,cssContent:ii,fileName:"untitled_mission.html"}),[u,c]=q.useState(Nu.map(f=>({...f,available:!0}))),[p,x]=q.useState([]),[m,d]=q.useState(!0),S=q.useRef(!0),b=q.useRef(0),[j,M]=q.useState({active:!1,level:null,selectedIds:[]});q.useEffect(()=>{const f=()=>new Promise((V,O)=>{const X=indexedDB.open("instantwriter-fonts",1);X.onupgradeneeded=()=>{const D=X.result;D.objectStoreNames.contains("fonts")||D.createObjectStore("fonts",{keyPath:"name"})},X.onsuccess=()=>V(X.result),X.onerror=()=>O(X.error)}),v=async()=>{try{const D=(await f()).transaction("fonts","readonly").objectStore("fonts").getAll();return await new Promise(Q=>{D.onsuccess=()=>Q(D.result||[]),D.onerror=()=>Q([])})}catch{return[]}},T=async()=>{const V=await L0();c(V)};T(),document.fonts.ready.then(()=>{T()});const B=localStorage.getItem("openai_api_key")||"";B&&Pt(B);const U=localStorage.getItem("custom_fonts");if(U)try{JSON.parse(U).forEach(O=>{const X=new FontFace(O.name,`url(${O.dataUrl})`);X.load().then(()=>{document.fonts.add(X),c(D=>D.some($=>$.name.toLowerCase()===O.name.toLowerCase())?D:[{name:O.name,value:`'${O.name}', sans-serif`,available:!0},...D])})})}catch{}v().then(V=>{V.forEach(O=>{const X=new FontFace(O.name,`url(${O.dataUrl})`);X.load().then(()=>{document.fonts.add(X),c(D=>D.some($=>$.name.toLowerCase()===O.name.toLowerCase())?D:[{name:O.name,value:`'${O.name}', sans-serif`,available:!0},...D])})})})},[]);const z=async()=>{const f=await L0();c(f)},ye=async f=>{var B;const v=(B=f.target.files)==null?void 0:B[0];if(!v)return;const T=v.name.replace(/\.(ttf|otf|woff2?|)$/i,"").trim()||"Custom Font";try{const U=await v.arrayBuffer(),V=new FontFace(T,U);await V.load(),document.fonts.add(V),c(D=>D.some($=>$.name.toLowerCase()===T.toLowerCase())?D:[{name:T,value:`'${T}', sans-serif`,available:!0},...D]);const O=await new Promise((D,Q)=>{const $=new FileReader;$.onload=()=>D($.result),$.onerror=()=>Q(new Error("Failed to read font file")),$.readAsDataURL(v)});let X=!1;try{const D=localStorage.getItem("custom_fonts"),$=(D?JSON.parse(D):[]).filter(Ce=>Ce.name.toLowerCase()!==T.toLowerCase());$.unshift({name:T,dataUrl:O}),localStorage.setItem("custom_fonts",JSON.stringify($.slice(0,20))),X=!0}catch{X=!1}try{const D=indexedDB.open("instantwriter-fonts",1);D.onupgradeneeded=()=>{const Q=D.result;Q.objectStoreNames.contains("fonts")||Q.createObjectStore("fonts",{keyPath:"name"})},D.onsuccess=()=>{D.result.transaction("fonts","readwrite").objectStore("fonts").put({name:T,dataUrl:O})}}catch{}bt(X?`Font loaded: ${T}`:`Font loaded (stored in DB): ${T}`),window.setTimeout(()=>bt(""),2500)}catch{alert("Failed to load font file. Please try a .ttf, .otf, .woff, or .woff2 file.")}finally{f.target.value=""}},[oe,ie]=q.useState([{htmlContent:N0,cssContent:ii,fileName:"untitled_mission.html"}]),[we,fe]=q.useState(0),Be=q.useRef(oe),De=q.useRef(we),W=q.useRef(null),Ee=q.useRef(null),[_e,N]=q.useState({bold:!1,italic:!1,underline:!1,ul:!1,ol:!1,blockType:"p",alignLeft:!1,alignCenter:!1,alignRight:!1,alignJustify:!1,fontName:"sans-serif",fontSize:"16",lineHeight:"normal",letterSpacing:"normal",foreColor:"#000000",borderWidth:"0",borderColor:"#000000",borderRadius:"0",backgroundColor:"#ffffff",padding:"0",borderStyle:"none",textAlign:"left",shape:"none"}),[J,C]=q.useState(null),[w,_]=q.useState(null),[le,be]=q.useState(null),[Le,qe]=q.useState(!1),[k,F]=q.useState([]),[Se,Ne]=q.useState(null),[Y,y]=q.useState(null);q.useEffect(()=>{document.body.classList.remove("text-layer-mode")},[]);const[A,K]=q.useState({brightness:100,contrast:100,width:100,alignment:"center",isCropping:!1}),[se,Oe]=q.useState(null),[H,Ve]=q.useState({color:"#000000",height:2,width:100,alignment:"center",style:"solid"}),[ot,ze]=q.useState(null),[rt,He]=q.useState("letter"),[Ye,Fe]=q.useState({width:"8.5in",height:"11in"}),[at,Xt]=q.useState({top:.5,bottom:.5,left:.375,right:.5}),[kt,zt]=q.useState(!1),[Pe,sn]=q.useState(!1),[Rt,Lt]=q.useState(0),[dt,ln]=q.useState(0),[Dt,Mn]=q.useState(!0),[Zn,gn]=q.useState(!1),[yt,kn]=q.useState(!1),[In,Sn]=q.useState(!1),[Nn,Pt]=q.useState(""),[Ht,bt]=q.useState(""),[Ut,fn]=q.useState([{role:"system",content:"You are a document automation assistant. Respond with JSON only."}]),[Ot,mn]=q.useState(""),[jn,Ln]=q.useState(!1),[On,Cn]=q.useState(!1),[Kn,qn]=q.useState([]),[ml,Je]=q.useState(!1),[Tn,Yn]=q.useState(!1),[xl,yl]=q.useState(100),[zl,xn]=q.useState("single"),[Xn,Pn]=q.useState(!1),[on,Ul]=q.useState({fontSize:11,fontFamily:"inherit",h2Indent:20,h3Indent:40,showLeader:!0,lineHeight:1.6}),Jn=()=>{const f=document.querySelector(".editor-workspace");if(!f)return;const v=f.querySelector(".toc-entry");if(!v)return;const T=window.getComputedStyle(v),B=parseFloat(T.fontSize)||11,U=v.style.fontFamily||"inherit",V=parseFloat(T.lineHeight)/parseFloat(T.fontSize)||1.6,O=f.querySelector('.toc-entry[data-level="h2"]'),X=f.querySelector('.toc-entry[data-level="h3"]'),D=O==null?void 0:O.querySelector("span:first-child"),Q=X==null?void 0:X.querySelector("span:first-child"),$=D&&parseFloat(D.style.paddingLeft)||20,Ce=Q&&parseFloat(Q.style.paddingLeft)||40,Ae=v.children[1],ce=Ae?Ae.style.borderBottom!==""&&Ae.style.borderBottom!=="none":!0;Ul({fontSize:B,fontFamily:U,h2Indent:$,h3Indent:Ce,showLeader:ce,lineHeight:Math.round(V*10)/10}),Pn(!0)},Z=f=>{Ul(f);const v=document.querySelector(".editor-workspace");if(!v)return;v.querySelectorAll(".toc-entry").forEach(B=>{const U=B.getAttribute("data-level")||"h1",V=U==="h2"?f.h2Indent:U==="h3"?f.h3Indent:0,O=U==="h1"?"bold":"normal",X=U==="h3"?"italic":"normal";B.style.fontSize=`${f.fontSize}px`,B.style.lineHeight=String(f.lineHeight),B.style.fontWeight=O,B.style.fontStyle=X,f.fontFamily!=="inherit"?B.style.fontFamily=f.fontFamily:B.style.removeProperty("font-family");const D=B.children[0];D&&(D.style.paddingLeft=`${V}px`);const Q=B.children[1];Q&&(Q.style.borderBottom=f.showLeader?"1px dotted #aaa":"none")})},Ue=()=>{Pn(!1);const f=document.querySelector(".editor-workspace");f&&re({...r,htmlContent:f.innerHTML},!0)},Ie=f=>{const v=Jt.current,T=xl||100;if(!v){yl(f);return}const B=v.getBoundingClientRect(),U=window.getSelection();let V=B.height/2;if(U&&U.rangeCount>0){const D=U.getRangeAt(0);if(v.contains(D.commonAncestorContainer)){const Q=D.getBoundingClientRect();Q.top&&(V=Q.top-B.top)}}const O=v.scrollTop+V,X=f/T;yl(f),requestAnimationFrame(()=>{v.scrollTop=O*X-V})},Jt=q.useRef(null),Kl=q.useRef(!1),ql=q.useRef(new V0),[bl,il]=q.useState({isOpen:!1,actionType:"",matches:[]}),L=q.useRef(r);q.useEffect(()=>{L.current=r},[r]),q.useEffect(()=>{Be.current=oe},[oe]),q.useEffect(()=>{De.current=we},[we]),q.useEffect(()=>{const f=Vx({getContext:()=>{var v;return{fileName:(v=L.current)==null?void 0:v.fileName}}});return()=>{f()}},[]),q.useCallback(f=>{W.current&&clearTimeout(W.current),ie([f]),Be.current=[f],fe(0),De.current=0},[]);const ne=q.useCallback((f,v)=>{ie(T=>{const B=Math.min(De.current,T.length-1),U=T.slice(0,B+1);if(v!=null&&v.skipIfSameHtml){const O=U[U.length-1];if(O&&O.htmlContent===v.skipIfSameHtml)return T}U.push(f),U.length>50&&U.shift();const V=U.length-1;return De.current=V,Be.current=U,fe(V),U})},[]),re=(f,v=!1)=>{h(f),v&&(W.current&&clearTimeout(W.current),ne(f))},he=()=>{const f=De.current;if(f>0){const v=f-1;De.current=v,fe(v);const T=Be.current[v];T&&h(T)}},ee=()=>{const f=De.current,v=Be.current.length-1;if(f<v){const T=f+1;De.current=T,fe(T);const B=Be.current[T];B&&h(B)}};q.useEffect(()=>{const f=v=>{(v.metaKey||v.ctrlKey)&&v.key==="z"&&(v.preventDefault(),v.shiftKey?ee():he()),(v.metaKey||v.ctrlKey)&&v.key==="y"&&(v.preventDefault(),ee())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[we,oe]);const de=f=>{const v=window.getSelection();if(v&&v.rangeCount>0){const B=v.getRangeAt(0).commonAncestorContainer,U=B.nodeType===1?B:B.parentElement;if(U!=null&&U.closest(".floating-text"))return}const T={...r,htmlContent:f};h(T),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{ne(T,{skipIfSameHtml:f})},1e3)},me=f=>{const v=Jt.current,T=v?v.scrollTop:0;re({...r,htmlContent:f},!0),v&&requestAnimationFrame(()=>{v.scrollTop=T})};q.useEffect(()=>{const T=new DOMParser().parseFromString(r.htmlContent,"text/html").querySelectorAll(".page");Lt(T.length||1)},[r.htmlContent]),q.useEffect(()=>{if(Ee.current&&(window.clearTimeout(Ee.current),Ee.current=null),m||!Dt)return;const f=b.current;return Ee.current=window.setTimeout(()=>{if(S.current||b.current!==f)return;const v=document.querySelector(".editor-workspace");if(!v)return;const{entries:T,modifiedHtml:B}=Ux(v);B&&B!==L.current.htmlContent&&re({...L.current,htmlContent:B},!1),x(T)},500),()=>{Ee.current&&(window.clearTimeout(Ee.current),Ee.current=null)}},[r.htmlContent,Dt,m]);const je=async f=>{const v=Array.from(f.target.files||[]);if(v.length===0)return;const T=v.find(B=>B.name.endsWith(".html")||B.name.endsWith(".htm")||B.name.endsWith(".docx"));if(!T){alert("Please select an HTML or DOCX file.");return}if(T.name.endsWith(".docx")){const B=new FileReader;B.onload=U=>{var O;const V=(O=U.target)==null?void 0:O.result;V&&window.mammoth&&window.mammoth.convertToHtml({arrayBuffer:V}).then(X=>{const $={htmlContent:`<div class="page">${X.value}</div>`,cssContent:ii,fileName:T.name};re($,!0)}).catch(X=>{console.error(X),alert("Error converting Word document.")})},B.readAsArrayBuffer(T)}else{const B=new Map,U=v.filter(O=>O.type.startsWith("image/"));await Promise.all(U.map(O=>new Promise(X=>{const D=new FileReader;D.onload=Q=>{var $;($=Q.target)!=null&&$.result&&B.set(O.name,Q.target.result),X()},D.readAsDataURL(O)})));const V=new FileReader;V.onload=O=>{var D;const X=(D=O.target)==null?void 0:D.result;if(X){const $=new DOMParser().parseFromString(X,"text/html"),Ce=$.querySelectorAll("style");let Ae="";Ce.forEach(Me=>{const Re=Me.innerHTML;Ae+=Re+`
`,Me.remove()});const ce=$.querySelectorAll("img");let Xe=0;ce.forEach(Me=>{const Re=Me.getAttribute("src");if(Re){const ct=Re.split(/[\\/]/).pop(),lt=ct?decodeURIComponent(ct):"";lt&&B.has(lt)&&(Me.src=B.get(lt),Xe++)}});let Ge=$.body.innerHTML;const Ze=document.createElement("div");Ze.innerHTML=Ge,Ze.querySelectorAll('[contenteditable="false"]').forEach(Me=>{Me.removeAttribute("contenteditable")}),Ze.querySelectorAll(".page").forEach(Me=>{if(Me.tagName!=="DIV"){const Re=document.createElement("div");Array.from(Me.attributes).forEach(ct=>Re.setAttribute(ct.name,ct.value)),Re.innerHTML=Me.innerHTML,Me.replaceWith(Re),Me=Re}Me.querySelectorAll(":scope > header, :scope > main, :scope > nav, :scope > section:not(.page)").forEach(Re=>{if(!Re.classList.contains("page-footer")){for(;Re.firstChild;)Re.before(Re.firstChild);Re.remove()}})}),Ge=Ze.innerHTML,Ze.querySelector(".page")||(Ge=`<div class="page">${Ge}</div>`);const ve=Ae.replace(/\.page\s*\{[^}]*\}/g,""),Te=ii+`
`+(ve.trim()?ve:""),ge={htmlContent:Ge,cssContent:Te,fileName:T.name};re(ge,!0),U.length>0&&(Xe>0?console.log(`Linked ${Xe} images from selection.`):alert("Images were selected but didn't match the filenames in the HTML. Please ensure filenames (e.g., 'image.png') match exactly."))}},V.readAsText(T)}f.target.value=""},Qe=f=>{Pt(f),f?localStorage.setItem("openai_api_key",f):localStorage.removeItem("openai_api_key"),kn(!1)},nt=()=>{const f=window.getSelection();if(f&&f.rangeCount>0){const v=f.getRangeAt(0).cloneRange();N(T=>({...T,range:v}))}Kl.current=!0,window.setTimeout(()=>{Kl.current=!1},0)},vt=()=>{const f=window.getSelection();let v=null;if(f&&f.rangeCount>0){const U=f.getRangeAt(0).commonAncestorContainer;v=U.nodeType===Node.ELEMENT_NODE?U:U.parentElement}const T=(v==null?void 0:v.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, div:not(.page):not(.editor-workspace), .floating-text"))||le||(J&&J.tagName!=="IMG"?J:null);return{inlineEl:v||T,blockEl:T}},wt=()=>{if(w){const O=window.getComputedStyle(w),X=w.style.width||`${w.offsetWidth}px`,D=w.style.height||`${w.offsetHeight}px`,Q={width:X,height:D,filter:O.filter!=="none"?O.filter:w.style.filter,objectFit:O.objectFit,borderRadius:O.borderRadius,opacity:O.opacity,display:O.display,float:O.float,margin:O.margin};y({type:"image",image:Q});return}const{inlineEl:f,blockEl:v}=vt();if(!f||!v){alert("Select text to copy the style.");return}const T=window.getComputedStyle(f),B=window.getComputedStyle(v),U={"font-family":T.fontFamily,"font-size":T.fontSize,"font-weight":T.fontWeight,"font-style":T.fontStyle,"text-decoration":T.textDecorationLine||T.textDecoration,color:T.color,"letter-spacing":T.letterSpacing,"text-transform":T.textTransform},V={"line-height":B.lineHeight,"text-align":B.textAlign};y({type:"text",inline:U,block:V})},St=(f,v)=>{var B;if(k.length>1)k.forEach(U=>{const V=document.getElementById(U);!V||V.tagName==="IMG"||(Object.entries(v).forEach(([O,X])=>{V.style.setProperty(O,X,"important")}),Object.entries(f).forEach(([O,X])=>{V.style.setProperty(O,X,"important")}))});else{const U=window.getSelection(),V=U&&U.rangeCount>0?U.getRangeAt(0):null,O=V&&!V.collapsed,X=((B=V?V.commonAncestorContainer.nodeType===Node.ELEMENT_NODE?V.commonAncestorContainer:V.commonAncestorContainer.parentElement:null)==null?void 0:B.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, div:not(.page):not(.editor-workspace), .floating-text"))||le||(J&&J.tagName!=="IMG"?J:null);if(X&&Object.entries(v).forEach(([D,Q])=>{X.style.setProperty(D,Q,"important")}),O&&V){const D=document.createElement("span");Object.entries(f).forEach(([$,Ce])=>{D.style.setProperty($,Ce,"important")}),D.appendChild(V.extractContents()),V.insertNode(D),U==null||U.removeAllRanges();const Q=document.createRange();Q.selectNodeContents(D),Q.collapse(!1),U==null||U.addRange(Q)}else X&&Object.entries(f).forEach(([D,Q])=>{X.style.setProperty(D,Q,"important")})}const T=document.querySelector(".editor-workspace");T&&me(T.innerHTML)},gt=f=>{const v=[];if(k.length>1?k.forEach(B=>{const U=document.getElementById(B);U&&U.tagName==="IMG"&&v.push(U)}):w?v.push(w):J&&J.tagName==="IMG"&&v.push(J),v.length===0)return;v.forEach(B=>{Object.entries(f).forEach(([U,V])=>{if(V){if(U==="float"){B.style.float=V;return}B.style.setProperty(U,V,"important")}})});const T=document.querySelector(".editor-workspace");T&&me(T.innerHTML),w&&Tt(w)},it=()=>{if(!Y){alert("Copy a style first.");return}Y.type==="text"?St(Y.inline,Y.block):Y.type==="image"&&gt(Y.image)},mt=f=>{const v=document.querySelector(".editor-workspace");!v||f.length===0||(f.forEach(T=>{T.type==="apply_font"&&T.selector&&T.fontFamily&&v.querySelectorAll(T.selector).forEach(U=>{U.style.setProperty("font-family",T.fontFamily,"important")}),T.type==="set_style"&&T.selector&&T.style&&v.querySelectorAll(T.selector).forEach(U=>{Object.entries(T.style||{}).forEach(([V,O])=>{U.style.setProperty(V,O,"important")})})}),It(v),re({...r,htmlContent:v.innerHTML},!0))},Ft=async()=>{var D,Q,$,Ce;const f=Ot.trim();if(!f||jn)return;if(!Nn){kn(!0);return}const v=document.querySelector(".editor-workspace"),T=v?v.innerText.replace(/\s+/g," ").trim():"",B=T.length>2e3?`${T.slice(0,2e3)}`:T,U=u.map(Ae=>Ae.name).join(", "),V=`You are a document automation assistant for a rich text editor. Return JSON only with keys: assistant_message (string) and actions (array).
Actions supported:
- {"type":"apply_font","selector":"CSS_SELECTOR","fontFamily":"Font Name"}
- {"type":"set_style","selector":"CSS_SELECTOR","style":{"css-property":"value"}}

Available selectors you can use include: .writing-lines, .tracing-line, .mission-box, .shape-rectangle, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, p, h1, h2, h3, li, blockquote, table, td, th.
If the user asks for a handwriting-like font, choose the closest from the available fonts list. If unsure, respond with an assistant_message and no actions.`,O=`User request: ${f}

Available fonts: ${U}

Document snippet:
${B}`;Ln(!0),fn(Ae=>[...Ae,{role:"user",content:f}]);const X=Ae=>{if(!Ae)return null;try{return JSON.parse(Ae)}catch{const Xe=Ae.indexOf("{"),Ge=Ae.lastIndexOf("}");if(Xe>=0&&Ge>Xe){const Ze=Ae.slice(Xe,Ge+1);try{return JSON.parse(Ze)}catch{return null}}return null}};try{const Ae=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Nn}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:V},{role:"user",content:O}],temperature:.2,response_format:{type:"json_object"}})}),ce=await Ae.json();if(!Ae.ok){const Ze=((D=ce==null?void 0:ce.error)==null?void 0:D.message)||"AI request failed.";fn(ve=>[...ve,{role:"assistant",content:`AI error: ${Ze}`}]);return}const Xe=((Ce=($=(Q=ce==null?void 0:ce.choices)==null?void 0:Q[0])==null?void 0:$.message)==null?void 0:Ce.content)||"",Ge=X(Xe);Ge&&(Ge.assistant_message||Ge.actions)?(Ge.actions&&Array.isArray(Ge.actions)&&mt(Ge.actions),fn(Ze=>[...Ze,{role:"assistant",content:Ge.assistant_message||"Done."}])):fn(Ze=>[...Ze,{role:"assistant",content:Xe||"No response."}])}catch{fn(ce=>[...ce,{role:"assistant",content:"AI request failed. Check API key and network."}])}finally{Ln(!1),mn("")}},ke=f=>{var B;const v=(B=f.target.files)==null?void 0:B[0];if(!v)return;const T=new FileReader;T.onload=U=>{var O;const V=(O=U.target)==null?void 0:O.result;if(V)if(w)w.src=V,w.classList.remove("broken-image"),Tt(w);else{const X=document.querySelector(".editor-workspace");X==null||X.focus(),document.execCommand("insertImage",!1,V)}},T.readAsDataURL(v),f.target.value=""},et=()=>{qe(f=>!f)},Ct=(f,v,T)=>{const B=document.querySelector(".editor-workspace");if(!B)return;const U=document.createElement("div");U.className="floating-text",U.contentEditable="true",U.style.position="absolute",U.style.left=`${Math.max(0,v)}px`,U.style.top=`${Math.max(0,T)}px`,U.style.fontSize="16px",U.style.fontFamily="inherit",U.style.zIndex="5",U.style.minWidth="120px",U.style.minHeight="24px",U.style.color="#111",U.style.cursor="text",U.innerHTML="<br>",f.appendChild(U),U.focus();const V=document.createRange();V.selectNodeContents(U),V.collapse(!0);const O=window.getSelection();O==null||O.removeAllRanges(),O==null||O.addRange(V),It(B),re({...r,htmlContent:B.innerHTML},!0),Vt(U)},Tt=f=>{if(w&&w!==f&&w.removeAttribute("data-selected"),f){f.setAttribute("data-selected","true");const v=f.style.filter||"",T=f.style.width||"100%",B=f.style.float,U=f.style.display,V=f.style.margin;let O=100,X=100;const D=v.match(/brightness\s*\(\s*([\d\.]+)(%?)\s*\)/);if(D){let Ae=parseFloat(D[1]);!D[2]&&Ae<=2&&(Ae*=100),O=Math.round(Ae)}const Q=v.match(/contrast\s*\(\s*([\d\.]+)(%?)\s*\)/);if(Q){let Ae=parseFloat(Q[1]);!Q[2]&&Ae<=2&&(Ae*=100),X=Math.round(Ae)}let $=100;T.includes("%")?$=parseInt(T):T.includes("px")&&($=100);let Ce="center";B==="left"?Ce="float-left":B==="right"?Ce="float-right":U==="block"&&V==="0px auto"?Ce="center":Ce="left",K({brightness:O,contrast:X,width:$,alignment:Ce,isCropping:!1})}else K(v=>({...v,isCropping:!1}));_(f),f&&(Oe(null),ze(null),be(null))},Vt=f=>{le&&le!==f&&le.removeAttribute("data-selected"),be(f),f&&(_(null),Oe(null),ze(null))},zn=f=>{f&&F(v=>{f.id||(f.id=`multi-${Date.now()}-${Math.random().toString(36).slice(2,6)}`);const T=f.id,B=v.includes(T),U=B?v.filter(V=>V!==T):[...v,T];return B?f.removeAttribute("data-multi-selected"):f.setAttribute("data-multi-selected","true"),U})},vl=()=>{F(f=>(f.forEach(v=>{const T=document.getElementById(v);T==null||T.removeAttribute("data-multi-selected")}),[]))},Yt=(f,v=0)=>{const T=Array.from(document.querySelectorAll('.editor-workspace [data-multi-selected="true"]')),B=k.length>0?k:T.map(D=>D.id).filter(Boolean);if((B.length||T.length)<2)return;const U=(D,Q)=>{const $=Q.getBoundingClientRect(),Ce=$.width/Q.offsetWidth||1,Ae=$.height/Q.offsetHeight||1,ce=D.getBoundingClientRect();return{x:(ce.left-$.left)/Ce,y:(ce.top-$.top)/Ae,w:ce.width/Ce,h:ce.height/Ae}},V=new Map;let O=B.length>0?B.map(D=>document.getElementById(D)).filter(Boolean):T;O.length===0&&(O=T),O.forEach(D=>{if(!D)return;const Q=D.closest(".page");if(!Q)return;const $=V.get(Q)||[];$.push(D),V.set(Q,$)}),V.forEach((D,Q)=>{if(D.length<2)return;if(D.every(Te=>Te.classList.contains("floating-text"))){const ge=D.map(xt=>{const rn=parseFloat(xt.style.left)||xt.offsetLeft,dn=parseFloat(xt.style.top)||xt.offsetTop,an=xt.offsetWidth,tl=xt.offsetHeight;return{el:xt,left:rn,top:dn,width:an,height:tl,centerX:rn+an/2,centerY:dn+tl/2}}).sort((xt,rn)=>f==="x"?xt.centerX-rn.centerX:xt.centerY-rn.centerY),Me=ge[0],Re=ge[ge.length-1],lt=(f==="x"?Re.centerX-Me.centerX:Re.centerY-Me.centerY)/(ge.length-1)+v;let ft=f==="x"?Me.centerX:Me.centerY;ge.forEach((xt,rn)=>{rn===0&&(ft=f==="x"?xt.centerX:xt.centerY),f==="x"?(xt.el.style.left=`${ft-xt.width/2}px`,xt.el.style.top=`${xt.top}px`,ft+=lt):(xt.el.style.top=`${ft-xt.height/2}px`,xt.el.style.left=`${xt.left}px`,ft+=lt)});return}const Ae=D.map(Te=>{const ge=U(Te,Q);return{el:Te,left:ge.x,top:ge.y,width:ge.w,height:ge.h,centerX:ge.x+ge.w/2,centerY:ge.y+ge.h/2}}).sort((Te,ge)=>f==="x"?Te.centerX-ge.centerX:Te.centerY-ge.centerY),ce=Ae[0],Xe=Ae[Ae.length-1],Ze=(f==="x"?Xe.centerX-ce.centerX:Xe.centerY-ce.centerY)/(Ae.length-1)+v;let ve=f==="x"?ce.centerX:ce.centerY;Ae.forEach((Te,ge)=>{ge===0&&(ve=f==="x"?Te.centerX:Te.centerY),Te.el.parentElement!==Q&&Q.appendChild(Te.el),Te.el.style.position="absolute",Te.el.style.margin="0",Te.el.style.float="none",Te.el.style.display="inline-block",f==="x"?(Te.el.style.left=`${ve-Te.width/2}px`,Te.el.style.top=`${Te.top}px`,ve+=Ze):(Te.el.style.top=`${ve-Te.height/2}px`,Te.el.style.left=`${Te.left}px`,ve+=Ze)})});const X=document.querySelector(".editor-workspace");X&&me(X.innerHTML)},Rn=f=>{Yt(f,0),Ne(f)},el=()=>{Ne(null)},Yl=f=>{const v=Array.from(document.querySelectorAll('.editor-workspace [data-multi-selected="true"]')),T=k.length>0?k:v.map(O=>O.id).filter(Boolean);if((T.length||v.length)<2)return;const B=T.length>0?T.map(O=>document.getElementById(O)).filter(Boolean):v,U=new Map;B.forEach(O=>{const X=O.closest(".page");if(!X)return;const D=U.get(X)||[];D.push(O),U.set(X,D)}),U.forEach((O,X)=>{if(O.length<2)return;const D=X.getBoundingClientRect(),Q=D.width/X.offsetWidth||1,$=D.height/X.offsetHeight||1,Ce=O.map(ve=>{const Te=ve.getBoundingClientRect(),ge=(Te.left-D.left)/Q,Me=(Te.top-D.top)/$,Re=Te.width/Q,ct=Te.height/$;return{el:ve,left:ge,top:Me,width:Re,height:ct,centerX:ge+Re/2,centerY:Me+ct/2,right:ge+Re,bottom:Me+ct}}),Ae=Math.min(...Ce.map(ve=>ve.left)),ce=Math.max(...Ce.map(ve=>ve.right)),Xe=Math.min(...Ce.map(ve=>ve.top)),Ge=Math.max(...Ce.map(ve=>ve.bottom)),Ze=Ce[0];Ce.forEach(ve=>{ve.el.style.position="absolute",ve.el.style.margin="0",ve.el.style.float="none",ve.el.style.display="inline-block",f==="left"?(ve.el.style.left=`${Ae}px`,ve.el.style.top=`${ve.top}px`):f==="center"?(ve.el.style.left=`${Ze.centerX-ve.width/2}px`,ve.el.style.top=`${ve.top}px`):f==="right"?(ve.el.style.left=`${ce-ve.width}px`,ve.el.style.top=`${ve.top}px`):f==="top"?(ve.el.style.top=`${Xe}px`,ve.el.style.left=`${ve.left}px`):f==="middle"?(ve.el.style.top=`${Ze.centerY-ve.height/2}px`,ve.el.style.left=`${ve.left}px`):f==="bottom"&&(ve.el.style.top=`${Ge-ve.height}px`,ve.el.style.left=`${ve.left}px`)})});const V=document.querySelector(".editor-workspace");V&&me(V.innerHTML)},Xl=f=>{const v=document.querySelector(".editor-workspace");if(!v)return;const T=v.querySelectorAll(".page-footer");if(T.forEach(B=>B.style.outline=""),f){T.forEach(V=>V.style.outline="2px dashed #f97316");const B=window.getComputedStyle(f),U=parseFloat(B.fontSize||"12");N(V=>({...V,fontSize:String(Math.round(U)),fontName:B.fontFamily.replace(/['"]/g,""),bold:B.fontWeight==="bold"||parseInt(B.fontWeight)>=700,italic:B.fontStyle==="italic",underline:B.textDecoration.includes("underline"),alignLeft:B.textAlign==="left",alignCenter:B.textAlign==="center",alignRight:B.textAlign==="right",alignJustify:B.textAlign==="justify"}))}ze(f),f&&(_(null),Oe(null))},Ua=()=>{const f=document.querySelector(".editor-workspace");f&&(f.querySelectorAll(".page-footer").forEach(T=>T.remove()),ze(null),re({...r,htmlContent:f.innerHTML},!0))},eo=()=>{const f=_e.range,v=document.querySelector(".editor-workspace");if(!f||!v)return!1;const T=window.getSelection();return!T||!v.contains(f.commonAncestorContainer)?!1:(T.removeAllRanges(),T.addRange(f),!0)},En=f=>{if(k.length===0)return!1;k.forEach(T=>{const B=document.getElementById(T);B&&Object.entries(f).forEach(([U,V])=>{B.style.setProperty(U,V,"important")})});const v=document.querySelector(".editor-workspace");return v&&me(v.innerHTML),!0},di=(f,v)=>{var U,V,O;if(f==="removeSelection"){if(_(null),Oe(null),ot){const X=document.querySelector(".editor-workspace");X==null||X.querySelectorAll(".page-footer").forEach(D=>D.style.outline=""),ze(null)}return}if(f==="deleteFooter"){Ua();return}if(k.length>0){if(f==="fontName"&&v&&En({"font-family":v}))return;if(f==="fontSize"){const X=v||"16",D=X.includes("px")?X:`${X}px`,Q=k.map($=>document.getElementById($)).filter(Boolean).map($=>$.closest(".floating-text, .writing-lines, textarea.writing-lines, p, h1, h2, h3, h4, h5, h6, li, blockquote, div:not(.page):not(.editor-workspace)")).filter(Boolean);if(Q.length>0){Q.forEach(Ce=>Ce.style.setProperty("font-size",D,"important"));const $=document.querySelector(".editor-workspace");$&&me($.innerHTML),N(Ce=>({...Ce,fontSize:X.replace("px","")}));return}}if(f==="foreColor"&&v&&En({color:v})||f==="lineHeight"&&v&&En({"line-height":v}))return;if(f==="letterSpacing"&&v&&En({"letter-spacing":v})){N(X=>({...X,letterSpacing:v||"normal"}));return}if(f==="textTransform"&&v&&En({"text-transform":v}))return;if(f==="bold"){const X=_e.bold?"normal":"bold";if(En({"font-weight":X})){N(D=>({...D,bold:!D.bold}));return}}if(f==="italic"){const X=_e.italic?"normal":"italic";if(En({"font-style":X})){N(D=>({...D,italic:!D.italic}));return}}if(f==="underline"){const X=_e.underline?"none":"underline";if(En({"text-decoration":X})){N(D=>({...D,underline:!D.underline}));return}}if(f==="justifyLeft"&&En({"text-align":"left"})||f==="justifyCenter"&&En({"text-align":"center"})||f==="justifyRight"&&En({"text-align":"right"})||f==="justifyFull"&&En({"text-align":"justify"}))return}if(new Set(["bold","italic","underline","fontName","fontSize","foreColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","textTransform"]).has(f)&&eo(),ot){const X=document.querySelector(".editor-workspace");if(!X)return;X.querySelectorAll(".page-footer").forEach(Q=>{const $=Q;if(f==="fontSize"){const Ce=v||"12";$.style.fontSize=Ce.includes("px")?Ce:`${Ce}px`}else f==="fontName"?$.style.fontFamily=v||"inherit":f==="bold"?$.style.fontWeight=$.style.fontWeight==="bold"?"normal":"bold":f==="italic"?$.style.fontStyle=$.style.fontStyle==="italic"?"normal":"italic":f==="underline"?$.style.textDecoration=$.style.textDecoration.includes("underline")?"none":"underline":f==="justifyLeft"?($.style.textAlign="left",$.style.paddingLeft="0.6in",$.style.paddingRight="0"):f==="justifyCenter"?($.style.textAlign="center",$.style.padding="0"):f==="justifyRight"?($.style.textAlign="right",$.style.paddingRight="0.6in",$.style.paddingLeft="0"):f==="justifyFull"?($.style.textAlign="justify",$.style.paddingLeft="0.6in",$.style.paddingRight="0.6in"):f==="foreColor"?$.style.color=v||"#000000":f==="lineHeight"?$.style.lineHeight=v||"normal":f==="textTransform"&&($.style.textTransform=v||"none")}),re({...r,htmlContent:X.innerHTML},!0);return}if(f==="formatBlock"&&J){const X=J.closest("div[class]:not(.page):not(.editor-workspace)");if(X){const D=X.className.split(" ")[0],Q=document.querySelector(".editor-workspace");if(Q&&D){const $=(v==null?void 0:v.replace(/[<>]/g,""))||"p";Q.querySelectorAll(`div.${D}`).forEach(Ae=>{const ce=document.createElement($);ce.innerHTML=Ae.innerHTML,ce.className=Ae.className;const Xe=Ae.getAttribute("style");Xe&&ce.setAttribute("style",Xe),Ae.replaceWith(ce)}),re({...r,htmlContent:Q.innerHTML},!0);return}}}if(f==="lineHeight"){let X=J;if(X&&!X.isConnected){const D=window.getSelection();if(D&&D.rangeCount>0){const Q=D.getRangeAt(0).commonAncestorContainer,$=Q.nodeType===1?Q:Q.parentElement;X=$==null?void 0:$.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), li, blockquote")}}if(!X){const D=window.getSelection();if(D&&D.rangeCount>0){const Q=D.getRangeAt(0).commonAncestorContainer,$=Q.nodeType===1?Q:Q.parentElement;X=$==null?void 0:$.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), li, blockquote")}}if(X){X.style.lineHeight=v||"normal";const D=window.getSelection();if(D&&!D.isCollapsed){const $=D.getRangeAt(0),Ce=document.createElement("div");if(Ce.appendChild($.cloneContents()),Ce.querySelectorAll("p, h1, h2, h3, h4, h5, h6, div, li, blockquote").length>0){let ce=X;const Xe=(V=(U=D.focusNode)==null?void 0:U.parentElement)==null?void 0:V.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page), li, blockquote");let Ge=0;for(;ce&&Ge<50&&(ce.style.lineHeight=v||"normal",!(ce===Xe||!ce.nextElementSibling));)ce=ce.nextElementSibling,Ge++}}const Q=document.querySelector(".editor-workspace");Q&&re({...r,htmlContent:Q.innerHTML},!0)}return}if(f==="fontSize"){const X=v||"16",D=X.includes("px")?X:`${X}px`,Q=window.getSelection();let $=Q&&Q.rangeCount>0?Q.getRangeAt(0):null;(!$||$.collapsed)&&_e.range&&($=_e.range);const Ce=document.querySelector(".editor-workspace");$&&Ce&&!Ce.contains($.commonAncestorContainer)&&($=null);const Ae=((O=$?$.commonAncestorContainer.nodeType===Node.ELEMENT_NODE?$.commonAncestorContainer:$.commonAncestorContainer.parentElement:null)==null?void 0:O.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, .floating-text, .writing-lines, textarea.writing-lines, div:not(.page):not(.editor-workspace)"))||le||(J&&J.tagName!=="IMG"?J:null);if($&&!$.collapsed){const ce=document.createElement("span");ce.style.fontSize=D,ce.appendChild($.extractContents()),$.insertNode(ce),Q==null||Q.removeAllRanges();const Xe=document.createRange();Xe.selectNodeContents(ce),Q==null||Q.addRange(Xe)}else Ae&&(Ae.style.fontSize=D);N(ce=>({...ce,fontSize:X.replace("px","")})),Ce&&me(Ce.innerHTML);return}if(f==="letterSpacing"){eo();const X=window.getSelection(),D=document.querySelector(".editor-workspace");if(X&&X.rangeCount>0&&!X.isCollapsed){const $=X.getRangeAt(0);if(D&&!D.contains($.commonAncestorContainer))return;const Ce=document.createElement("span");Ce.style.letterSpacing=v||"normal",Ce.appendChild($.extractContents()),$.insertNode(Ce),X.removeAllRanges();const Ae=document.createRange();Ae.selectNodeContents(Ce),X.addRange(Ae),D&&me(D.innerHTML),N(ce=>({...ce,letterSpacing:v||"normal"}));return}let Q=J;if(Q&&!Q.isConnected){const $=window.getSelection();if($&&$.rangeCount>0){const Ce=$.getRangeAt(0).commonAncestorContainer,Ae=Ce.nodeType===1?Ce:Ce.parentElement;Q=Ae==null?void 0:Ae.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), li, blockquote")}}if(!Q){const $=window.getSelection();if($&&$.rangeCount>0){const Ce=$.getRangeAt(0).commonAncestorContainer,Ae=Ce.nodeType===1?Ce:Ce.parentElement;Q=Ae==null?void 0:Ae.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), li, blockquote")}}Q&&(Q.style.letterSpacing=v||"normal",N($=>({...$,letterSpacing:v||"normal"})),D&&me(D.innerHTML));return}if(f==="textTransform"){const X=window.getSelection();if(X&&X.rangeCount>0){const Q=X.getRangeAt(0).commonAncestorContainer,$=Q.nodeType===1?Q:Q.parentElement,Ce=$==null?void 0:$.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, .floating-text, .writing-lines, textarea.writing-lines, div:not(.page):not(.editor-workspace)");if(Ce){Ce.style.textTransform=v||"none";const Ae=document.querySelector(".editor-workspace");Ae&&me(Ae.innerHTML);return}}return}document.execCommand(f,!1,v);const B=document.querySelector(".editor-workspace");B==null||B.focus()},Fo=f=>{const v=document.querySelector(".editor-workspace"),T=J==null?void 0:J.closest("h1, h2, h3, h4, h5, h6, p, blockquote, div[class]:not(.page):not(.editor-workspace)"),B=["h1","h2","h3"],U=()=>{if(!se)return null;let Te=se.previousElementSibling;for(;Te&&Te.tagName==="BR";)Te=Te.previousElementSibling;const ge=Te==null?void 0:Te.tagName.toLowerCase();return ge&&B.includes(ge)?ge:null},V=(f==null?void 0:f.toLowerCase())||(T==null?void 0:T.nodeName.toLowerCase())||U(),O=V&&B.includes(V)?V:null;if(!V){alert("Select text inside a paragraph or heading first.");return}let X=!1;const D=(Te,ge)=>{if(!v)return!1;const Me=["shape-circle","shape-pill","shape-speech","shape-cloud","shape-rectangle"],Re=Me.find(dn=>ge.classList.contains(dn)),ct=ge.style.getPropertyValue("--shape-border"),lt=ge.style.getPropertyValue("--shape-bg"),ft=window.getComputedStyle(ge),xt=Array.from(v.querySelectorAll(Te));let rn=!1;return xt.forEach(dn=>{let an=dn.querySelector(".mission-box, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, .shape-rectangle");if(!an){for(an=document.createElement("span");dn.firstChild;)an.appendChild(dn.firstChild);dn.appendChild(an)}an.classList.remove("mission-box",...Me),an.classList.add("mission-box"),Re&&an.classList.add(Re),["borderColor","backgroundColor","borderWidth","borderStyle","padding","borderRadius","width","maxWidth"].forEach(Gn=>{const nl=ge.style[Gn];if(nl){an.style[Gn]=nl;return}const Wn=ft[Gn];Wn&&Wn!=="none"&&Wn!=="auto"&&(an.style[Gn]=Wn)}),ct&&an.style.setProperty("--shape-border",ct),lt&&an.style.setProperty("--shape-bg",lt),rn=!0}),rn},Q=(Te,ge)=>{if(!v)return!1;const Me=Array.from(v.querySelectorAll(Te));let Re=!1;return Me.forEach(ct=>{var xt;let lt=ct.nextElementSibling;for(;lt&&lt.tagName==="BR";)lt=lt.nextElementSibling;let ft;lt&&lt.tagName==="HR"?ft=lt:(ft=document.createElement("hr"),(xt=ct.parentNode)==null||xt.insertBefore(ft,ct.nextSibling)),ft.style.cssText=ge.style.cssText,ft.removeAttribute("data-selected"),Re=!0}),Re};if(O){const Te=J==null?void 0:J.closest(".mission-box, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, .shape-rectangle");Te&&(X=D(O,Te)||X),se&&(X=Q(O,se)||X)}if(!T){X&&v&&re({...r,htmlContent:v.innerHTML},!0),alert(`Updated style for ${V}. All matching elements will now use this style.`);return}const $=window.getComputedStyle(T),Ce=_e.foreColor||$.color,Ae=_e.fontName||$.fontFamily,ce=_e.bold?"bold":$.fontWeight,Xe=_e.italic?"italic":$.fontStyle,Ge=_e.underline?"underline":$.textDecoration,Ze=`
 ${V} {
    font-family: ${Ae} !important;
    font-size: ${$.fontSize} !important;
    color: ${Ce} !important;
    font-weight: ${ce} !important;
    text-align: ${$.textAlign} !important;
    font-style: ${Xe} !important;
    text-decoration: ${Ge} !important;
    margin-top: ${$.marginTop} !important;
    margin-bottom: ${$.marginBottom} !important;
    line-height: ${$.lineHeight} !important;
 }
 `,ve=X&&v?v.innerHTML:r.htmlContent;re({...r,htmlContent:ve,cssContent:r.cssContent+`
`+Ze},!0),alert(`Updated style for ${V}. All matching elements will now use this style.`)},Io=f=>{if(f.shape){let D=_e.range;const Q=window.getSelection();Q&&Q.rangeCount>0&&!Q.isCollapsed&&(D=Q.getRangeAt(0));let $=null;if(D){const ce=D.commonAncestorContainer,Xe=ce.nodeType===1?ce:ce.parentElement;$=Xe==null?void 0:Xe.closest(".mission-box, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, .shape-rectangle")}if($){const ce=$;ce.classList.remove("shape-circle","shape-pill","shape-speech","shape-cloud","mission-box","shape-rectangle"),ce.classList.add("mission-box"),f.shape!=="none"&&ce.classList.add(`shape-${f.shape}`),f.borderColor&&(ce.style.borderColor=f.borderColor,ce.style.setProperty("--shape-border",f.borderColor)),f.backgroundColor&&(ce.style.backgroundColor=f.backgroundColor,ce.style.setProperty("--shape-bg",f.backgroundColor)),f.borderWidth&&(ce.style.borderWidth=f.borderWidth),f.borderStyle&&(ce.style.borderStyle=f.borderStyle);const Xe=document.querySelector(".editor-workspace");Xe&&re({...r,htmlContent:Xe.innerHTML},!0);return}const Ce=document.querySelector(".editor-workspace");if(D&&!D.collapsed&&(document.contains(D.commonAncestorContainer)||Ce&&Ce.contains(D.commonAncestorContainer))){const ce=D.extractContents(),Xe=Te=>{const ge=Te.parentNode;if(!ge)return;if(Te.hasAttribute("style")){const Re=document.createElement("span");for(Re.setAttribute("style",Te.getAttribute("style"));Te.firstChild;)Re.appendChild(Te.firstChild);Te.appendChild(Re)}const Me=/^(P|DIV|H[1-6]|LI|BLOCKQUOTE)$/.test(Te.tagName);for(;Te.firstChild;)ge.insertBefore(Te.firstChild,Te);Me&&Te.nextSibling&&ge.insertBefore(document.createElement("br"),Te),ge.removeChild(Te)};ce.querySelectorAll(".mission-box").forEach(Te=>Xe(Te)),ce.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, li, blockquote").forEach(Te=>Xe(Te));const Ge=document.createElement("span"),Ze=f.shape==="none"?"":` shape-${f.shape}`;Ge.className=`mission-box${Ze}`,f.borderColor&&(Ge.style.borderColor=f.borderColor,Ge.style.setProperty("--shape-border",f.borderColor)),f.backgroundColor&&(Ge.style.backgroundColor=f.backgroundColor,Ge.style.setProperty("--shape-bg",f.backgroundColor)),f.borderWidth&&(Ge.style.borderWidth=f.borderWidth),f.borderStyle&&(Ge.style.borderStyle=f.borderStyle),Ge.appendChild(ce),D.insertNode(Ge),Q&&Q.removeAllRanges();const ve=document.querySelector(".editor-workspace");ve&&re({...r,htmlContent:ve.innerHTML},!0);return}}let v=J;if(v&&!v.isConnected){const D=window.getSelection();if(D&&D.rangeCount>0){const Q=D.getRangeAt(0).commonAncestorContainer,$=Q.nodeType===1?Q:Q.parentElement,Ce=$==null?void 0:$.closest("p, h1, h2, h3, h4, h5, h6, div:not(.page):not(.editor-workspace), blockquote, li, span.mission-box, span.shape-circle, span.shape-pill, span.shape-speech, span.shape-cloud, span.shape-rectangle");Ce&&(v=Ce,C(v))}}if(!v)return;const T=".mission-box, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, .shape-rectangle",B={...f},U=B.textAlign?v.matches(T)?v:v.closest(T):null;if(U&&(B.textAlign==="left"||B.textAlign==="center"||B.textAlign==="right")){(!U.style.width||U.style.width==="100%")&&(U.style.width="fit-content"),U.style.display="block",U.style.marginLeft="",U.style.marginRight="",B.textAlign==="left"?(U.style.setProperty("margin-left","0","important"),U.style.setProperty("margin-right","auto","important")):B.textAlign==="center"?(U.style.setProperty("margin-left","auto","important"),U.style.setProperty("margin-right","auto","important")):B.textAlign==="right"&&(U.style.setProperty("margin-left","auto","important"),U.style.setProperty("margin-right","0","important")),N(Q=>({...Q,textAlign:B.textAlign}));const D=document.querySelector(".editor-workspace");D&&re({...r,htmlContent:D.innerHTML},!0),delete B.textAlign}if(Object.keys(B).length===0)return;const V=B.shape||B.borderColor||B.backgroundColor||B.borderWidth||B.borderStyle||B.padding;let O=v,X=v.matches(T);if(V&&!X){const D=v.closest(T);D&&(O=D,X=!0)}V&&!X&&!B.textAlign&&!B.blockType&&!B.fontSize&&!B.fontName||(Object.entries(B).forEach(([D,Q])=>{if(D==="shape")O.classList.remove("shape-circle","shape-pill","shape-speech","shape-cloud","shape-rectangle"),Q!=="none"&&(O.style.borderRadius="",O.classList.add(`shape-${Q}`));else if(D==="padding")O.style.padding=Q;else if(D==="borderColor")O.style.borderColor=Q,O.style.setProperty("--shape-border",Q);else if(D==="backgroundColor")O.style.backgroundColor=Q,O.style.setProperty("--shape-bg",Q);else if(D==="borderWidth"){if(O.style.borderWidth=Q,parseInt(Q)>0){const $=window.getComputedStyle(O);(!$.borderStyle||$.borderStyle==="none")&&(O.style.borderStyle="solid")}}else D==="width"?(O.style.width=Q,O.style.maxWidth="100%"):O.style[D]=Q}),N(D=>({...D,...f})),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{const D=document.querySelector(".editor-workspace");if(D){const Q={...r,htmlContent:D.innerHTML};re(Q,!0)}},500))},cs=()=>{const f=document.querySelector(".editor-workspace");f==null||f.focus(),document.execCommand("insertHTML",!1,'<hr style="width: 100%; border-top: 2px solid #000; border-bottom: none; border-left: none; border-right: none; height: 0px; background-color: transparent; margin: 20px auto;" />')},Po=()=>{var Q,$;const f=window.getSelection();if(!f||f.rangeCount===0)return;const v=f.getRangeAt(0),T=v.startContainer.nodeType===1?v.startContainer:v.startContainer.parentElement,B=T==null?void 0:T.closest(".page");if(!B)return;const U=document.createElement("div");U.className="page",U.setAttribute("data-page-break","true");const V=document.createElement("span");V.id="page-break-marker-"+Date.now(),v.collapse(!0),v.insertNode(V);let O=V;for(;O&&O.parentElement!==B;)O=O.parentElement;if(O&&O.parentElement===B){const Ce=(()=>{var Xe;let ce=V;for(;ce&&ce!==O;){if(ce.previousSibling){const Ge=ce.previousSibling;if(Ge.nodeType===Node.TEXT_NODE&&!((Xe=Ge.textContent)!=null&&Xe.trim())){ce=Ge;continue}return!1}ce=ce.parentElement}return!0})(),Ae=(()=>{var Xe;let ce=V;for(;ce&&ce!==O;){if(ce.nextSibling){const Ge=ce.nextSibling;if(Ge.nodeType===Node.TEXT_NODE&&!((Xe=Ge.textContent)!=null&&Xe.trim())){ce=Ge;continue}return!1}ce=ce.parentElement}return!0})();if(Ce){let ce=O;const Xe=[];for(;ce;){const Ge=ce.nextSibling;ce!==V&&!(ce instanceof HTMLElement&&ce.classList.contains("page-footer"))&&Xe.push(ce),ce=Ge}Xe.forEach(Ge=>U.appendChild(Ge))}else if(Ae){let ce=O.nextSibling;const Xe=[];for(;ce;)ce instanceof HTMLElement&&ce.classList.contains("page-footer")||Xe.push(ce),ce=ce.nextSibling;Xe.forEach(Ge=>U.appendChild(Ge))}else{const ce=O.cloneNode(!1);ce.id&&(ce.id="");let Xe=!1;const Ge=Array.from(O.childNodes);for(const Ze of Ge){if(Ze===V){Xe=!0;continue}Xe&&ce.appendChild(Ze)}if(ce.hasChildNodes()){U.appendChild(ce);let Ze=O.nextSibling;const ve=[];for(;Ze;)Ze instanceof HTMLElement&&Ze.classList.contains("page-footer")||ve.push(Ze),Ze=Ze.nextSibling;ve.forEach(Te=>U.appendChild(Te))}else{const Ze=T==null?void 0:T.closest("p, h1, h2, h3, h4, h5, h6, li, blockquote, div:not(.page)");if(Ze&&Ze!==O&&O.contains(Ze)){const ve=Ze.cloneNode(!1);ve.id&&(ve.id="");let Te=!1;const ge=Array.from(Ze.childNodes);for(const Me of ge){if(Me===V){Te=!0;continue}Te&&ve.appendChild(Me)}if(ve.hasChildNodes()){let Me=Ze.nextSibling;const Re=[];for(;Me;)Me instanceof HTMLElement&&Me.classList.contains("page-footer")||Re.push(Me),Me=Me.nextSibling;const ct=O.cloneNode(!1);ct.id&&(ct.id=""),ct.appendChild(ve),Re.forEach(xt=>ct.appendChild(xt)),U.appendChild(ct);let lt=O.nextSibling;const ft=[];for(;lt;)lt instanceof HTMLElement&&lt.classList.contains("page-footer")||ft.push(lt),lt=lt.nextSibling;ft.forEach(xt=>U.appendChild(xt))}}}}(Q=B.parentNode)==null||Q.insertBefore(U,B.nextSibling),V.remove()}else($=B.parentNode)==null||$.insertBefore(U,B.nextSibling),V.remove();const X=document.createRange();U.firstChild?X.setStart(U.firstChild,0):X.setStart(U,0),X.collapse(!0),f.removeAllRanges(),f.addRange(X);const D=document.querySelector(".editor-workspace");D&&(It(D),re({...r,htmlContent:D.innerHTML},!0))},hi=f=>{const v=document.querySelector(".editor-workspace");if(!v)return;const T=v.querySelectorAll(".page"),B=[],U=[];if(f.includeH1&&U.push("h1"),f.includeH2&&U.push("h2"),f.includeH3&&U.push("h3"),U.length===0){alert("Please select at least one heading level.");return}const V=U.join(", ");if(T.forEach((Q,$)=>{Q.querySelectorAll(V).forEach((Ae,ce)=>{Ae.id||(Ae.id=`toc-${$}-${ce}-${Date.now()}`),B.push({id:Ae.id,text:Ae.textContent||"Untitled Section",page:$+1,level:Ae.tagName.toLowerCase()})})}),B.length===0){alert("No matching headings found."),gn(!1);return}let O="";B.forEach(Q=>{const $=Q.level,Ce=$==="h2"?f.h2Indent:$==="h3"?f.h3Indent:0,Ae=$==="h1"?"bold":"normal",ce=$==="h3"?"italic":"normal",Xe=f.fontFamily==="inherit"?"":`font-family:${f.fontFamily};`,Ge=`display:flex;align-items:baseline;width:100%;white-space:nowrap;overflow:hidden;margin:0;padding:1px 0;line-height:${f.lineHeight};font-size:${f.fontSize}px;font-weight:${Ae};font-style:${ce};${Xe}`,Ze=`flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:${Ce}px`,ve=`flex:1 1 auto;min-width:20px;height:0;margin:0 4px;${f.showLeader?"border-bottom:1px dotted #aaa":""}`;O+=`<div class="toc-entry" data-level="${$}" style="${Ge}"><span style="${Ze}"><a href="#${Q.id}" style="color:inherit;text-decoration:none" onclick="const el = document.getElementById('${Q.id}'); if(el) { el.scrollIntoView({behavior: 'smooth', block: 'start'}); } return false;">${Q.text}</a></span><span style="${ve}"></span><span style="flex-shrink:0;min-width:2ch;text-align:right;font-variant-numeric:tabular-nums">${Q.page}</span></div>`});const X=_e.range;if(X&&v.contains(X.commonAncestorContainer)){const Q=window.getSelection();Q&&(Q.removeAllRanges(),Q.addRange(X),document.execCommand("insertHTML",!1,O))}else{const Q=v.querySelector(".page");if(Q){const $=document.createElement("div");$.innerHTML=O;const Ce=document.createDocumentFragment();for(;$.firstChild;)Ce.appendChild($.firstChild);Q.insertBefore(Ce,Q.firstChild)}}const D=document.querySelector(".editor-workspace");D&&re({...r,htmlContent:D.innerHTML},!0),gn(!1)},us=()=>{const f=document.querySelector(".editor-workspace");if(!f){qn([]);return}const v=f.querySelectorAll("h1, h2, h3, h4, h5, h6"),T=[];T.push({id:"DOC_START",text:"Start of Document",tagName:"DOC_START"}),v.forEach((B,U)=>{B.id||(B.id=`anchor-${U}-${Date.now()}`),T.push({id:B.id,text:B.textContent||"Untitled Section",tagName:B.tagName.toLowerCase()})}),qn(T),Cn(!0)},wl=(f,v,T,B,U,V)=>{const O=document.querySelector(".editor-workspace");if(!O)return;const X=O.querySelectorAll(".page");let D=0;if(f!=="DOC_START"){const Ze=document.getElementById(f);if(Ze){const ve=Ze.closest(".page");if(ve){for(let Te=0;Te<X.length;Te++)if(X[Te]===ve){D=Te;break}}}}const Q=Number.parseFloat(T),Ce=(Number.isFinite(Q)?Q:12)*1.2/72,Ae=at.bottom-V,ce=at.top-V,Xe=B==="bottom"?Math.max(0,Ce-Ae):0,Ge=B==="top"?Math.max(0,Ce-ce):0;return O.style.setProperty("--footer-reserve",`${Xe}in`),O.style.setProperty("--header-reserve",`${Ge}in`),X.forEach((Ze,ve)=>{const Te=Ze.querySelector(".page-footer");if(Te&&Te.remove(),ve>=D){const ge=document.createElement("div");ge.className="page-footer",ge.style.fontFamily=v,ge.style.fontSize=`${T}pt`,ge.style.textAlign=U,ge.style.position="absolute",ge.style.left="0",ge.style.width="100%",ge.style.pointerEvents="none",ge.style.zIndex="10",B==="top"?(ge.style.top=`${V}in`,ge.style.bottom="auto"):(ge.style.bottom=`${V}in`,ge.style.top="auto"),U==="left"?(ge.style.paddingLeft="0.6in",ge.style.paddingRight="0"):U==="right"?(ge.style.paddingRight="0.6in",ge.style.paddingLeft="0"):ge.style.padding="0",ge.textContent=(ve-D+1).toString(),ge.setAttribute("contenteditable","false"),Ze.appendChild(ge)}}),O.innerHTML},to=(f,v,T,B,U,V)=>{const O=wl(f,v,T,B,U,V);O&&h(X=>({...X,htmlContent:O}))},no=(f,v,T,B,U,V)=>{const O=wl(f,v,T,B,U,V);O&&re({...r,htmlContent:O},!0),Cn(!1)},Rl=(f,v,T)=>{const V=`
/* INSTANTWRITER_LAYOUT_OVERRIDE_START */
@page {
    size: ${f} ${v};
    margin: 0; /* Use padding on .page instead for better control */
}
.page {
    width: ${f} !important;
    height: ${v} !important;
    padding: calc(${T.top}in + var(--header-reserve, 0in)) ${T.right}in calc(${T.bottom}in + var(--footer-reserve, 0in)) ${T.left}in !important;
    overflow: hidden !important;
}
/* INSTANTWRITER_LAYOUT_OVERRIDE_END */
`;let O=r.cssContent;const X=new RegExp("\\/\\* INSTANTWRITER_LAYOUT_OVERRIDE_START \\*\\/[\\s\\S]*?\\/\\* INSTANTWRITER_LAYOUT_OVERRIDE_END \\*\\/","g");X.test(O)?O=O.replace(X,V.trim()):O=O+`
`+V.trim(),re({...r,cssContent:O},!0)},ha=f=>{He(f);const v=Object.values(is).find(T=>T.id===f);v&&(Xt(v.margins),f==="custom"?Rl(Ye.width,Ye.height,v.margins):Rl(v.width,v.height,v.margins))},er=(f,v)=>{Fe({width:f,height:v}),rt==="custom"&&Rl(f,v,at)},fs=(f,v)=>{const T={...at,[f]:v};Xt(T);const B=Object.values(is).find(O=>O.id===rt),U=rt==="custom"?Ye.width:(B==null?void 0:B.width)||"8.5in",V=rt==="custom"?Ye.height:(B==null?void 0:B.height)||"11in";Rl(U,V,T)},tr=f=>{if(se&&se!==f&&se.removeAttribute("data-selected"),f){f.setAttribute("data-selected","true");const v=window.getComputedStyle(f);let T="solid";v.borderTopStyle!=="none"&&v.borderTopStyle!=="hidden"&&v.borderTopStyle!=="inset"&&(T=v.borderTopStyle),f.style.background&&f.style.background.includes("gradient")&&(T="tapered");let B=100;f.style.width.includes("%")&&(B=parseInt(f.style.width));let U="center";f.style.marginLeft==="0px"&&(f.style.marginRight==="auto"||f.style.marginRight!=="0px")?U="left":f.style.marginLeft==="auto"&&f.style.marginRight==="0px"?U="right":U="center";let V="#000000";if(T!=="tapered"){const X=v.borderTopColor;if(X.startsWith("rgb")){const D=X.match(/\d+/g);D&&D.length>=3&&(V="#"+parseInt(D[0]).toString(16).padStart(2,"0")+parseInt(D[1]).toString(16).padStart(2,"0")+parseInt(D[2]).toString(16).padStart(2,"0"))}else X.startsWith("#")&&(V=X)}let O=2;if(T==="tapered"){const X=parseInt(f.style.height);isNaN(X)||(O=X)}else{const X=parseInt(v.borderTopWidth);!isNaN(X)&&X>0&&(O=X)}Ve({color:V,height:O,width:B,alignment:U,style:T})}Oe(f)},qa=(f,v)=>{if(!se)return;const T={...H,[f]:v};Ve(T),(f==="width"||f==="alignment")&&(se.style.width=`${T.width}%`,T.alignment==="left"?(se.style.marginLeft="0",se.style.marginRight="auto"):T.alignment==="right"?(se.style.marginLeft="auto",se.style.marginRight="0"):(se.style.marginLeft="auto",se.style.marginRight="auto")),se.style.borderRadius="0",se.style.opacity="1",se.style.border="none",se.style.background="none",T.style==="tapered"?(se.style.height=`${T.height}px`,se.style.background=`radial-gradient(ellipse at center, ${T.color} 0%, transparent 80%)`,se.style.borderRadius="4px",se.style.border="none"):(se.style.height="0px",se.style.borderTopWidth=`${T.height}px`,se.style.borderTopStyle=T.style,se.style.borderTopColor=T.color,se.style.backgroundColor="transparent"),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{const B=document.querySelector(".editor-workspace");if(B){const U={...r,htmlContent:B.innerHTML};re(U,!0)}},500)},Dl=()=>{w&&K(f=>({...f,isCropping:!f.isCropping}))},lo=(f,v,T)=>{if(w){w.src=f,w.style.width=`${v}px`,w.style.height=`${T}px`,w.style.maxWidth="none",K(U=>({...U,isCropping:!1}));const B=document.querySelector(".editor-workspace");B&&re({...r,htmlContent:B.innerHTML},!0)}},Ya=()=>{K(f=>({...f,isCropping:!1}))},Ol=(f,v,T,B)=>{if(v==="brightness"||v==="contrast"){const U=`brightness(${B.brightness}%) contrast(${B.contrast}%)`;f.style.filter=U}if(v==="width"&&(f.style.width=`${T}%`),v==="alignment")switch(f.style.float="none",f.style.display="inline-block",f.style.margin="0",T){case"center":f.style.display="block",f.style.margin="0 auto";break;case"left":f.style.display="inline-block";break;case"right":f.style.display="block",f.style.marginLeft="auto";break;case"float-left":f.style.float="left",f.style.marginRight="15px",f.style.marginBottom="10px";break;case"float-right":f.style.float="right",f.style.marginLeft="15px",f.style.marginBottom="10px";break}},ao=(f,v,T,B,U)=>{ql.current.recordAction(f,v,T,String(B));const V=ql.current.detectPattern();if(V){const O=document.querySelector(".editor-workspace");if(O){const X=Wo(v),D=Tu(X,v,O);D.length>0&&il({isOpen:!0,actionType:V.actionType,matches:D,applyStyle:Q=>{Ol(Q,T,B,U)}})}}},ds=(f,v)=>{if(!w)return;const T={...A,[f]:v};K(T),Ol(w,f,v,T);const U={width:"imageWidth",alignment:"imageAlign",brightness:"imageBrightness",contrast:"imageContrast"}[f]||"imageStyle";ao(U,w,f,v,T),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{const V=document.querySelector(".editor-workspace");if(V){const O={...r,htmlContent:V.innerHTML};re(O,!0)}},500)},nr=f=>{const{applyStyle:v}=bl;f.forEach(B=>{const U=document.getElementById(B);U&&v&&v(U)});const T=document.querySelector(".editor-workspace");T&&(It(T),re({...r,htmlContent:T.innerHTML},!0)),ql.current.clear(),il({isOpen:!1,actionType:"",matches:[]})},hs=()=>{ql.current.clear(),il({isOpen:!1,actionType:"",matches:[]})},ps=f=>{const v=document.createElement("div");v.innerHTML=r.htmlContent,v.querySelectorAll("[data-selected]").forEach(X=>X.removeAttribute("data-selected")),v.querySelectorAll("[data-structure-status]").forEach(X=>X.removeAttribute("data-structure-status"));const T=v,B=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${f}</title>
    <style>
${r.cssContent}
    </style>
</head>
<body>
${T.innerHTML}
</body>
</html>`,U=new Blob([B],{type:"text/html"}),V=URL.createObjectURL(U),O=document.createElement("a");O.href=V,O.download=`${f}.html`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(V)},lr=()=>{Zx()},$n=()=>{Qx()},Jl=async f=>{var Ze;const v=document.createElement("div");v.innerHTML=r.htmlContent,v.querySelectorAll("[data-selected]").forEach(ve=>ve.removeAttribute("data-selected")),v.querySelectorAll("[data-multi-selected]").forEach(ve=>ve.removeAttribute("data-multi-selected")),v.querySelectorAll("[data-structure-status]").forEach(ve=>ve.removeAttribute("data-structure-status")),v.querySelectorAll(".image-overlay, .resize-handle, .drag-handle, .text-mode-badge, .marquee, .context-menu, .page-ruler, .margin-guides").forEach(ve=>ve.remove());const B=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map(ve=>ve.getAttribute("href")).filter(ve=>!!ve&&ve.includes("fonts.googleapis.com")).map(ve=>`<link rel="stylesheet" href="${ve}">`).join(`
`);let U="";try{const ve=localStorage.getItem("custom_fonts");ve&&(U=JSON.parse(ve).map(ge=>`@font-face { font-family: '${ge.name.replace(/'/g,"\\'")}'; src: url("${ge.dataUrl}"); font-display: swap; }`).join(`
`))}catch{U=""}const V=document.createElement("iframe");V.style.position="fixed",V.style.right="0",V.style.bottom="0",V.style.width="0",V.style.height="0",V.style.border="0",V.style.opacity="0",V.style.pointerEvents="none",document.body.appendChild(V);const O=(Ze=V.contentWindow)==null?void 0:Ze.document;if(!O||!V.contentWindow){V.remove(),alert("Unable to prepare PDF print frame.");return}const X=`
@media print {
  @page { margin: 0; }
  html, body { margin: 0; padding: 0; background: white; }
  .page {
    margin: 0 auto !important;
    box-shadow: none !important;
    page-break-after: always;
    page-break-inside: avoid;
    break-after: page;
  }
  .page:last-child { page-break-after: auto; break-after: auto; }
  * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }
}
    `,D=document.baseURI||window.location.href,Q=document.querySelector("svg > defs"),$=Q?`<svg width="0" height="0" style="position:absolute">${Q.outerHTML}</svg>`:"",Ce=r.cssContent.replace(/\.editor-workspace\s+/g,"");O.open(),O.write(`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="${D}">
  <title>${f}</title>
  ${B}
  <style>
${U}
${Ce}
${X}
  </style>
</head>
<body>
${$}
${v.innerHTML}
</body>
</html>
    `),O.close();const Ae=()=>{const ve=Array.from(O.images);return ve.length===0?Promise.resolve():Promise.all(ve.map(Te=>Te.complete?Promise.resolve():new Promise(ge=>{const Me=()=>{Te.removeEventListener("load",Me),Te.removeEventListener("error",Me),ge()};Te.addEventListener("load",Me),Te.addEventListener("error",Me)})))},ce=new Promise(ve=>{O.readyState==="complete"?ve():V.onload=()=>ve()}),Xe=O.fonts&&O.fonts.ready?O.fonts.ready:Promise.resolve();await Promise.all([ce,Xe,Ae()]);const Ge=()=>{var ve,Te;try{(ve=V.contentWindow)==null||ve.focus(),(Te=V.contentWindow)==null||Te.print()}finally{window.setTimeout(()=>V.remove(),1e3)}};requestAnimationFrame(()=>{window.setTimeout(Ge,100)})},gs=async f=>{if(!window.html2canvas||!window.htmlDocx){alert("DOCX export requires html2canvas and html-docx-js to be loaded.");return}const v=document.querySelector(".editor-workspace");if(!v){alert("No editor content found.");return}document.fonts&&document.fonts.ready&&await document.fonts.ready;const T=ge=>{const Me=parseFloat(ge);return isNaN(Me)?ge:`${Math.round(Me*.75)}pt`},B=async ge=>{try{const Re=(await window.html2canvas(ge,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:null,logging:!1})).toDataURL("image/png",1),lt=Math.min(ge.offsetWidth,480),ft=Math.round(ge.offsetHeight*(lt/Math.max(ge.offsetWidth,1)));return`<p style="margin: 6pt 0; text-align: center;"><img src="${Re}" width="${lt}" height="${ft}" style="max-width: 100%;"></p>`}catch{return`<p style="margin: 6pt 0;">${ge.textContent||""}</p>`}},U=["times","arial","helvetica","georgia","verdana","courier","roboto","sans-serif","serif","monospace","tahoma","trebuchet","palatino","garamond","cambria","calibri","segoe","inter"],V=ge=>{const Re=window.getComputedStyle(ge).fontFamily.toLowerCase().split(",").map(ct=>ct.trim().replace(/['"]/g,""));return Re.length>0&&!Re.some(ct=>U.some(lt=>ct.includes(lt)))},O=ge=>{var lt;const Me=ge.classList;if(Me.contains("shape-circle")||Me.contains("shape-pill")||Me.contains("shape-speech")||Me.contains("shape-cloud")||Me.contains("shape-rectangle")||Me.contains("mission-box")||Me.contains("floating-text")||Me.contains("tracing-line")||Me.contains("writing-lines")||Me.contains("toc-container")||ge.tagName==="TABLE")return!0;const Re=window.getComputedStyle(ge);if(Re.backgroundImage&&Re.backgroundImage!=="none"||V(ge)&&((lt=ge.textContent)!=null&&lt.trim()))return!0;const ct=ge.tagName.toLowerCase();if(ct==="div"||ct==="span"||ct==="p"){const ft=Re.backgroundColor;if(ft&&ft!=="rgba(0, 0, 0, 0)"&&ft!=="transparent"&&ft!=="rgb(255, 255, 255)")return!0}return(ct==="div"||ct==="span")&&parseFloat(Re.borderTopWidth||"0")>0&&Re.borderTopStyle!=="none"},X=ge=>{const Me=window.getComputedStyle(ge),Re=[],ct=Me.color;ct&&ct!=="rgb(0, 0, 0)"&&Re.push(`color: ${ct}`);const lt=Me.backgroundColor;lt&&lt!=="rgba(0, 0, 0, 0)"&&lt!=="transparent"&&Re.push(`background-color: ${lt}`);const ft=Me.fontFamily;ft&&Re.push(`font-family: ${ft}`);const xt=Me.fontSize;xt&&Re.push(`font-size: ${T(xt)}`);const rn=Me.fontWeight;rn&&rn!=="400"&&rn!=="normal"&&Re.push(`font-weight: ${rn}`);const dn=Me.fontStyle;dn&&dn!=="normal"&&Re.push(`font-style: ${dn}`);const an=Me.textDecorationLine||Me.textDecoration;an&&an!=="none"&&Re.push(`text-decoration: ${an}`);const tl=Me.textAlign;tl&&tl!=="start"&&tl!=="left"&&Re.push(`text-align: ${tl==="end"?"right":tl}`);const Gn=Me.lineHeight;Gn&&Gn!=="normal"&&Re.push(`line-height: ${Gn}`);const nl=Me.letterSpacing;nl&&nl!=="normal"&&nl!=="0px"&&Re.push(`letter-spacing: ${nl}`);const Wn=Me.textTransform;Wn&&Wn!=="none"&&Re.push(`text-transform: ${Wn}`);const xs=Me.borderTopWidth,$l=Me.borderTopStyle,xi=Me.borderTopColor;$l&&$l!=="none"&&xs&&xs!=="0px"&&Re.push(`border: ${xs} ${$l} ${xi}`);const ro=Me.paddingTop,io=Me.paddingRight,ys=Me.paddingBottom,bs=Me.paddingLeft;(ro&&ro!=="0px"||io&&io!=="0px"||ys&&ys!=="0px"||bs&&bs!=="0px")&&Re.push(`padding: ${T(ro)} ${T(io)} ${T(ys)} ${T(bs)}`);const Wl=Me.marginTop,Fl=Me.marginBottom;return Wl&&Wl!=="0px"&&Re.push(`margin-top: ${T(Wl)}`),Fl&&Fl!=="0px"&&Re.push(`margin-bottom: ${T(Fl)}`),Re.length>0?Re.join("; "):""},D=async ge=>{if(ge.nodeType===Node.TEXT_NODE)return ge.textContent||"";if(!(ge instanceof HTMLElement))return"";const Me=ge.tagName.toLowerCase();if(Me==="style"||Me==="script"||Me==="meta"||Me==="link"||ge.classList.contains("image-overlay")||ge.classList.contains("resize-handle")||ge.classList.contains("drag-handle")||ge.classList.contains("text-mode-badge")||ge.classList.contains("context-menu")||ge.classList.contains("page-ruler")||ge.classList.contains("margin-guides"))return"";if(O(ge))return await B(ge);if(Me==="img"){const ft=ge;let xt=ft.src||"";if(!xt)return"";try{if(ft.complete&&ft.naturalWidth>0){const Gn=document.createElement("canvas");Gn.width=ft.naturalWidth,Gn.height=ft.naturalHeight;const nl=Gn.getContext("2d");if(nl){const Wn=window.getComputedStyle(ft).filter;Wn&&Wn!=="none"&&(nl.filter=Wn),nl.drawImage(ft,0,0),xt=Gn.toDataURL("image/png")}}}catch{}const rn=ft.offsetWidth||ft.naturalWidth||300,dn=ft.offsetHeight||ft.naturalHeight||200,an=Math.min(rn,480),tl=Math.round(dn*(an/Math.max(rn,1)));return`<p style="text-align: center; margin: 8pt 0;"><img src="${xt}" width="${an}" height="${tl}" style="max-width: 100%;"></p>`}if(Me==="hr")return'<hr style="border: none; border-top: 1pt solid #000; margin: 10pt 0;">';let Re="";for(const ft of Array.from(ge.childNodes))Re+=await D(ft);if(ge.classList.contains("page"))return Re;if(ge.classList.contains("page-footer"))return`<p style="text-align: center; font-size: 9pt; color: #666; margin-top: 12pt;">${Re}</p>`;const ct=X(ge),lt=ct?` style="${ct}"`:"";switch(Me){case"h1":return`<h1${lt}>${Re}</h1>`;case"h2":return`<h2${lt}>${Re}</h2>`;case"h3":case"h4":case"h5":case"h6":return`<h3${lt}>${Re}</h3>`;case"p":return`<p${lt}>${Re}</p>`;case"blockquote":return`<p style="${ct}; border-left: 3pt solid #ccc; padding-left: 10pt; margin-left: 10pt;">${Re}</p>`;case"ul":return`<ul style="margin: 8pt 0 8pt 20pt;">${Re}</ul>`;case"ol":return`<ol style="margin: 8pt 0 8pt 20pt;">${Re}</ol>`;case"li":return`<li${lt}>${Re}</li>`;case"strong":case"b":return`<b>${Re}</b>`;case"em":case"i":return`<i>${Re}</i>`;case"u":return`<u>${Re}</u>`;case"br":return"<br>";case"a":return`<span${lt}>${Re}</span>`;case"span":return`<span${lt}>${Re}</span>`;case"div":return Re.trim()?`<div${lt}>${Re}</div>`:Re;default:return Re}},Q=v.querySelectorAll(".page");let $="";for(let ge=0;ge<Q.length;ge++)ge>0&&($+='<br clear="all" style="page-break-before: always;">'),$+=await D(Q[ge]);const Ce=r.cssContent.match(/\.page\s*\{[^}]*width:\s*([\d.]+(?:in|cm|mm|px))/),Ae=r.cssContent.match(/\.page\s*\{[^}]*(?:max-|min-)?height:\s*([\d.]+(?:in|cm|mm|px))/),ce=Ce?Ce[1]:"8.5in",Xe=Ae?Ae[1]:"11in",Ge=`<!DOCTYPE html>
<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="ProgId" content="Word.Document">
<!--[if gte mso 9]>
<xml>
<w:WordDocument>
<w:View>Print</w:View>
<w:Zoom>100</w:Zoom>
</w:WordDocument>
</xml>
<![endif]-->
<style>
@page { size: ${ce} ${Xe}; margin: 0.5in 0.5in 0.5in 0.375in; }
body { margin: 0; padding: 0; line-height: 1.5; }
p { margin-bottom: 8pt; }
ul, ol { margin-left: 24pt; }
li { margin-bottom: 4pt; }
img { max-width: 100%; height: auto; }
</style>
</head>
<body>
${$}
</body>
</html>`,Ze=window.htmlDocx.asBlob(Ge),ve=URL.createObjectURL(Ze),Te=document.createElement("a");Te.href=ve,Te.download=`${f}.docx`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(ve)},Xa=f=>{ln(f);const v=document.querySelector(".editor-workspace");if(v){const T=v.querySelectorAll(".page");T[f]&&T[f].scrollIntoView({behavior:"smooth",block:"start"})}},pi=()=>{if(!Jt.current)return;document.querySelectorAll(".editor-workspace .page").forEach((v,T)=>{const B=v.getBoundingClientRect();B.top>=0&&B.top<window.innerHeight/2&&ln(T)})},so=(f,v)=>{N(f),v&&(C(v),(v.matches(".mission-box, .tracing-line, .shape-circle, .shape-pill, .shape-speech, .shape-cloud, .shape-rectangle")||f.shape!=="none")&&Je(!0))},oo=f=>{S.current=!0,d(!0),M({active:!0,level:f,selectedIds:[]})},$a=f=>{j.active&&M(v=>v.selectedIds.includes(f)?{...v,selectedIds:v.selectedIds.filter(B=>B!==f)}:{...v,selectedIds:[...v.selectedIds,f]})},ms=()=>{if(!j.active||!j.level)return;const f=j.level,v=[];let T=!1;const B=[],U=[];if(j.selectedIds.forEach(V=>{const O=document.getElementById(V);O&&U.push(Wo(O))}),j.selectedIds.forEach(V=>{var Ce;const O=document.getElementById(V);if(!O)return;if(O.tagName.toLowerCase()!==f){const Ae=document.createElement(f);Array.from(O.attributes).forEach(ce=>{Ae.setAttribute(ce.name,ce.value)}),Ae.innerHTML=O.innerHTML,(Ce=O.parentNode)==null||Ce.replaceChild(Ae,O),T=!0}const X=document.getElementById(V);if(!X)return;X.setAttribute("data-structure-status","approved"),B.push(X);const D=X.closest(".page"),Q=document.querySelectorAll(".page");let $=1;Q.forEach((Ae,ce)=>{Ae===D&&($=ce+1)}),v.push({id:`manual-${V}-${Date.now()}`,elementId:V,text:X.innerText.substring(0,50),page:$,type:f,status:"approved"})}),v.length>0&&x(V=>{const O=new Set(v.map(D=>D.elementId));return[...V.filter(D=>!O.has(D.elementId)),...v]}),T||v.length>0){const V=document.querySelector(".editor-workspace");V&&re({...r,htmlContent:V.innerHTML},!0)}if(M({active:!1,level:null,selectedIds:[]}),B.length>0&&U.length>0){const V=document.querySelector(".editor-workspace");if(V){const O=U[0],X=new Set(B.map(Q=>Q.id)),D=Tu(O,null,V).filter(Q=>!X.has(Q.element.id));if(D.length>0){const Q=f;il({isOpen:!0,actionType:`Apply ${Q.toUpperCase()} to similar elements`,matches:D,applyStyle:$=>{var Ae;if($.tagName.toLowerCase()!==Q){const ce=document.createElement(Q);Array.from($.attributes).forEach(Xe=>{ce.setAttribute(Xe.name,Xe.value)}),ce.innerHTML=$.innerHTML,ce.id||(ce.id=`pattern-${Date.now()}-${Math.random().toString(36).substr(2,5)}`),(Ae=$.parentNode)==null||Ae.replaceChild(ce,$)}const Ce=document.getElementById($.id);if(Ce){Ce.setAttribute("data-structure-status","approved");const ce=Ce.closest(".page"),Xe=document.querySelectorAll(".page");let Ge=1;Xe.forEach((Ze,ve)=>{Ze===ce&&(Ge=ve+1)}),x(Ze=>Ze.some(ve=>ve.elementId===Ce.id)?Ze:[...Ze,{id:`pattern-${Ce.id}-${Date.now()}`,elementId:Ce.id,text:Ce.innerText.substring(0,50),page:Ge,type:Q,status:"approved"}])}}})}}}},ar=()=>{M({active:!1,level:null,selectedIds:[]})},gi=f=>{const v=document.getElementById(f);if(v){v.scrollIntoView({behavior:"smooth",block:"center"});const T=v.style.outline;v.style.outline="2px solid #a855f7",v.style.transition="outline 0.3s",setTimeout(()=>{v.style.outline=T},1500)}},mi=(f,v)=>{var B;x(U=>U.map(V=>V.id===f?{...V,status:v}:V));const T=document.getElementById(f);if(T){if(T.setAttribute("data-structure-status",v),v==="approved"){const V=p.find(O=>O.id===f);if(V&&V.type.startsWith("detected-")){const O=V.type.replace("detected-","");if(T.tagName.toLowerCase()!==O){const X=document.createElement(O);Array.from(T.attributes).forEach(D=>{X.setAttribute(D.name,D.value)}),X.innerHTML=T.innerHTML,(B=T.parentNode)==null||B.replaceChild(X,T)}}}const U=document.querySelector(".editor-workspace");U&&re({...r,htmlContent:U.innerHTML},!0)}};return s.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[s.jsx(nx,{isSidebarOpen:Dt,onToggleSidebar:()=>Mn(!Dt),onFormat:di,onFileUpload:je,onInsertImage:ke,onExport:()=>Yn(!0),onPageSizeChange:ha,pageFormatId:rt,customPageSize:Ye,onCustomPageSizeChange:er,onUpdateStyle:Fo,onOpenTOCModal:()=>gn(!0),onOpenPageNumberModal:us,onInsertHorizontalRule:cs,onInsertTextLayer:et,onToggleCrop:Dl,onPageBreak:Po,onBlockStyleUpdate:Io,showFrameTools:ml,onToggleFrameTools:()=>Je(!ml),selectionState:_e,isTextLayerMode:Le,fileName:r.fileName,selectedImage:w,selectedHR:se,selectedFooter:ot,imageProperties:A,hrProperties:H,onImagePropertyChange:ds,onHRPropertyChange:qa,onUndo:he,onRedo:ee,canUndo:we>0,canRedo:we<oe.length-1,availableFonts:u,pageMargins:at,onMarginChange:fs,showMarginGuides:kt,onToggleMarginGuides:()=>zt(!kt),showSmartGuides:Pe,onToggleSmartGuides:()=>sn(!Pe),onOpenSettings:()=>kn(!0),onReloadFonts:z,onAddFont:ye,onCaptureSelection:nt,onOpenLogs:()=>Sn(!0),onAutoMerge:()=>{const f=document.querySelector(".editor-workspace");if(!f)return;gx(f)?(me(f.innerHTML),bt(" Auto Merge completato")):bt("Nessun elemento da unire trovato"),window.setTimeout(()=>bt(""),2500)}}),Ht&&s.jsx("div",{className:"fixed top-20 right-6 z-50 bg-black text-white text-xs font-semibold px-3 py-2 rounded shadow-lg",children:Ht}),s.jsxs("div",{className:"app-main flex flex-1 overflow-hidden",children:[s.jsx(lx,{isSidebarOpen:Dt,pageCount:Rt,currentPage:dt,onPageSelect:Xa,structureEntries:p,selectionMode:j,onStartSelection:oo,onConfirmSelection:ms,onCancelSelection:ar,onNavigateToEntry:gi,onUpdateEntryStatus:mi,aiMessages:Ut,aiInput:Ot,aiLoading:jn,hasApiKey:!!Nn,onAiInputChange:mn,onAiSend:Ft,onOpenSettings:()=>kn(!0),onClearStructure:()=>{S.current=!0,b.current+=1,Ee.current&&(window.clearTimeout(Ee.current),Ee.current=null);const f=document.querySelector(".editor-workspace");f&&f.querySelectorAll("[data-structure-status]").forEach(v=>{v.removeAttribute("data-structure-status")}),x([]),d(!0)},onResetAutoScan:()=>{S.current=!1,d(!1)},isManualMode:m}),s.jsxs("div",{className:"flex-1 relative",onScroll:pi,children:[s.jsx(Rx,{htmlContent:r.htmlContent,cssContent:r.cssContent,onContentChange:de,onSelectionChange:so,onBlockClick:f=>{C(f)},onImageSelect:Tt,onTextLayerSelect:Vt,onHRSelect:tr,onFooterSelect:Xl,selectedImage:w,selectedTextLayer:le,selectedHR:se,selectedFooter:ot,containerRef:Jt,imageProperties:A,onCropComplete:lo,onCancelCrop:Ya,onPageBreak:Po,onInsertHorizontalRule:cs,onInsertImage:ke,onInsertTextLayerAt:Ct,showMarginGuides:kt,showSmartGuides:Pe,pageMargins:at,onMarginChange:fs,selectionMode:j,onBlockSelection:$a,suppressSelectionRef:Kl,isTextLayerMode:Le,zoom:xl,viewMode:zl,onToggleMultiSelect:zn,onClearMultiSelect:vl,multiSelectedElements:k,onDistributeMultiSelection:Yt,onAlignMultiSelection:Yl,distributeAdjustAxis:Se,onStartDistributeAdjust:Rn,onEndDistributeAdjust:el,onCopyStyle:wt,onPasteStyle:it,hasStyleClipboard:!!Y,onTocSelect:Jn}),s.jsx(_x,{zoom:xl,viewMode:zl,onZoomChange:Ie,onViewModeChange:xn})]})]}),Xn&&s.jsxs("div",{className:"fixed right-4 top-1/3 z-40 bg-white rounded-lg shadow-2xl border border-gray-200 w-64 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-violet-50 border-b border-violet-200",children:[s.jsx("span",{className:"text-xs font-bold text-violet-800 uppercase",children:"Edit TOC"}),s.jsx("button",{onClick:Ue,className:"text-gray-400 hover:text-gray-600",children:s.jsx(ui,{size:14})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:["Font Size (",on.fontSize,"px)"]}),s.jsx("input",{type:"range",min:8,max:18,value:on.fontSize,onChange:f=>Z({...on,fontSize:Number(f.target.value)}),className:"w-full accent-violet-600 h-1.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Font"}),s.jsxs("select",{value:on.fontFamily,onChange:f=>Z({...on,fontFamily:f.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-xs mt-0.5",children:[s.jsx("option",{value:"inherit",children:"Document Font"}),s.jsx("option",{value:"'Times New Roman', serif",children:"Times New Roman"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"Georgia, serif",children:"Georgia"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:["H2 Indent (",on.h2Indent,"px)"]}),s.jsx("input",{type:"range",min:0,max:60,value:on.h2Indent,onChange:f=>Z({...on,h2Indent:Number(f.target.value)}),className:"w-full accent-violet-600 h-1.5"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:["H3 Indent (",on.h3Indent,"px)"]}),s.jsx("input",{type:"range",min:0,max:80,value:on.h3Indent,onChange:f=>Z({...on,h3Indent:Number(f.target.value)}),className:"w-full accent-violet-600 h-1.5"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:["Line Height (",on.lineHeight,")"]}),s.jsx("input",{type:"range",min:1,max:2.5,step:.1,value:on.lineHeight,onChange:f=>Z({...on,lineHeight:Number(f.target.value)}),className:"w-full accent-violet-600 h-1.5"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",checked:on.showLeader,onChange:f=>Z({...on,showLeader:f.target.checked}),className:"rounded text-violet-600"}),"Dotted leader"]})]})]}),s.jsx(Dx,{isOpen:Zn,onClose:()=>gn(!1),onInsert:hi}),s.jsx(Yx,{isOpen:yt,initialApiKey:Nn,onClose:()=>kn(!1),onSave:Qe}),s.jsx(Jx,{isOpen:In,onClose:()=>Sn(!1),onDownload:lr,onClear:$n}),s.jsx(Ox,{isOpen:On,onClose:()=>Cn(!1),onApply:no,onPreview:to,anchors:Kn}),s.jsx(Y0,{isOpen:bl.isOpen,actionType:bl.actionType,matches:bl.matches,onConfirm:nr,onCancel:hs}),s.jsx(qx,{isOpen:Tn,currentFileName:r.fileName,onClose:()=>Yn(!1),onExportPDF:Jl,onExportHTML:ps,onExportDOCX:gs})]})},Z0=document.getElementById("root");if(!Z0)throw new Error("Could not find root element to mount to");const Fx=zg.createRoot(Z0);Fx.render(s.jsx(Wx,{}));
